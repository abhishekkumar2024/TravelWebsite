(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3897:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>c,routeModule:()=>b,tree:()=>d}),r(8748),r(1070),r(9644),r(5866);var s=r(3191),a=r(8716),l=r(7922),i=r.n(l),n=r(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8748)),"C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,1070)),"C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,9644)),"C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\admin\\page.tsx"],u="/admin/page",g={require:r,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8915:(e,t,r)=>{Promise.resolve().then(r.bind(r,188))},188:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(326),a=r(7577),l=r(5472);async function i(){try{let{data:e,error:t}=await l.O.from("blogs").select("*").order("created_at",{ascending:!1});if(t)return console.error("[admin] fetchAllBlogs error:",t.message),[];return e||[]}catch(e){return console.error("[admin] fetchAllBlogs exception:",e),[]}}async function n(e){try{let{data:t,error:r}=await l.O.from("blogs").select("*").eq("status",e).order("created_at",{ascending:!1});if(r)return console.error(`[admin] fetchBlogsByStatus(${e}) error:`,r.message),[];return t||[]}catch(t){return console.error(`[admin] fetchBlogsByStatus(${e}) exception:`,t),[]}}async function o(){try{let e=await i();return{total:e.length,pending:e.filter(e=>"pending"===e.status).length,published:e.filter(e=>"published"===e.status).length,rejected:e.filter(e=>"rejected"===e.status).length,draft:e.filter(e=>"draft"===e.status).length}}catch(e){return console.error("Error getting admin stats:",e),{total:0,pending:0,published:0,rejected:0,draft:0}}}var d=r(7453),c=r(2135);function u({onLoginSuccess:e,onCancel:t}){let{t:r}=(0,c.Z)(),[i,n]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[u,g]=(0,a.useState)(!1),[b,m]=(0,a.useState)(null),h=async t=>{t.preventDefault(),g(!0),m(null);try{let{data:t,error:s}=await l.O.auth.signInWithPassword({email:i,password:o});if(s)throw s;if(t.user){let s=t.user.user_metadata?.role||t.user.app_metadata?.role||t.user.raw_app_meta_data?.role;if("admin"!==s){await l.O.auth.signOut(),m(r("Access denied. Admin privileges required.","अस्वीकृत पहुंच। व्यवस्थापक विशेषाधिकार आवश्यक हैं।")),g(!1);return}e()}}catch(e){m(e.message||r("Login failed","लॉगिन विफल")),g(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-royal-blue to-deep-maroon rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r("Admin Login","व्यवस्थापक लॉगिन")}),s.jsx("p",{className:"text-gray-600 text-sm",children:r("Access admin dashboard","व्यवस्थापक डैशबोर्ड तक पहुंच")})]}),b&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:b})}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("Email","ईमेल")}),s.jsx("input",{type:"email",value:i,onChange:e=>n(e.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-royal-blue",placeholder:"admin@example.com"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:r("Password","पासवर्ड")}),s.jsx("input",{type:"password",value:o,onChange:e=>d(e.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-royal-blue",placeholder:"••••••••"})]}),s.jsx("button",{type:"submit",disabled:u,className:"w-full py-3 bg-gradient-to-r from-royal-blue to-deep-maroon text-white font-semibold rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:u?r("Logging in...","लॉगिन हो रहा है..."):r("Login","लॉगिन")}),t&&s.jsx("button",{type:"button",onClick:t,className:"w-full py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-all",children:r("Cancel","रद्द करें")})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsx("p",{className:"text-xs text-gray-500 text-center",children:r("Only users with admin role can access this page","केवल व्यवस्थापक भूमिका वाले उपयोगकर्ता इस पृष्ठ तक पहुंच सकते हैं")})})]})})}var g=r(434);function b(){let{t:e}=(0,c.Z)(),[t,r]=(0,a.useState)(!1),[i,b]=(0,a.useState)(!0),[m,h]=(0,a.useState)("pending"),[x,p]=(0,a.useState)([]),[f,j]=(0,a.useState)({total:0,pending:0,published:0,rejected:0,draft:0}),[w,y]=(0,a.useState)(null),v=async()=>{j(await o())},N=async()=>{p(await n(m))},_=async t=>{y(t);try{(await (0,d.f9)(t)).success?(await N(),await v()):alert(e("Failed to approve blog","ब्लॉग को मंजूरी देने में विफल"))}catch(t){console.error("Error approving blog:",t),alert(e("An error occurred","एक त्रुटि हुई"))}finally{y(null)}},k=async t=>{if(confirm(e("Are you sure you want to reject this blog?","क्या आप वाकई इस ब्लॉग को अस्वीकार करना चाहते हैं?"))){y(t);try{(await (0,d.ip)(t)).success?(await N(),await v()):alert(e("Failed to reject blog","ब्लॉग को अस्वीकार करने में विफल"))}catch(t){console.error("Error rejecting blog:",t),alert(e("An error occurred","एक त्रुटि हुई"))}finally{y(null)}}},S=async()=>{await l.O.auth.signOut(),r(!1),p([]),j({total:0,pending:0,published:0,rejected:0,draft:0})};return i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:(0,s.jsxs)("div",{className:"text-white text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),s.jsx("p",{children:e("Loading...","लोड हो रहा है...")})]})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[s.jsx("div",{className:"bg-white/10 backdrop-blur-lg border-b border-white/20",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:e("Admin Dashboard","व्यवस्थापक डैशबोर्ड")}),s.jsx("p",{className:"text-gray-300",children:e("Manage blog submissions","ब्लॉग सबमिशन प्रबंधित करें")})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(g.default,{href:"/",className:"px-4 py-2 bg-white/20 hover:bg-white/30 text-white rounded-lg transition-all",children:e("View Site","साइट देखें")}),s.jsx("button",{onClick:S,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-all",children:e("Logout","लॉगआउट")})]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-4 border border-white/20",children:[s.jsx("div",{className:"text-gray-300 text-sm mb-1",children:e("Total","कुल")}),s.jsx("div",{className:"text-2xl font-bold text-white",children:f.total})]}),(0,s.jsxs)("div",{className:"bg-yellow-500/20 backdrop-blur-lg rounded-lg p-4 border border-yellow-500/30",children:[s.jsx("div",{className:"text-yellow-200 text-sm mb-1",children:e("Pending","लंबित")}),s.jsx("div",{className:"text-2xl font-bold text-yellow-300",children:f.pending})]}),(0,s.jsxs)("div",{className:"bg-green-500/20 backdrop-blur-lg rounded-lg p-4 border border-green-500/30",children:[s.jsx("div",{className:"text-green-200 text-sm mb-1",children:e("Published","प्रकाशित")}),s.jsx("div",{className:"text-2xl font-bold text-green-300",children:f.published})]}),(0,s.jsxs)("div",{className:"bg-red-500/20 backdrop-blur-lg rounded-lg p-4 border border-red-500/30",children:[s.jsx("div",{className:"text-red-200 text-sm mb-1",children:e("Rejected","अस्वीकृत")}),s.jsx("div",{className:"text-2xl font-bold text-red-300",children:f.rejected})]}),(0,s.jsxs)("div",{className:"bg-gray-500/20 backdrop-blur-lg rounded-lg p-4 border border-gray-500/30",children:[s.jsx("div",{className:"text-gray-200 text-sm mb-1",children:e("Draft","ड्राफ्ट")}),s.jsx("div",{className:"text-2xl font-bold text-gray-300",children:f.draft})]})]}),s.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-1 mb-6 border border-white/20",children:s.jsx("div",{className:"flex gap-2",children:["pending","published","rejected","draft"].map(t=>(0,s.jsxs)("button",{onClick:()=>h(t),className:`flex-1 px-4 py-2 rounded-lg font-semibold transition-all ${m===t?"bg-white text-gray-900":"text-white hover:bg-white/10"}`,children:[e(t.charAt(0).toUpperCase()+t.slice(1),"pending"===t?"लंबित":"published"===t?"प्रकाशित":"rejected"===t?"अस्वीकृत":"ड्राफ्ट")," ","(","pending"===t?f.pending:"published"===t?f.published:"rejected"===t?f.rejected:f.draft,")"]},t))})}),s.jsx("div",{className:"space-y-4",children:0===x.length?s.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-12 text-center border border-white/20",children:s.jsx("p",{className:"text-gray-300 text-lg",children:e("No blogs found","कोई ब्लॉग नहीं मिला")})}):x.map(t=>s.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-lg p-6 border border-white/20 hover:bg-white/15 transition-all",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsx("div",{className:"w-full md:w-48 h-32 flex-shrink-0",children:s.jsx("img",{src:t.cover_image||"https://images.unsplash.com/photo-1477587458883-47145ed94245?w=800",alt:t.title_en,className:"w-full h-full object-cover rounded-lg"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:t.title_en}),s.jsx("p",{className:"text-gray-300 text-sm mb-2",children:t.excerpt_en||"No excerpt"})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"pending"===t.status?"bg-yellow-500/20 text-yellow-300":"published"===t.status?"bg-green-500/20 text-green-300":"rejected"===t.status?"bg-red-500/20 text-red-300":"bg-gray-500/20 text-gray-300"}`,children:t.status})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-400 mb-4",children:[(0,s.jsxs)("span",{children:[e("Category","श्रेणी"),": ",t.category]}),(0,s.jsxs)("span",{children:[e("Destination","स्थान"),": ",t.destination||"N/A"]}),(0,s.jsxs)("span",{children:[e("Created","बनाया गया"),": ",new Date(t.created_at).toLocaleDateString()]}),t.author&&(0,s.jsxs)("span",{children:[e("Author","लेखक"),": ","object"==typeof t.author?t.author.name:"Unknown"]})]}),"pending"===m&&(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>_(t.id),disabled:w===t.id,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:w===t.id?e("Processing...","प्रसंस्करण..."):e("Approve","मंजूरी दें")}),s.jsx("button",{onClick:()=>k(t.id),disabled:w===t.id,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:e("Reject","अस्वीकार करें")}),s.jsx(g.default,{href:`/blog/${t.id}`,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all",children:e("View","देखें")})]}),"pending"!==m&&(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx(g.default,{href:`/blog/${t.id}`,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-all",children:e("View","देखें")}),"rejected"===m&&s.jsx("button",{onClick:()=>_(t.id),disabled:w===t.id,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:e("Approve","मंजूरी दें")})]})]})]})},t.id))})]})]}):s.jsx(u,{onLoginSuccess:()=>r(!0)})}},7453:(e,t,r)=>{"use strict";r.d(t,{Vh:()=>a,f9:()=>l,ip:()=>i});var s=r(5472);async function a(e){try{let{data:{user:t},error:r}=await s.O.auth.getUser();if(r||!t)return console.error("[supabaseBlogs] User not authenticated:",r?.message),{id:null,error:"You must be logged in to submit a blog"};let a=e.status||"pending";console.log("[supabaseBlogs] Attempting to create blog with payload:",{title_en:e.title_en,destination:e.destination,category:e.category,status:a,author_id:t?.id,has_content:!!e.content_en,images_count:e.images?.length||0});let{data:l,error:i}=await s.O.from("blogs").insert({title_en:e.title_en,title_hi:e.title_hi??e.title_en,excerpt_en:e.excerpt_en,excerpt_hi:e.excerpt_hi??e.excerpt_en,content_en:e.content_en,content_hi:e.content_hi??e.content_en,destination:e.destination,category:e.category,cover_image:e.coverImage,author:e.author,images:e.images,author_id:t?.id,status:a,created_at:new Date().toISOString(),published_at:"published"===a?new Date().toISOString():null}).select("id").single();if(i)return console.error("[supabaseBlogs] createBlog error details:",{message:i.message,details:i.details,hint:i.hint,code:i.code}),{id:null,error:i.message||"Unknown error"};if(!l)return console.error("[supabaseBlogs] createBlog: No data returned from insert"),{id:null,error:"No data returned from database"};return console.log("[supabaseBlogs] Blog created successfully with ID:",l.id),{id:l.id,error:null}}catch(e){return console.error("[supabaseBlogs] createBlog unexpected error:",e),{id:null,error:e?.message||"Unexpected error occurred"}}}async function l(e){let{data:t,error:r}=await s.O.from("blogs").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select("id").single();return r||!t?(console.error("[supabaseBlogs] approveBlog error:",r?.message||r),{success:!1,error:r?.message||"Failed to approve blog"}):{success:!0,error:null}}async function i(e){let{data:t,error:r}=await s.O.from("blogs").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",e).select("id").single();return r||!t?(console.error("[supabaseBlogs] rejectBlog error:",r?.message||r),{success:!1,error:r?.message||"Failed to reject blog"}):{success:!0,error:null}}},5472:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});let s=(0,r(8903).eI)("https://lvyabpenpuizwzwzswse.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2eWFicGVucHVpend6d3pzd3NlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MDgxNTMsImV4cCI6MjA4NTA4NDE1M30.bq1O6ksPhxRFFEFmsNxbxH9boPlf2ebISO4jiHlHwj8")},8748:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\AbhishekKumar\Documents\Website\TravelWebsite\app\admin\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[20,903,634],()=>r(3897));module.exports=s})();