(()=>{var e={};e.id=369,e.ids=[369],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>p,routeModule:()=>u,tree:()=>c}),n(5389),n(1070),n(9644),n(5866);var i=n(3191),o=n(8716),r=n(7922),s=n.n(r),a=n(5231),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);n.d(t,l);let c=["",{children:["submit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,5389)),"C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\submit\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,1070)),"C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(n.bind(n,9644)),"C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"]}],p=["C:\\Users\\AbhishekKumar\\Documents\\Website\\TravelWebsite\\app\\submit\\page.tsx"],d="/submit/page",h={require:n,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/submit/page",pathname:"/submit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4615:(e,t,n)=>{Promise.resolve().then(n.bind(n,8004))},8004:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>cN});var i,o,r=n(326),s=n(7577),a=n(2135),l=n(962);function c(e){this.content=e}c.prototype={constructor:c,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return -1},get:function(e){var t=this.find(e);return -1==t?void 0:this.content[t+1]},update:function(e,t,n){var i=n&&n!=e?this.remove(n):this,o=i.find(e),r=i.content.slice();return -1==o?r.push(n||e,t):(r[o+1]=t,n&&(r[o]=n)),new c(r)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new c(n)},addToStart:function(e,t){return new c([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new c(n)},addBefore:function(e,t,n){var i=this.remove(t),o=i.content.slice(),r=i.find(e);return o.splice(-1==r?o.length:r,0,t,n),new c(o)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=c.from(e)).size?new c(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=c.from(e)).size?new c(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=c.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}},c.from=function(e){if(e instanceof c)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new c(t)};class p{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,t,n,i=0,o){for(let r=0,s=0;s<t;r++){let a=this.content[r],l=s+a.nodeSize;if(l>e&&!1!==n(a,i+s,o||null,r)&&a.content.size){let o=s+1;a.nodesBetween(Math.max(0,e-o),Math.min(a.content.size,t-o),n,i+o)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,i){let o="",r=!0;return this.nodesBetween(e,t,(s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?i?"function"==typeof i?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(r?r=!1:o+=n),o+=l},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,i=this.content.slice(),o=0;for(t.isText&&t.sameMarkup(n)&&(i[i.length-1]=t.withText(t.text+n.text),o=1);o<e.content.length;o++)i.push(e.content[o]);return new p(i,this.size+e.size)}cut(e,t=this.size){if(0==e&&t==this.size)return this;let n=[],i=0;if(t>e)for(let o=0,r=0;r<t;o++){let s=this.content[o],a=r+s.nodeSize;a>e&&((r<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-r),Math.min(s.text.length,t-r)):s.cut(Math.max(0,e-r-1),Math.min(s.content.size,t-r-1))),n.push(s),i+=s.nodeSize),r=a}return new p(n,i)}cutByIndex(e,t){return e==t?p.empty:0==e&&t==this.content.length?this:new p(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let i=this.content.slice(),o=this.size+t.nodeSize-n.nodeSize;return i[e]=t,new p(i,o)}addToStart(e){return new p([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new p(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let i=this.content[t];e(i,n,t),n+=i.nodeSize}}findDiffStart(e,t=0){return function e(t,n,i){for(let o=0;;o++){if(o==t.childCount||o==n.childCount)return t.childCount==n.childCount?null:i;let r=t.child(o),s=n.child(o);if(r==s){i+=r.nodeSize;continue}if(!r.sameMarkup(s))return i;if(r.isText&&r.text!=s.text){for(let e=0;r.text[e]==s.text[e];e++)i++;return i}if(r.content.size||s.content.size){let t=e(r.content,s.content,i+1);if(null!=t)return t}i+=r.nodeSize}}(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return function e(t,n,i,o){for(let r=t.childCount,s=n.childCount;;){if(0==r||0==s)return r==s?null:{a:i,b:o};let a=t.child(--r),l=n.child(--s),c=a.nodeSize;if(a==l){i-=c,o-=c;continue}if(!a.sameMarkup(l))return{a:i,b:o};if(a.isText&&a.text!=l.text){let e=0,t=Math.min(a.text.length,l.text.length);for(;e<t&&a.text[a.text.length-e-1]==l.text[l.text.length-e-1];)e++,i--,o--;return{a:i,b:o}}if(a.content.size||l.content.size){let t=e(a.content,l.content,i-1,o-1);if(t)return t}i-=c,o-=c}}(this,e,t,n)}findIndex(e){if(0==e)return h(0,e);if(e==this.size)return h(this.content.length,e);if(e>this.size||e<0)throw RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let i=n+this.child(t).nodeSize;if(i>=e){if(i==e)return h(t+1,i);return h(t,n)}n=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return p.empty;if(!Array.isArray(t))throw RangeError("Invalid input for Fragment.fromJSON");return new p(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return p.empty;let t,n=0;for(let i=0;i<e.length;i++){let o=e[i];n+=o.nodeSize,i&&o.isText&&e[i-1].sameMarkup(o)?(t||(t=e.slice(0,i)),t[t.length-1]=o.withText(t[t.length-1].text+o.text)):t&&t.push(o)}return new p(t||e,n)}static from(e){if(!e)return p.empty;if(e instanceof p)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new p([e],e.nodeSize);throw RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}p.empty=new p([],0);let d={index:0,offset:0};function h(e,t){return d.index=e,d.offset=t,d}function u(e,t){if(e===t)return!0;if(!(e&&"object"==typeof e)||!(t&&"object"==typeof t))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!u(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!u(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class f{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let i=0;i<e.length;i++){let o=e[i];if(this.eq(o))return e;if(this.type.excludes(o.type))t||(t=e.slice(0,i));else{if(o.type.excludes(this.type))return e;!n&&o.type.rank>this.type.rank&&(t||(t=e.slice(0,i)),t.push(this),n=!0),t&&t.push(o)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&u(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw RangeError(`There is no mark type ${t.type} in this schema`);let i=n.create(t.attrs);return n.checkAttrs(i.attrs),i}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return f.none;if(e instanceof f)return[e];let t=e.slice();return t.sort((e,t)=>e.type.rank-t.type.rank),t}}f.none=[];class m extends Error{}class g{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=function e(t,n,i,o){let{index:r,offset:s}=t.findIndex(n),a=t.maybeChild(r);if(s==n||a.isText)return o&&!o.canReplace(r,r,i)?null:t.cut(0,n).append(i).append(t.cut(n));let l=e(a.content,n-s-1,i,a);return l&&t.replaceChild(r,a.copy(l))}(this.content,e+this.openStart,t);return n&&new g(n,this.openStart,this.openEnd)}removeBetween(e,t){return new g(function e(t,n,i){let{index:o,offset:r}=t.findIndex(n),s=t.maybeChild(o),{index:a,offset:l}=t.findIndex(i);if(r==n||s.isText){if(l!=i&&!t.child(a).isText)throw RangeError("Removing non-flat range");return t.cut(0,n).append(t.cut(i))}if(o!=a)throw RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(e(s.content,n-r-1,i-r-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return g.empty;let n=t.openStart||0,i=t.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw RangeError("Invalid input for Slice.fromJSON");return new g(p.fromJSON(e,t.content),n,i)}static maxOpen(e,t=!0){let n=0,i=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let n=e.lastChild;n&&!n.isLeaf&&(t||!n.type.spec.isolating);n=n.lastChild)i++;return new g(e,n,i)}}function v(e,t){if(!t.type.compatibleContent(e.type))throw new m("Cannot join "+t.type.name+" onto "+e.type.name)}function x(e,t,n){let i=e.node(n);return v(i,t.node(n)),i}function y(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function b(e,t,n,i){let o=(t||e).node(n),r=0,s=t?t.index(n):o.childCount;e&&(r=e.index(n),e.depth>n?r++:e.textOffset&&(y(e.nodeAfter,i),r++));for(let e=r;e<s;e++)y(o.child(e),i);t&&t.depth==n&&t.textOffset&&y(t.nodeBefore,i)}function w(e,t){return e.type.checkContent(t),e.copy(t)}function k(e,t,n){let i=[];return b(null,e,n,i),e.depth>n&&y(w(x(e,t,n+1),k(e,t,n+1)),i),b(t,null,n,i),new p(i)}g.empty=new g(p.empty,0,0);class S{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=e.child(t);return n?e.child(t).cut(n):i}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],i=0==t?0:this.path[3*t-1]+1;for(let t=0;t<e;t++)i+=n.child(t).nodeSize;return i}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return f.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),i=e.maybeChild(t);if(!n){let e=n;n=i,i=e}let o=n.marks;for(var r=0;r<o.length;r++)!1!==o[r].type.spec.inclusive||i&&o[r].isInSet(i.marks)||(o=o[r--].removeFromSet(o));return o}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,i=e.parent.maybeChild(e.index());for(var o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||i&&n[o].isInSet(i.marks)||(n=n[o--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new N(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw RangeError("Position "+t+" out of range");let n=[],i=0,o=t;for(let t=e;;){let{index:e,offset:r}=t.content.findIndex(o),s=o-r;if(n.push(t,e,i+r),!s||(t=t.child(e)).isText)break;o=s-1,i+=r+1}return new S(t,n,o)}static resolveCached(e,t){let n=O.get(e);if(n)for(let e=0;e<n.elts.length;e++){let i=n.elts[e];if(i.pos==t)return i}else O.set(e,n=new C);let i=n.elts[n.i]=S.resolve(e,t);return n.i=(n.i+1)%M,i}}class C{constructor(){this.elts=[],this.i=0}}let M=12,O=new WeakMap;class N{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}let T=Object.create(null);class E{constructor(e,t,n,i=f.none){this.type=e,this.attrs=t,this.marks=i,this.content=n||p.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,i=0){this.content.nodesBetween(e,t,n,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,i){return this.content.textBetween(e,t,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&u(this.attrs,t||e.defaultAttrs||T)&&f.sameSet(this.marks,n||f.none)}copy(e=null){return e==this.content?this:new E(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new E(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return g.empty;let i=this.resolve(e),o=this.resolve(t),r=n?0:i.sharedDepth(t),s=i.start(r);return new g(i.node(r).content.cut(i.pos-s,o.pos-s),i.depth-r,o.depth-r)}replace(e,t,n){return function(e,t,n){if(n.openStart>e.depth)throw new m("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new m("Inconsistent open depths");return function e(t,n,i,o){let r=t.index(o),s=t.node(o);if(r==n.index(o)&&o<t.depth-i.openStart){let a=e(t,n,i,o+1);return s.copy(s.content.replaceChild(r,a))}if(!i.content.size)return w(s,k(t,n,o));if(i.openStart||i.openEnd||t.depth!=o||n.depth!=o){let{start:e,end:r}=function(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let e=n-1;e>=0;e--)i=t.node(e).copy(p.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}(i,t);return w(s,function e(t,n,i,o,r){let s=t.depth>r&&x(t,n,r+1),a=o.depth>r&&x(i,o,r+1),l=[];return b(null,t,r,l),s&&a&&n.index(r)==i.index(r)?(v(s,a),y(w(s,e(t,n,i,o,r+1)),l)):(s&&y(w(s,k(t,n,r+1)),l),b(n,i,r,l),a&&y(w(a,k(i,o,r+1)),l)),b(o,null,r,l),new p(l)}(t,e,r,n,o))}{let e=t.parent,o=e.content;return w(e,o.cut(0,t.parentOffset).append(i.content).append(o.cut(n.parentOffset)))}}(e,t,n,0)}(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:i}=t.content.findIndex(e);if(!(t=t.maybeChild(n)))return null;if(i==e||t.isText)return t;e-=i+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let i=this.content.child(t-1);return{node:i,index:t-1,offset:n-i.nodeSize}}resolve(e){return S.resolveCached(this,e)}resolveNoCache(e){return S.resolve(this,e)}rangeHasMark(e,t,n){let i=!1;return t>e&&this.nodesBetween(e,t,e=>(n.isInSet(e.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),j(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=p.empty,i=0,o=n.childCount){let r=this.contentMatchAt(e).matchFragment(n,i,o),s=r&&r.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let e=i;e<o;e++)if(!this.type.allowsMarks(n.child(e).marks))return!1;return!0}canReplaceWith(e,t,n,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(e).matchType(n),r=o&&o.matchFragment(this.content,t);return!!r&&r.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=f.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!f.sameSet(e,this.marks))throw RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(e=>e.toJSON())),e}static fromJSON(e,t){let n;if(!t)throw RangeError("Invalid input for Node.fromJSON");if(t.marks){if(!Array.isArray(t.marks))throw RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw RangeError("Invalid text node in JSON");return e.text(t.text,n)}let i=p.fromJSON(e,t.content),o=e.nodeType(t.type).create(t.attrs,i,n);return o.type.checkAttrs(o.attrs),o}}E.prototype.text=void 0;class A extends E{constructor(e,t,n,i){if(super(e,t,null,i),!n)throw RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):j(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new A(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new A(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function j(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class D{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){var n;let i,o=new R(e,t);if(null==o.next)return D.empty;let r=function e(t){let n=[];do n.push(function(t){let n=[];do n.push(function(t){let n=function(t){if(t.eat("(")){let n=e(t);return t.eat(")")||t.err("Missing closing paren"),n}if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=(function(e,t){let n=e.nodeTypes,i=n[t];if(i)return[i];let o=[];for(let e in n){let i=n[e];i.isInGroup(t)&&o.push(i)}return 0==o.length&&e.err("No node type or group '"+t+"' found"),o})(t,t.next).map(e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}}(t);for(;;)if(t.eat("+"))n={type:"plus",expr:n};else if(t.eat("*"))n={type:"star",expr:n};else if(t.eat("?"))n={type:"opt",expr:n};else if(t.eat("{"))n=function(e,t){let n=I(e),i=n;return e.eat(",")&&(i="}"!=e.next?I(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:t}}(t,n);else break;return n}(t));while(t.next&&")"!=t.next&&"|"!=t.next);return 1==n.length?n[0]:{type:"seq",exprs:n}}(t));while(t.eat("|"));return 1==n.length?n[0]:{type:"choice",exprs:n}}(o);o.next&&o.err("Unexpected trailing text");let s=(n=function(e){let t=[[]];return o(function e(t,r){if("choice"==t.type)return t.exprs.reduce((t,n)=>t.concat(e(n,r)),[]);if("seq"==t.type)for(let i=0;;i++){let s=e(t.exprs[i],r);if(i==t.exprs.length-1)return s;o(s,r=n())}else if("star"==t.type){let s=n();return i(r,s),o(e(t.expr,s),s),[i(s)]}else if("plus"==t.type){let s=n();return o(e(t.expr,r),s),o(e(t.expr,s),s),[i(s)]}else if("opt"==t.type)return[i(r)].concat(e(t.expr,r));else if("range"==t.type){let s=r;for(let i=0;i<t.min;i++){let i=n();o(e(t.expr,s),i),s=i}if(-1==t.max)o(e(t.expr,s),s);else for(let r=t.min;r<t.max;r++){let r=n();i(s,r),o(e(t.expr,s),r),s=r}return[i(s)]}else if("name"==t.type)return[i(r,void 0,t.value)];else throw Error("Unknown expr type")}(e,0),n()),t;function n(){return t.push([])-1}function i(e,n,i){let o={term:i,to:n};return t[e].push(o),o}function o(e,t){e.forEach(e=>e.to=t)}}(r),i=Object.create(null),function e(t){let o=[];t.forEach(e=>{n[e].forEach(({term:e,to:t})=>{let i;if(e){for(let t=0;t<o.length;t++)o[t][0]==e&&(i=o[t][1]);z(n,t).forEach(t=>{i||o.push([e,i=[]]),-1==i.indexOf(t)&&i.push(t)})}})});let r=i[t.join(",")]=new D(t.indexOf(n.length-1)>-1);for(let t=0;t<o.length;t++){let n=o[t][1].sort(P);r.next.push({type:o[t][0],next:i[n.join(",")]||e(n)})}return r}(z(n,0)));return function(e,t){for(let n=0,i=[e];n<i.length;n++){let e=i[n],o=!e.validEnd,r=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];r.push(n.name),o&&!(n.isText||n.hasRequiredAttrs())&&(o=!1),-1==i.indexOf(s)&&i.push(s)}o&&t.err("Only non-generatable nodes ("+r.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,o),s}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let i=this;for(let o=t;i&&o<n;o++)i=i.matchType(e.child(o).type);return i}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let i=[this];return function o(r,s){let a=r.matchFragment(e,n);if(a&&(!t||a.validEnd))return p.from(s.map(e=>e.createAndFill()));for(let e=0;e<r.next.length;e++){let{type:t,next:n}=r.next[e];if(!(t.isText||t.hasRequiredAttrs())&&-1==i.indexOf(n)){i.push(n);let e=o(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),o=i.match;if(o.matchType(e)){let e=[];for(let t=i;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<o.next.length;e++){let{type:r,next:s}=o.next[e];r.isLeaf||r.hasRequiredAttrs()||r.name in t||i.type&&!s.validEnd||(n.push({match:r.contentMatch,type:r,via:i}),t[r.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let i=0;i<n.next.length;i++)-1==e.indexOf(n.next[i].next)&&t(n.next[i].next)}(this),e.map((t,n)=>{let i=n+(t.validEnd?"*":" ")+" ";for(let n=0;n<t.next.length;n++)i+=(n?", ":"")+t.next[n].type.name+"->"+e.indexOf(t.next[n].next);return i}).join("\n")}}D.empty=new D(!0);class R{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw SyntaxError(e+" (in content expression '"+this.string+"')")}}function I(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function P(e,t){return t-e}function z(e,t){let n=[];return function t(i){let o=e[i];if(1==o.length&&!o[0].term)return t(o[0].to);n.push(i);for(let e=0;e<o.length;e++){let{term:i,to:r}=o[e];i||-1!=n.indexOf(r)||t(r)}}(t),n.sort(P)}function L(e){let t=Object.create(null);for(let n in e){let i=e[n];if(!i.hasDefault)return null;t[n]=i.default}return t}function B(e,t){let n=Object.create(null);for(let i in e){let o=t&&t[i];if(void 0===o){let t=e[i];if(t.hasDefault)o=t.default;else throw RangeError("No value supplied for attribute "+i)}n[i]=o}return n}function F(e,t,n,i){for(let i in t)if(!(i in e))throw RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let n in e){let i=e[n];i.validate&&i.validate(t[n])}}function $(e,t){let n=Object.create(null);if(t)for(let i in t)n[i]=new H(e,i,t[i]);return n}class V{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=$(e,n.attrs),this.defaultAttrs=L(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==D.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:B(this.attrs,e)}create(e=null,t,n){if(this.isText)throw Error("NodeType.create can't construct text nodes");return new E(this,this.computeAttrs(e),p.from(t),f.setFrom(n))}createChecked(e=null,t,n){return t=p.from(t),this.checkContent(t),new E(this,this.computeAttrs(e),t,f.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),(t=p.from(t)).size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let i=this.contentMatch.matchFragment(t),o=i&&i.fillBefore(p.empty,!0);return o?new E(this,e,t.append(o),f.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){F(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){let t;if(null==this.markSet)return e;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:f.none:e}static compile(e,t){let n=Object.create(null);e.forEach((e,i)=>n[e]=new V(e,t,i));let i=t.spec.topNode||"doc";if(!n[i])throw RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw RangeError("Every schema needs a 'text' type");for(let e in n.text.attrs)throw RangeError("The text node type should not have attributes");return n}}class H{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let i=n.split("|");return n=>{let o=null===n?"null":typeof n;if(0>i.indexOf(o))throw RangeError(`Expected value of type ${i} for attribute ${t} on type ${e}, got ${o}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class _{constructor(e,t,n,i){this.name=e,this.rank=t,this.schema=n,this.spec=i,this.attrs=$(e,i.attrs),this.excluded=null;let o=L(this.attrs);this.instance=o?new f(this,o):null}create(e=null){return!e&&this.instance?this.instance:new f(this,B(this.attrs,e))}static compile(e,t){let n=Object.create(null),i=0;return e.forEach((e,o)=>n[e]=new _(e,i++,t,o)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){F(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class q{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let n in e)t[n]=e[n];t.nodes=c.from(e.nodes),t.marks=c.from(e.marks||{}),this.nodes=V.compile(this.spec.nodes,this),this.marks=_.compile(this.spec.marks,this);let n=Object.create(null);for(let e in this.nodes){if(e in this.marks)throw RangeError(e+" can not be both a node and a mark");let t=this.nodes[e],i=t.spec.content||"",o=t.spec.marks;if(t.contentMatch=n[i]||(n[i]=D.parse(i,this.nodes)),t.inlineContent=t.contentMatch.inlineContent,t.spec.linebreakReplacement){if(this.linebreakReplacement)throw RangeError("Multiple linebreak nodes defined");if(!t.isInline||!t.isLeaf)throw RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=t}t.markSet="_"==o?null:o?W(this,o.split(" ")):""!=o&&t.inlineContent?null:[]}for(let e in this.marks){let t=this.marks[e],n=t.spec.excludes;t.excluded=null==n?[t]:""==n?[]:W(this,n.split(" "))}this.nodeFromJSON=e=>E.fromJSON(this,e),this.markFromJSON=e=>f.fromJSON(this,e),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,i){if("string"==typeof e)e=this.nodeType(e);else if(e instanceof V){if(e.schema!=this)throw RangeError("Node type from different schema used ("+e.name+")")}else throw RangeError("Invalid node type: "+e);return e.createChecked(t,n,i)}text(e,t){let n=this.nodes.text;return new A(n,n.defaultAttrs,e,f.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw RangeError("Unknown node type: "+e);return t}}function W(e,t){let n=[];for(let i=0;i<t.length;i++){let o=t[i],r=e.marks[o],s=r;if(r)n.push(r);else for(let t in e.marks){let i=e.marks[t];("_"==o||i.spec.group&&i.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=i)}if(!s)throw SyntaxError("Unknown mark type: '"+t[i]+"'")}return n}class K{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(e=>{if(null!=e.tag)this.tags.push(e);else if(null!=e.style){let t=/[^=]*/.exec(e.style)[0];0>n.indexOf(t)&&n.push(t),this.styles.push(e)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)})}parse(e,t={}){let n=new X(this,t,!1);return n.addAll(e,f.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new X(this,t,!0);return n.addAll(e,f.none,t.from,t.to),g.maxOpen(n.finish())}matchTag(e,t,n){for(let o=n?this.tags.indexOf(n)+1:0;o<this.tags.length;o++){var i;let n=this.tags[o];if(i=n.tag,(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,i)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let i=this.styles[o],r=i.style;if(0==r.indexOf(e)&&(!i.context||n.matchesContext(i.context))&&(!(r.length>e.length)||61==r.charCodeAt(e.length)&&r.slice(e.length+1)==t)){if(i.getAttrs){let e=i.getAttrs(t);if(!1===e)continue;i.attrs=e||void 0}return i}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,i=0;for(;i<t.length;i++){let e=t[i];if((null==e.priority?50:e.priority)<n)break}t.splice(i,0,e)}for(let t in e.marks){let i=e.marks[t].spec.parseDOM;i&&i.forEach(e=>{n(e=Z(e)),e.mark||e.ignore||e.clearMark||(e.mark=t)})}for(let t in e.nodes){let i=e.nodes[t].spec.parseDOM;i&&i.forEach(e=>{n(e=Z(e)),e.node||e.ignore||e.mark||(e.node=t)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new K(e,K.schemaRules(e)))}}let U={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},J={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},G={ol:!0,ul:!0};function Y(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Q{constructor(e,t,n,i,o,r){this.type=e,this.attrs=t,this.marks=n,this.solid=i,this.options=r,this.content=[],this.activeMarks=f.none,this.match=o||(4&r?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(p.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let t=this.type.contentMatch,n;return(n=t.findWrapping(e.type))?(this.match=t,n):null}}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e=this.content[this.content.length-1],t;e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))&&(e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=e.withText(e.text.slice(0,e.text.length-t[0].length)))}let t=p.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(p.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!U.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class X{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let i=t.topNode,o,r=Y(null,t.preserveWhitespace,0)|(n?4:0);o=i?new Q(i.type,i.attrs,f.none,!0,t.topMatch||i.type.contentMatch,r):n?new Q(null,null,f.none,!0,null,r):new Q(e.schema.topNodeType,null,f.none,!0,null,r),this.nodes=[o],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,i=this.top,o=2&i.options?"full":this.localPreserveWS||(1&i.options)>0,{schema:r}=this.parser;if("full"===o||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(o){if("full"===o)n=n.replace(/\r\n?/g,"\n");else if(r.linebreakReplacement&&/[\r\n]/.test(n)&&this.top.findWrapping(r.linebreakReplacement.create())){let e=n.split(/\r?\n|\r/);for(let n=0;n<e.length;n++)n&&this.insertNode(r.linebreakReplacement.create(),t,!0),e[n]&&this.insertNode(r.text(e[n]),t,!/\S/.test(e[n]));n=""}else n=n.replace(/\r?\n|\r/g," ")}else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=i.content[i.content.length-1],o=e.previousSibling;(!t||o&&"BR"==o.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(r.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let i=this.localPreserveWS,o=this.top;("PRE"==e.tagName||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let r=e.nodeName.toLowerCase(),s;G.hasOwnProperty(r)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&G.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(s=this.parser.matchTag(e,this,n));e:if(a?a.ignore:J.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e,t);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let n,i=this.needsBlock;if(U.hasOwnProperty(r))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),n=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let s=a&&a.skip?t:this.readStyles(e,t);s&&this.addAll(e,s),n&&this.sync(o),this.needsBlock=i}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,a,n,!1===a.consuming?s:void 0)}this.localPreserveWS=i}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let e=0;e<this.parser.matchedStyles.length;e++){let i=this.parser.matchedStyles[e],o=n.getPropertyValue(i);if(o)for(let e;;){let n=this.parser.matchStyle(i,o,this,e);if(!n)break;if(n.ignore)return null;if(t=n.clearMark?t.filter(e=>!n.clearMark(e)):t.concat(this.parser.schema.marks[n.mark].create(n.attrs)),!1===n.consuming)e=n;else break}}return t}addElementByRule(e,t,n,i){let o,r;if(t.node){if((r=this.parser.schema.nodes[t.node]).isLeaf)this.insertNode(r.create(t.attrs),n,"BR"==e.nodeName)||this.leafFallback(e,n);else{let e=this.enter(r,t.attrs||null,n,t.preserveWhitespace);e&&(o=!0,n=e)}}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(r&&r.isLeaf)this.findInside(e);else if(i)this.addElement(e,n,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(e=>this.insertNode(e,n,!1));else{let i=e;"string"==typeof t.contentElement?i=e.querySelector(t.contentElement):"function"==typeof t.contentElement?i=t.contentElement(e):t.contentElement&&(i=t.contentElement),this.findAround(e,i,!0),this.addAll(i,n),this.findAround(e,i,!1)}o&&this.sync(s)&&this.open--}addAll(e,t,n,i){let o=n||0;for(let r=n?e.childNodes[n]:e.firstChild,s=null==i?null:e.childNodes[i];r!=s;r=r.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(r,t);this.findAtPoint(e,o)}findPlace(e,t,n){let i,o;for(let t=this.open,r=0;t>=0;t--){let s=this.nodes[t],a=s.findWrapping(e);if(a&&(!i||i.length>a.length+r)&&(i=a,o=s,!a.length))break;if(s.solid){if(n)break;r+=2}}if(!i)return null;this.sync(o);for(let e=0;e<i.length;e++)t=this.enterInner(i[e],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let i=this.findPlace(e,t,n);if(i){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let n=f.none;for(let o of i.concat(e.marks))(t.type?t.type.allowsMarkType(o.type):ee(o.type,e.type))&&(n=o.addToSet(n));return t.content.push(e.mark(n)),!0}return!1}enter(e,t,n,i){let o=this.findPlace(e.create(t),n,!1);return o&&(o=this.enterInner(e,t,n,!0,i)),o}enterInner(e,t,n,i=!1,o){this.closeExtra();let r=this.top;r.match=r.match&&r.match.matchType(e);let s=Y(e,o,r.options);4&r.options&&0==r.content.length&&(s|=4);let a=f.none;return n=n.filter(t=>(r.type?!r.type.allowsMarkType(t.type):!ee(t.type,e))||(a=t.addToSet(a),!1)),this.nodes.push(new Q(e,t,a,i,null,s)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=1)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let i=0;i<this.find.length;i++)null==this.find[i].pos&&1==e.nodeType&&e.contains(this.find[i].node)&&t.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,i=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),o=-(n?n.depth+1:0)+(i?0:1),r=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=o;s--)if(r(e-1,s))return!0;return!1}{let e=s>0||0==s&&i?this.nodes[s].type:n&&s>=o?n.node(s-o).type:null;if(!e||e.name!=a&&!e.isInGroup(a))return!1;s--}}return!0};return r(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let e in this.parser.schema.nodes){let t=this.parser.schema.nodes[e];if(t.isTextblock&&t.defaultAttrs)return t}}}function Z(e){let t={};for(let n in e)t[n]=e[n];return t}function ee(e,t){let n=t.schema.nodes;for(let i in n){let o=n[i];if(!o.allowsMarkType(e))continue;let r=[],s=e=>{r.push(e);for(let n=0;n<e.edgeCount;n++){let{type:i,next:o}=e.edge(n);if(i==t||0>r.indexOf(o)&&s(o))return!0}};if(s(o.contentMatch))return!0}}class et{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=ei(t).createDocumentFragment());let i=n,o=[];return e.forEach(e=>{if(o.length||e.marks.length){let n=0,r=0;for(;n<o.length&&r<e.marks.length;){let t=e.marks[r];if(!this.marks[t.type.name]){r++;continue}if(!t.eq(o[n][0])||!1===t.type.spec.spanning)break;n++,r++}for(;n<o.length;)i=o.pop()[1];for(;r<e.marks.length;){let n=e.marks[r++],s=this.serializeMark(n,e.isInline,t);s&&(o.push([n,i]),i.appendChild(s.dom),i=s.contentDOM||s.dom)}}i.appendChild(this.serializeNodeInner(e,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:i}=er(ei(t),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,i)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let i=e.marks.length-1;i>=0;i--){let o=this.serializeMark(e.marks[i],e.isInline,t);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n}serializeMark(e,t,n={}){let i=this.marks[e.type.name];return i&&er(ei(n),i(e,t),null,e.attrs)}static renderSpec(e,t,n=null,i){return er(e,t,n,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new et(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=en(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return en(e.marks)}}function en(e){let t={};for(let n in e){let i=e[n].spec.toDOM;i&&(t[n]=i)}return t}function ei(e){return e.document||window.document}let eo=new WeakMap;function er(e,t,n,i){let o,r,s;if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let a=t[0],l;if("string"!=typeof a)throw RangeError("Invalid array passed to renderSpec");if(i&&(void 0===(r=eo.get(i))&&eo.set(i,(s=null,function e(t){if(t&&"object"==typeof t){if(Array.isArray(t)){if("string"==typeof t[0])s||(s=[]),s.push(t);else for(let n=0;n<t.length;n++)e(t[n])}else for(let n in t)e(t[n])}}(i),r=s)),l=r)&&l.indexOf(t)>-1)throw RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=a.indexOf(" ");c>0&&(n=a.slice(0,c),a=a.slice(c+1));let p=n?e.createElementNS(n,a):e.createElement(a),d=t[1],h=1;if(d&&"object"==typeof d&&null==d.nodeType&&!Array.isArray(d)){for(let e in h=2,d)if(null!=d[e]){let t=e.indexOf(" ");t>0?p.setAttributeNS(e.slice(0,t),e.slice(t+1),d[e]):"style"==e&&p.style?p.style.cssText=d[e]:p.setAttribute(e,d[e])}}for(let r=h;r<t.length;r++){let s=t[r];if(0===s){if(r<t.length-1||r>h)throw RangeError("Content hole must be the only child of its parent node");return{dom:p,contentDOM:p}}{let{dom:t,contentDOM:r}=er(e,s,n,i);if(p.appendChild(t),r){if(o)throw RangeError("Multiple content holes");o=r}}}return{dom:p,contentDOM:o}}class es{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class ea{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ea.empty)return ea.empty}recover(e){let t=0,n=65535&e;if(!this.inverted)for(let e=0;e<n;e++)t+=this.ranges[3*e+2]-this.ranges[3*e+1];return this.ranges[3*n]+t+(e-(65535&e))/65536}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let i=0,o=this.inverted?2:1,r=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?i:0);if(a>e)break;let l=this.ranges[s+o],c=this.ranges[s+r],p=a+l;if(e<=p){let o=l?e==a?-1:e==p?1:t:t,r=a+i+(o<0?0:c);if(n)return r;let d=e==(t<0?a:p)?null:s/3+(e-a)*65536,h=e==a?2:e==p?1:4;return(t<0?e!=a:e!=p)&&(h|=8),new es(r,h,d)}i+=c-l}return n?e+i:new es(e+i,0,null)}touches(e,t){let n=0,i=65535&t,o=this.inverted?2:1,r=this.inverted?1:2;for(let t=0;t<this.ranges.length;t+=3){let s=this.ranges[t]-(this.inverted?n:0);if(s>e)break;let a=this.ranges[t+o];if(e<=s+a&&t==3*i)return!0;n+=this.ranges[t+r]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let r=this.ranges[i],s=r-(this.inverted?o:0),a=r+(this.inverted?0:o),l=this.ranges[i+t],c=this.ranges[i+n];e(s,s+l,a,a+c),o+=c-l}}invert(){return new ea(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?ea.empty:new ea(e<0?[0,-e,0]:[0,0,e])}}ea.empty=new ea([]);class el{constructor(e,t,n=0,i=e?e.length:0){this.mirror=t,this.from=n,this.to=i,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new el(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),null!=t&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let i=e.getMirror(t);this.appendMap(e._maps[t],null!=i&&i<t?n+i:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let i=e.getMirror(t);this.appendMap(e._maps[t].invert(),null!=i&&i>t?n-i-1:void 0)}}invert(){let e=new el;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let i=0;for(let n=this.from;n<this.to;n++){let o=this._maps[n].mapResult(e,t);if(null!=o.recover){let t=this.getMirror(n);if(null!=t&&t>n&&t<this.to){n=t,e=this._maps[t].recover(o.recover);continue}}i|=o.delInfo,e=o.pos}return n?e:new es(e,i,null)}}let ec=Object.create(null);class ep{getMap(){return ea.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw RangeError("Invalid input for Step.fromJSON");let n=ec[t.stepType];if(!n)throw RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in ec)throw RangeError("Duplicate use of step JSON ID "+e);return ec[e]=t,t.prototype.jsonID=e,t}}class ed{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new ed(e,null)}static fail(e){return new ed(null,e)}static fromReplace(e,t,n,i){try{return ed.ok(e.replace(t,n,i))}catch(e){if(e instanceof m)return ed.fail(e.message);throw e}}}function eh(e,t,n){let i=[];for(let o=0;o<e.childCount;o++){let r=e.child(o);r.content.size&&(r=r.copy(eh(r.content,t,r))),r.isInline&&(r=t(r,n,o)),i.push(r)}return p.fromArray(i)}class eu extends ep{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),i=n.node(n.sharedDepth(this.to)),o=new g(eh(t.content,(e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e,i),t.openStart,t.openEnd);return ed.fromReplace(e,this.from,this.to,o)}invert(){return new ef(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new eu(t.pos,n.pos,this.mark)}merge(e){return e instanceof eu&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new eu(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for AddMarkStep.fromJSON");return new eu(t.from,t.to,e.markFromJSON(t.mark))}}ep.jsonID("addMark",eu);class ef extends ep{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new g(eh(t.content,e=>e.mark(this.mark.removeFromSet(e.marks)),e),t.openStart,t.openEnd);return ed.fromReplace(e,this.from,this.to,n)}invert(){return new eu(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new ef(t.pos,n.pos,this.mark)}merge(e){return e instanceof ef&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ef(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ef(t.from,t.to,e.markFromJSON(t.mark))}}ep.jsonID("removeMark",ef);class em extends ep{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ed.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return ed.fromReplace(e,this.pos,this.pos+1,new g(p.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new em(this.pos,t.marks[n]);return new em(this.pos,this.mark)}}return new eg(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new em(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new em(t.pos,e.markFromJSON(t.mark))}}ep.jsonID("addNodeMark",em);class eg extends ep{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return ed.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return ed.fromReplace(e,this.pos,this.pos+1,new g(p.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new em(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new eg(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new eg(t.pos,e.markFromJSON(t.mark))}}ep.jsonID("removeNodeMark",eg);class ev extends ep{constructor(e,t,n,i=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=i}apply(e){return this.structure&&ey(e,this.from,this.to)?ed.fail("Structure replace would overwrite content"):ed.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ea([this.from,this.to-this.from,this.slice.size])}invert(e){return new ev(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new ev(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof ev)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?g.empty:new g(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ev(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?g.empty:new g(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ev(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw RangeError("Invalid input for ReplaceStep.fromJSON");return new ev(t.from,t.to,g.fromJSON(e,t.slice),!!t.structure)}}ep.jsonID("replace",ev);class ex extends ep{constructor(e,t,n,i,o,r,s=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=i,this.slice=o,this.insert=r,this.structure=s}apply(e){if(this.structure&&(ey(e,this.from,this.gapFrom)||ey(e,this.gapTo,this.to)))return ed.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return ed.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?ed.fromReplace(e,this.from,this.to,n):ed.fail("Content does not fit in gap")}getMap(){return new ea([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ex(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),i=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||i<t.pos||o>n.pos?null:new ex(t.pos,n.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ex(t.from,t.to,t.gapFrom,t.gapTo,g.fromJSON(e,t.slice),t.insert,!!t.structure)}}function ey(e,t,n){let i=e.resolve(t),o=n-t,r=i.depth;for(;o>0&&r>0&&i.indexAfter(r)==i.node(r).childCount;)r--,o--;if(o>0){let e=i.node(r).maybeChild(i.indexAfter(r));for(;o>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,o--}}return!1}function eb(e,t,n,i=n.contentMatch,o=!0){let r=e.doc.nodeAt(t),s=[],a=t+1;for(let t=0;t<r.childCount;t++){let l=r.child(t),c=a+l.nodeSize,d=i.matchType(l.type);if(d){i=d;for(let t=0;t<l.marks.length;t++)n.allowsMarkType(l.marks[t].type)||e.step(new ef(a,c,l.marks[t]));if(o&&l.isText&&"pre"!=n.whitespace){let e,t=/\r?\n|\r/g,i;for(;e=t.exec(l.text);)i||(i=new g(p.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new ev(a+e.index,a+e.index+e[0].length,i))}}else s.push(new ev(a,c,g.empty));a=c}if(!i.validEnd){let t=i.fillBefore(p.empty,!0);e.replace(a,a,new g(t,0,0))}for(let t=s.length-1;t>=0;t--)e.step(s[t])}function ew(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth,i=0,o=0;;--n){let r=e.$from.node(n),s=e.$from.index(n)+i,a=e.$to.indexAfter(n)-o;if(n<e.depth&&r.canReplace(s,a,t))return n;if(0==n||r.type.spec.isolating||!((0==s||r.canReplace(s,r.childCount))&&(a==r.childCount||r.canReplace(0,a))))break;s&&(i=1),a<r.childCount&&(o=1)}return null}function ek(e,t,n=null,i=e){let o=function(e,t){let{parent:n,startIndex:i,endIndex:o}=e,r=n.contentMatchAt(i).findWrapping(t);if(!r)return null;let s=r.length?r[0]:t;return n.canReplaceWith(i,o,s)?r:null}(e,t),r=o&&function(e,t){let{parent:n,startIndex:i,endIndex:o}=e,r=n.child(i),s=t.contentMatch.findWrapping(r.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let e=i;a&&e<o;e++)a=a.matchType(n.child(e).type);return a&&a.validEnd?s:null}(i,t);return r?o.map(eS).concat({type:t,attrs:n}).concat(r.map(eS)):null}function eS(e){return{type:e,attrs:null}}function eC(e,t,n,i){t.forEach((o,r)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let o=e.mapping.slice(i).map(n+1+r+s.index);e.replaceWith(o,o+1,t.type.schema.linebreakReplacement.create())}}})}function eM(e,t,n,i){t.forEach((o,r)=>{if(o.type==o.type.schema.linebreakReplacement){let o=e.mapping.slice(i).map(n+1+r);e.replaceWith(o,o+1,t.type.schema.text("\n"))}})}function eO(e,t,n=1,i){let o=e.resolve(t),r=o.depth-n,s=i&&i[i.length-1]||o.parent;if(r<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let e=o.depth-1,t=n-2;e>r;e--,t--){let n=o.node(e),r=o.index(e);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(r,n.childCount),a=i&&i[t+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=i&&i[t]||n;if(!n.canReplace(r+1,n.childCount)||!l.type.validContent(s))return!1}let a=o.indexAfter(r),l=i&&i[0];return o.node(r).canReplaceWith(a,a,l?l.type:o.node(r+1).type)}function eN(e,t){let n=e.resolve(t),i=n.index();return eT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function eT(e,t){return!!(e&&t&&!e.isLeaf&&function(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:i}=e.type.schema;for(let o=0;o<t.childCount;o++){let r=t.child(o),s=r.type==i?e.type.schema.nodes.text:r.type;if(!(n=n.matchType(s))||!e.type.allowsMarks(r.marks))return!1}return n.validEnd}(e,t))}function eE(e,t,n=-1){let i=e.resolve(t);for(let e=i.depth;;e--){let o,r,s=i.index(e);if(e==i.depth?(o=i.nodeBefore,r=i.nodeAfter):n>0?(o=i.node(e+1),s++,r=i.node(e).maybeChild(s)):(o=i.node(e).maybeChild(s-1),r=i.node(e+1)),o&&!o.isTextblock&&eT(o,r)&&i.node(e).canReplace(s,s+1))return t;if(0==e)break;t=n<0?i.before(e):i.after(e)}}function eA(e,t,n){let i=e.resolve(t);if(!n.content.size)return t;let o=n.content;for(let e=0;e<n.openStart;e++)o=o.firstChild.content;for(let e=1;e<=(0==n.openStart&&n.size?2:1);e++)for(let t=i.depth;t>=0;t--){let n=t==i.depth?0:i.pos<=(i.start(t+1)+i.end(t+1))/2?-1:1,r=i.index(t)+(n>0?1:0),s=i.node(t),a=!1;if(1==e)a=s.canReplace(r,r,o);else{let e=s.contentMatchAt(r).findWrapping(o.firstChild.type);a=e&&s.canReplaceWith(r,r,e[0])}if(a)return 0==n?i.pos:n<0?i.before(t+1):i.after(t+1)}return null}function ej(e,t,n=t,i=g.empty){if(t==n&&!i.size)return null;let o=e.resolve(t),r=e.resolve(n);return eD(o,r,i)?new ev(t,n,i):new eR(o,r,i).fit()}function eD(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}ep.jsonID("replaceAround",ex);class eR{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=p.empty;for(let t=0;t<=e.depth;t++){let n=e.node(t);this.frontier.push({type:n.type,match:n.contentMatchAt(e.indexAfter(t))})}for(let t=e.depth;t>0;t--)this.placed=p.from(e.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(e<0?this.$to:n.doc.resolve(e));if(!i)return null;let o=this.placed,r=n.depth,s=i.depth;for(;r&&s&&1==o.childCount;)o=o.firstChild.content,r--,s--;let a=new g(o,r,s);return e>-1?new ex(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new ev(n.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<e;n++){let o=t.firstChild;if(t.childCount>1&&(i=0),o.type.spec.isolating&&i<=n){e=n;break}t=o.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e=null,i=(n?(e=ez(this.unplaced.content,n-1).firstChild).content:this.unplaced.content).firstChild;for(let o=this.depth;o>=0;o--){let{type:r,match:s}=this.frontier[o],a,l=null;if(1==t&&(i?s.matchType(i.type)||(l=s.fillBefore(p.from(i),!1)):e&&r.compatibleContent(e.type)))return{sliceDepth:n,frontierDepth:o,parent:e,inject:l};if(2==t&&i&&(a=s.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:o,parent:e,wrap:a};if(e&&s.matchType(e.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=ez(e,t);return!!i.childCount&&!i.firstChild.isLeaf&&(this.unplaced=new g(e,t+1,Math.max(n,i.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,i=ez(e,t);if(i.childCount<=1&&t>0){let o=e.size-t<=t+i.size;this.unplaced=new g(eI(e,t-1,1),t-1,o?t-1:n)}else this.unplaced=new g(eI(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:i,wrap:o}){for(;this.depth>t;)this.closeFrontierNode();if(o)for(let e=0;e<o.length;e++)this.openFrontierNode(o[e]);let r=this.unplaced,s=n?n.content:r.content,a=r.openStart-e,l=0,c=[],{match:d,type:h}=this.frontier[t];if(i){for(let e=0;e<i.childCount;e++)c.push(i.child(e));d=d.matchFragment(i)}let u=s.size+e-(r.content.size-r.openEnd);for(;l<s.childCount;){let e=s.child(l),t=d.matchType(e.type);if(!t)break;(++l>1||0==a||e.content.size)&&(d=t,c.push(function e(t,n,i){if(n<=0)return t;let o=t.content;return n>1&&(o=o.replaceChild(0,e(o.firstChild,n-1,1==o.childCount?i-1:0))),n>0&&(o=t.type.contentMatch.fillBefore(o).append(o),i<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(p.empty,!0)))),t.copy(o)}(e.mark(h.allowedMarks(e.marks)),1==l?a:0,l==s.childCount?u:-1)))}let f=l==s.childCount;f||(u=-1),this.placed=eP(this.placed,t,p.from(c)),this.frontier[t].match=d,f&&u<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let e=0,t=s;e<u;e++){let e=t.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),t=e.content}this.unplaced=f?0==e?g.empty:new g(eI(r.content,e-1,1),e-1,u<0?r.openEnd:e-1):new g(eI(r.content,e,l),r.openStart,r.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return -1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!eL(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return -1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(e){t:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:i}=this.frontier[t],o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),r=eL(e,t,i,n,o);if(r){for(let n=t-1;n>=0;n--){let{match:t,type:i}=this.frontier[n],o=eL(e,n,i,t,!0);if(!o||o.childCount)continue t}return{depth:t,fit:r,move:o?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=eP(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),i=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,i)}return e}openFrontierNode(e,t=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=eP(this.placed,this.depth,p.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(p.empty,!0);e.childCount&&(this.placed=eP(this.placed,this.frontier.length,e))}}function eI(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(eI(e.firstChild.content,t-1,n)))}function eP(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(eP(e.lastChild.content,t-1,n)))}function ez(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function eL(e,t,n,i,o){let r=e.node(t),s=o?e.indexAfter(t):e.index(t);if(s==r.childCount&&!n.compatibleContent(r.type))return null;let a=i.fillBefore(r.content,!0,s);return a&&!function(e,t,n){for(let i=n;i<t.childCount;i++)if(!e.allowsMarks(t.child(i).marks))return!0;return!1}(n,r.content,s)?a:null}function eB(e,t){let n=[],i=Math.min(e.depth,t.depth);for(let o=i;o>=0;o--){let i=e.start(o);if(i<e.pos-(e.depth-o)||t.end(o)>t.pos+(t.depth-o)||e.node(o).type.spec.isolating||t.node(o).type.spec.isolating)break;(i==t.start(o)||o==e.depth&&o==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&o&&t.start(o-1)==i-1)&&n.push(o)}return n}class eF extends ep{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return ed.fail("No node at attribute step's position");let n=Object.create(null);for(let e in t.attrs)n[e]=t.attrs[e];n[this.attr]=this.value;let i=t.type.create(n,null,t.marks);return ed.fromReplace(e,this.pos,this.pos+1,new g(p.from(i),0,t.isLeaf?0:1))}getMap(){return ea.empty}invert(e){return new eF(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new eF(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw RangeError("Invalid input for AttrStep.fromJSON");return new eF(t.pos,t.attr,t.value)}}ep.jsonID("attr",eF);class e$ extends ep{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let n in e.attrs)t[n]=e.attrs[n];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return ed.ok(n)}getMap(){return ea.empty}invert(e){return new e$(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw RangeError("Invalid input for DocAttrStep.fromJSON");return new e$(t.attr,t.value)}}ep.jsonID("docAttr",e$);let eV=class extends Error{};(eV=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n}).prototype=Object.create(Error.prototype),eV.prototype.constructor=eV,eV.prototype.name="TransformError";class eH{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new el}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new eV(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,t=-1e9;for(let n=0;n<this.mapping.maps.length;n++){let i=this.mapping.maps[n];n&&(e=i.map(e,1),t=i.map(t,-1)),i.forEach((n,i,o,r)=>{e=Math.min(e,o),t=Math.max(t,r)})}return 1e9==e?null:{from:e,to:t}}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=g.empty){let i=ej(this.doc,e,t,n);return i&&this.step(i),this}replaceWith(e,t,n){return this.replace(e,t,new g(p.from(n),0,0))}delete(e,t){return this.replace(e,t,g.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,i){if(!i.size)return e.deleteRange(t,n);let o=e.doc.resolve(t),r=e.doc.resolve(n);if(eD(o,r,i))return e.step(new ev(t,n,i));let s=eB(o,r);0==s[s.length-1]&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let e=o.depth,t=o.pos-1;e>0;e--,t--){let n=o.node(e).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(e)>-1?a=e:o.before(e)==t&&s.splice(1,0,-e)}let l=s.indexOf(a),c=[],d=i.openStart;for(let e=i.content,t=0;;t++){let n=e.firstChild;if(c.push(n),t==i.openStart)break;e=n.content}for(let e=d-1;e>=0;e--){var h;let t=c[e],n=(h=t.type).spec.defining||h.spec.definingForContent;if(n&&!t.sameMarkup(o.node(Math.abs(a)-1)))d=e;else if(n||!t.type.isTextblock)break}for(let t=i.openStart;t>=0;t--){let a=(t+d+1)%(i.openStart+1),h=c[a];if(h)for(let t=0;t<s.length;t++){let c=s[(t+l)%s.length],d=!0;c<0&&(d=!1,c=-c);let u=o.node(c-1),f=o.index(c-1);if(u.canReplaceWith(f,f,h.type,h.marks))return e.replace(o.before(c),d?r.after(c):n,new g(function e(t,n,i,o,r){if(n<i){let r=t.firstChild;t=t.replaceChild(0,r.copy(e(r.content,n+1,i,o,r)))}if(n>o){let e=r.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(p.empty,!0))}return t}(i.content,0,i.openStart,a),a,i.openEnd))}}let u=e.steps.length;for(let a=s.length-1;a>=0&&(e.replace(t,n,i),!(e.steps.length>u));a--){let e=s[a];e<0||(t=o.before(e),n=r.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,i){if(!i.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let o=function(e,t,n){let i=e.resolve(t);if(i.parent.canReplaceWith(i.index(),i.index(),n))return t;if(0==i.parentOffset)for(let e=i.depth-1;e>=0;e--){let t=i.index(e);if(i.node(e).canReplaceWith(t,t,n))return i.before(e+1);if(t>0)return null}if(i.parentOffset==i.parent.content.size)for(let e=i.depth-1;e>=0;e--){let t=i.indexAfter(e);if(i.node(e).canReplaceWith(t,t,n))return i.after(e+1);if(t<i.node(e).childCount)break}return null}(e.doc,t,i.type);null!=o&&(t=n=o)}e.replaceRange(t,n,new g(p.from(i),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let i=e.doc.resolve(t),o=e.doc.resolve(n),r=eB(i,o);for(let t=0;t<r.length;t++){let n=r[t],s=t==r.length-1;if(s&&0==n||i.node(n).type.contentMatch.validEnd)return e.delete(i.start(n),o.end(n));if(n>0&&(s||i.node(n-1).canReplace(i.index(n-1),o.indexAfter(n-1))))return e.delete(i.before(n),o.after(n))}for(let r=1;r<=i.depth&&r<=o.depth;r++)if(t-i.start(r)==i.depth-r&&n>i.end(r)&&o.end(r)-n!=o.depth-r&&i.start(r-1)==o.start(r-1)&&i.node(r-1).canReplace(i.index(r-1),o.index(r-1)))return e.delete(i.before(r),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:i,$to:o,depth:r}=t,s=i.before(r+1),a=o.after(r+1),l=s,c=a,d=p.empty,h=0;for(let e=r,t=!1;e>n;e--)t||i.index(e)>0?(t=!0,d=p.from(i.node(e).copy(d)),h++):l--;let u=p.empty,f=0;for(let e=r,t=!1;e>n;e--)t||o.after(e+1)<o.end(e)?(t=!0,u=p.from(o.node(e).copy(u)),f++):c++;e.step(new ex(l,c,s,a,new g(d.append(u),h,f),d.size-h,!0))}(this,e,t),this}join(e,t=1){return function(e,t,n){let i=null,{linebreakReplacement:o}=e.doc.type.schema,r=e.doc.resolve(t-n),s=r.node().type;if(o&&s.inlineContent){let e="pre"==s.whitespace,t=!!s.contentMatch.matchType(o);e&&!t?i=!1:!e&&t&&(i=!0)}let a=e.steps.length;if(!1===i){let i=e.doc.resolve(t+n);eM(e,i.node(),i.before(),a)}s.inlineContent&&eb(e,t+n-1,s,r.node().contentMatchAt(r.index()),null==i);let l=e.mapping.slice(a),c=l.map(t-n);if(e.step(new ev(c,l.map(t+n,-1),g.empty,!0)),!0===i){let t=e.doc.resolve(c);eC(e,t.node(),t.before(),e.steps.length)}}(this,e,t),this}wrap(e,t){return function(e,t,n){let i=p.empty;for(let e=n.length-1;e>=0;e--){if(i.size){let t=n[e].type.contentMatch.matchFragment(i);if(!t||!t.validEnd)throw RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=p.from(n[e].type.create(n[e].attrs,i))}let o=t.start,r=t.end;e.step(new ex(o,r,o,r,new g(i,0,0),n.length,!0))}(this,e,t),this}setBlockType(e,t=e,n,i=null){return function(e,t,n,i,o){if(!i.isTextblock)throw RangeError("Type given to setBlockType should be a textblock");let r=e.steps.length;e.doc.nodesBetween(t,n,(t,n)=>{var s,a;let l,c,d="function"==typeof o?o(t):o;if(t.isTextblock&&!t.hasMarkup(i,d)&&(s=e.doc,a=e.mapping.slice(r).map(n),c=(l=s.resolve(a)).index(),l.parent.canReplaceWith(c,c+1,i))){let o=null;if(i.schema.linebreakReplacement){let e="pre"==i.whitespace,t=!!i.contentMatch.matchType(i.schema.linebreakReplacement);e&&!t?o=!1:!e&&t&&(o=!0)}!1===o&&eM(e,t,n,r),eb(e,e.mapping.slice(r).map(n,1),i,void 0,null===o);let s=e.mapping.slice(r),a=s.map(n,1),l=s.map(n+t.nodeSize,1);return e.step(new ex(a,l,a+1,l-1,new g(p.from(i.create(d,null,t.marks)),0,0),1,!0)),!0===o&&eC(e,t,n,r),!1}})}(this,e,t,n,i),this}setNodeMarkup(e,t,n=null,i){return function(e,t,n,i,o){let r=e.doc.nodeAt(t);if(!r)throw RangeError("No node at given position");n||(n=r.type);let s=n.create(i,null,o||r.marks);if(r.isLeaf)return e.replaceWith(t,t+r.nodeSize,s);if(!n.validContent(r.content))throw RangeError("Invalid content for node type "+n.name);e.step(new ex(t,t+r.nodeSize,t+1,t+r.nodeSize-1,new g(p.from(s),0,0),1,!0))}(this,e,t,n,i),this}setNodeAttribute(e,t,n){return this.step(new eF(e,t,n)),this}setDocAttribute(e,t){return this.step(new e$(e,t)),this}addNodeMark(e,t){return this.step(new em(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw RangeError("No node at position "+e);if(t instanceof f)t.isInSet(n.marks)&&this.step(new eg(e,t));else{let i=n.marks,o,r=[];for(;o=t.isInSet(i);)r.push(new eg(e,o)),i=o.removeFromSet(i);for(let e=r.length-1;e>=0;e--)this.step(r[e])}return this}split(e,t=1,n){return function(e,t,n=1,i){let o=e.doc.resolve(t),r=p.empty,s=p.empty;for(let e=o.depth,t=o.depth-n,a=n-1;e>t;e--,a--){r=p.from(o.node(e).copy(r));let t=i&&i[a];s=p.from(t?t.type.create(t.attrs,s):o.node(e).copy(s))}e.step(new ev(t,t,new g(r.append(s),n,n),!0))}(this,e,t,n),this}addMark(e,t,n){var i;let o,r,s,a;return i=this,s=[],a=[],i.doc.nodesBetween(e,t,(i,l,c)=>{if(!i.isInline)return;let p=i.marks;if(!n.isInSet(p)&&c.type.allowsMarkType(n.type)){let c=Math.max(l,e),d=Math.min(l+i.nodeSize,t),h=n.addToSet(p);for(let e=0;e<p.length;e++)p[e].isInSet(h)||(o&&o.to==c&&o.mark.eq(p[e])?o.to=d:s.push(o=new ef(c,d,p[e])));r&&r.to==c?r.to=d:a.push(r=new eu(c,d,n))}}),s.forEach(e=>i.step(e)),a.forEach(e=>i.step(e)),this}removeMark(e,t,n){var i;let o,r;return i=this,o=[],r=0,i.doc.nodesBetween(e,t,(i,s)=>{if(!i.isInline)return;r++;let a=null;if(n instanceof _){let e=i.marks,t;for(;t=n.isInSet(e);)(a||(a=[])).push(t),e=t.removeFromSet(e)}else n?n.isInSet(i.marks)&&(a=[n]):a=i.marks;if(a&&a.length){let n=Math.min(s+i.nodeSize,t);for(let t=0;t<a.length;t++){let i=a[t],l;for(let e=0;e<o.length;e++){let t=o[e];t.step==r-1&&i.eq(o[e].style)&&(l=t)}l?(l.to=n,l.step=r):o.push({style:i,from:Math.max(s,e),to:n,step:r})}}}),o.forEach(e=>i.step(new ef(e.from,e.to,e.style))),this}clearIncompatible(e,t,n){return eb(this,e,t,n),this}}let e_=Object.create(null);class eq{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new eW(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=g.empty){let n=t.content.lastChild,i=null;for(let e=0;e<t.openEnd;e++)i=n,n=n.lastChild;let o=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:a,$to:l}=r[s],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(l.pos),s?g.empty:t),0==s&&e1(e,o,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:r,$to:s}=i[o],a=e.mapping.slice(n),l=a.map(r.pos),c=a.map(s.pos);o?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),e1(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let i=e.parent.inlineContent?new eJ(e):e0(e.node(0),e.parent,e.pos,e.index(),t,n);if(i)return i;for(let i=e.depth-1;i>=0;i--){let o=t<0?e0(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):e0(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new eX(e.node(0))}static atStart(e){return e0(e,e,0,0,1)||new eX(e)}static atEnd(e){return e0(e,e,e.content.size,e.childCount,-1)||new eX(e)}static fromJSON(e,t){if(!t||!t.type)throw RangeError("Invalid input for Selection.fromJSON");let n=e_[t.type];if(!n)throw RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in e_)throw RangeError("Duplicate use of selection JSON ID "+e);return e_[e]=t,t.prototype.jsonID=e,t}getBookmark(){return eJ.between(this.$anchor,this.$head).getBookmark()}}eq.prototype.visible=!0;class eW{constructor(e,t){this.$from=e,this.$to=t}}let eK=!1;function eU(e){eK||e.parent.inlineContent||(eK=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class eJ extends eq{constructor(e,t=e){eU(e),eU(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return eq.near(n);let i=e.resolve(t.map(this.anchor));return new eJ(i.parent.inlineContent?i:n,n)}replace(e,t=g.empty){if(super.replace(e,t),t==g.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof eJ&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new eG(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw RangeError("Invalid input for TextSelection.fromJSON");return new eJ(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let i=e.resolve(t);return new this(i,n==t?i:e.resolve(n))}static between(e,t,n){let i=e.pos-t.pos;if((!n||i)&&(n=i>=0?1:-1),!t.parent.inlineContent){let e=eq.findFrom(t,n,!0)||eq.findFrom(t,-n,!0);if(!e)return eq.near(t,n);t=e.$head}return e.parent.inlineContent||(0==i?e=t:(e=(eq.findFrom(e,-n,!0)||eq.findFrom(e,n,!0)).$anchor).pos<t.pos==i<0||(e=t)),new eJ(e,t)}}eq.jsonID("text",eJ);class eG{constructor(e,t){this.anchor=e,this.head=t}map(e){return new eG(e.map(this.anchor),e.map(this.head))}resolve(e){return eJ.between(e.resolve(this.anchor),e.resolve(this.head))}}class eY extends eq{constructor(e){let t=e.nodeAfter;super(e,e.node(0).resolve(e.pos+t.nodeSize)),this.node=t}map(e,t){let{deleted:n,pos:i}=t.mapResult(this.anchor),o=e.resolve(i);return n?eq.near(o):new eY(o)}content(){return new g(p.from(this.node),0,0)}eq(e){return e instanceof eY&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new eQ(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw RangeError("Invalid input for NodeSelection.fromJSON");return new eY(e.resolve(t.anchor))}static create(e,t){return new eY(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}eY.prototype.visible=!1,eq.jsonID("node",eY);class eQ{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new eG(n,n):new eQ(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&eY.isSelectable(n)?new eY(t):eq.near(t)}}class eX extends eq{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=g.empty){if(t==g.empty){e.delete(0,e.doc.content.size);let t=eq.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new eX(e)}map(e){return new eX(e)}eq(e){return e instanceof eX}getBookmark(){return eZ}}eq.jsonID("all",eX);let eZ={map(){return this},resolve:e=>new eX(e)};function e0(e,t,n,i,o,r=!1){if(t.inlineContent)return eJ.create(e,n);for(let s=i-(o>0?0:1);o>0?s<t.childCount:s>=0;s+=o){let i=t.child(s);if(i.isAtom){if(!r&&eY.isSelectable(i))return eY.create(e,n-(o<0?i.nodeSize:0))}else{let t=e0(e,i,n+o,o<0?i.childCount:0,o,r);if(t)return t}n+=i.nodeSize*o}return null}function e1(e,t,n){let i,o=e.steps.length-1;if(o<t)return;let r=e.steps[o];(r instanceof ev||r instanceof ex)&&(e.mapping.maps[o].forEach((e,t,n,o)=>{null==i&&(i=o)}),e.setSelection(eq.near(e.doc.resolve(i),n)))}class e2 extends eH{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(1|this.updated)&-3,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return f.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||f.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let i=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),!e)return this.deleteRange(t,n);let o=this.storedMarks;if(!o){let e=this.doc.resolve(t);o=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,i.text(e,o)),this.selection.empty||this.selection.to!=t+e.length||this.setSelection(eq.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function e3(e,t){return t&&e?e.bind(t):e}class e4{constructor(e,t,n){this.name=e,this.init=e3(t.init,n),this.apply=e3(t.apply,n)}}let e5=[new e4("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new e4("selection",{init:(e,t)=>e.selection||eq.atStart(t.doc),apply:e=>e.selection}),new e4("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,i)=>i.selection.$cursor?e.storedMarks:null}),new e4("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class e6{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=e5.slice(),t&&t.forEach(e=>{if(this.pluginsByKey[e.key])throw RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new e4(e.key,e.spec.state,e))})}}class e8{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),i=null;for(;;){let o=!1;for(let r=0;r<this.config.plugins.length;r++){let s=this.config.plugins[r];if(s.spec.appendTransaction){let a=i?i[r].n:0,l=i?i[r].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,r)){if(c.setMeta("appendedTransaction",e),!i){i=[];for(let e=0;e<this.config.plugins.length;e++)i.push(e<r?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),o=!0}i&&(i[r]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw RangeError("Applying a mismatched transaction");let t=new e8(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let o=n[i];t[o.name]=o.apply(e,this[o.name],this,t)}return t}get tr(){return new e2(this)}static create(e){let t=new e6(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new e8(t);for(let i=0;i<t.fields.length;i++)n[t.fields[i].name]=t.fields[i].init(e,n);return n}reconfigure(e){let t=new e6(this.schema,e.plugins),n=t.fields,i=new e8(t);for(let t=0;t<n.length;t++){let o=n[t].name;i[o]=this.hasOwnProperty(o)?this[o]:n[t].init(e,i)}return i}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(e=>e.toJSON())),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[n],o=i.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(i,this[i.key]))}return t}static fromJSON(e,t,n){if(!t)throw RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw RangeError("Required config field 'schema' missing");let i=new e6(e.schema,e.plugins),o=new e8(i);return i.fields.forEach(i=>{if("doc"==i.name)o.doc=E.fromJSON(e.schema,t.doc);else if("selection"==i.name)o.selection=eq.fromJSON(o.doc,t.selection);else if("storedMarks"==i.name)t.storedMarks&&(o.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let r in n){let s=n[r],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,r)){o[i.name]=a.fromJSON.call(s,e,t[r],o);return}}o[i.name]=i.init(e,o)}}),o}}class e7{constructor(e){this.spec=e,this.props={},e.props&&function e(t,n,i){for(let o in t){let r=t[o];r instanceof Function?r=r.bind(n):"handleDOMEvents"==o&&(r=e(r,n,{})),i[o]=r}return i}(e.props,this,this.props),this.key=e.key?e.key.key:te("plugin")}getState(e){return e[this.key]}}let e9=Object.create(null);function te(e){return e in e9?e+"$"+ ++e9[e]:(e9[e]=0,e+"$")}class tt{constructor(e="key"){this.key=te(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}let tn=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},ti=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t},to=null,tr=function(e,t,n){let i=to||(to=document.createRange());return i.setEnd(e,null==n?e.nodeValue.length:n),i.setStart(e,t||0),i},ts=function(){to=null},ta=function(e,t,n,i){return n&&(tc(e,t,n,i,-1)||tc(e,t,n,i,1))},tl=/^(img|br|input|textarea|hr)$/i;function tc(e,t,n,i,o){for(var r;;){if(e==n&&t==i)return!0;if(t==(o<0?0:tp(e))){let n=e.parentNode;if(!n||1!=n.nodeType||td(e)||tl.test(e.nodeName)||"false"==e.contentEditable)return!1;t=tn(e)+(o<0?0:1),e=n}else{if(1!=e.nodeType)return!1;let n=e.childNodes[t+(o<0?-1:0)];if(1==n.nodeType&&"false"==n.contentEditable){if(null===(r=n.pmViewDesc)||void 0===r||!r.ignoreForSelection)return!1;t+=o}else e=n,t=o<0?tp(e):0}}}function tp(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function td(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}let th=function(e){return e.focusNode&&ta(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function tu(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}let tf="undefined"!=typeof navigator?navigator:null,tm="undefined"!=typeof document?document:null,tg=tf&&tf.userAgent||"",tv=/Edge\/(\d+)/.exec(tg),tx=/MSIE \d/.exec(tg),ty=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tg),tb=!!(tx||ty||tv),tw=tx?document.documentMode:ty?+ty[1]:tv?+tv[1]:0,tk=!tb&&/gecko\/(\d+)/i.test(tg);tk&&(/Firefox\/(\d+)/.exec(tg)||[0,0])[1];let tS=!tb&&/Chrome\/(\d+)/.exec(tg),tC=!!tS,tM=tS?+tS[1]:0,tO=!tb&&!!tf&&/Apple Computer/.test(tf.vendor),tN=tO&&(/Mobile\/\w+/.test(tg)||!!tf&&tf.maxTouchPoints>2),tT=tN||!!tf&&/Mac/.test(tf.platform),tE=!!tf&&/Win/.test(tf.platform),tA=/Android \d/.test(tg),tj=!!tm&&"webkitFontSmoothing"in tm.documentElement.style,tD=tj?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function tR(e,t){return"number"==typeof e?e:e[t]}function tI(e,t,n){let i=e.someProp("scrollThreshold")||0,o=e.someProp("scrollMargin")||5,r=e.dom.ownerDocument;for(let s=n||e.dom;s;){if(1!=s.nodeType){s=ti(s);continue}let e=s,n=e==r.body,a=n?function(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}(r):function(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*i}}(e),l=0,c=0;if(t.top<a.top+tR(i,"top")?c=-(a.top-t.top+tR(o,"top")):t.bottom>a.bottom-tR(i,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+tR(o,"top")-a.top:t.bottom-a.bottom+tR(o,"bottom")),t.left<a.left+tR(i,"left")?l=-(a.left-t.left+tR(o,"left")):t.right>a.right-tR(i,"right")&&(l=t.right-a.right+tR(o,"right")),l||c){if(n)r.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,i=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let o=e.scrollLeft-n,r=e.scrollTop-i;t={left:t.left-o,top:t.top-r,right:t.right-o,bottom:t.bottom-r}}}let p=n?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(p))break;s="absolute"==p?s.offsetParent:ti(s)}}function tP(e){let t=[],n=e.ownerDocument;for(let i=e;i&&(t.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),e!=n);i=ti(i));return t}function tz(e,t){for(let n=0;n<e.length;n++){let{dom:i,top:o,left:r}=e[n];i.scrollTop!=o+t&&(i.scrollTop=o+t),i.scrollLeft!=r&&(i.scrollLeft=r)}}let tL=null;function tB(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function tF(e){return e.top<e.bottom||e.left<e.right}function t$(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(tF(e))return e}return Array.prototype.find.call(n,tF)||e.getBoundingClientRect()}let tV=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function tH(e,t,n){let{node:i,offset:o,atom:r}=e.docView.domFromPos(t,n<0?-1:1),s=tj||tk;if(3==i.nodeType){if(s&&(tV.test(i.nodeValue)||(n<0?!o:o==i.nodeValue.length))){let e=t$(tr(i,o,o),n);if(tk&&o&&/\s/.test(i.nodeValue[o-1])&&o<i.nodeValue.length){let t=t$(tr(i,o-1,o-1),-1);if(t.top==e.top){let n=t$(tr(i,o,o+1),-1);if(n.top!=e.top)return t_(n,n.left<t.left)}}return e}{let e=o,t=o,r=n<0?1:-1;return n<0&&!o?(t++,r=-1):n>=0&&o==i.nodeValue.length?(e--,r=1):n<0?e--:t++,t_(t$(tr(i,e,t),r),r<0)}}if(!e.state.doc.resolve(t-(r||0)).parent.inlineContent){if(null==r&&o&&(n<0||o==tp(i))){let e=i.childNodes[o-1];if(1==e.nodeType)return tq(e.getBoundingClientRect(),!1)}if(null==r&&o<tp(i)){let e=i.childNodes[o];if(1==e.nodeType)return tq(e.getBoundingClientRect(),!0)}return tq(i.getBoundingClientRect(),n>=0)}if(null==r&&o&&(n<0||o==tp(i))){let e=i.childNodes[o-1],t=3==e.nodeType?tr(e,tp(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return t_(t$(t,1),!1)}if(null==r&&o<tp(i)){let e=i.childNodes[o];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?tr(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return t_(t$(t,-1),!0)}return t_(t$(3==i.nodeType?tr(i):i,-n),n>=0)}function t_(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function tq(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function tW(e,t,n){let i=e.state,o=e.root.activeElement;i!=t&&e.updateState(t),o!=e.dom&&e.focus();try{return n()}finally{i!=t&&e.updateState(i),o!=e.dom&&o&&o.focus()}}let tK=/[\u0590-\u08ac]/,tU=null,tJ=null,tG=!1;class tY{constructor(e,t,n,i){this.parent=e,this.children=t,this.dom=n,this.contentDOM=i,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let i=this.children[t];if(i==e)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){let i;if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,i;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&!((i=n.pmViewDesc)&&i.parent==this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}{let n,i;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&!((i=n.pmViewDesc)&&i.parent==this);)n=n.nextSibling;return n?this.posBeforeChild(i):this.posAtEnd}}if(e==this.dom&&this.contentDOM)i=t>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!1;break}if(t.previousSibling)break}if(null==i&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){i=!0;break}if(t.nextSibling)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,i=e;i;i=i.parentNode){let o=this.getDesc(i),r;if(o&&(!t||o.node)){if(!n||!(r=o.nodeDOM)||(1==r.nodeType?r.contains(1==e.nodeType?e:e.parentNode):r==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let e=t;e;e=e.parent)if(e==this)return t}posFromDOM(e,t,n){for(let i=e;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(e,t,n)}return -1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let i=this.children[t],o=n+i.size;if(n==e&&o!=n){for(;!i.border&&i.children.length;)for(let e=0;e<i.children.length;e++){let t=i.children[e];if(t.size){i=t;break}}return i}if(e<o)return i.descAt(e-n-i.border);n=o}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,i=0;for(let t=0;n<this.children.length;n++){let o=this.children[n],r=t+o.size;if(r>e||o instanceof t3){i=e-t;break}t=r}if(i)return this.children[n].domFromPos(i-this.children[n].border,t);for(let e;n&&!(e=this.children[n-1]).size&&e instanceof tQ&&e.side>=0;n--);if(t<=0){let e,i=!0;for(;(e=n?this.children[n-1]:null)&&e.dom.parentNode!=this.contentDOM;n--,i=!1);return e&&t&&i&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?tn(e.dom)+1:0}}{let e,i=!0;for(;(e=n<this.children.length?this.children[n]:null)&&e.dom.parentNode!=this.contentDOM;n++,i=!1);return e&&i&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?tn(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let r=n,s=0;;s++){let n=this.children[s],a=r+n.size;if(-1==i&&e<=a){let o=r+n.border;if(e>=o&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,o);e=r;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){i=tn(n.dom)+1;break}e-=n.size}-1==i&&(i=0)}if(i>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){o=tn(n.dom);break}t+=n.size}-1==o&&(o=this.contentDOM.childNodes.length);break}r=a}return{node:this.contentDOM,from:e,to:t,fromOffset:i,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,i=!1){let o=Math.min(e,t),r=Math.max(e,t);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(o>a&&r<c)return l.setSelection(e-a-l.border,t-a-l.border,n,i);a=c}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.root.getSelection(),c=n.domSelectionRange(),p=!1;if((tk||tO)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if((p=!!(t&&"\n"==e.nodeValue[t-1]))&&t==e.nodeValue.length)for(let t=e,n;t;t=t.parentNode){if(n=t.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:tn(n)+1});break}let e=t.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];p=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(tk&&c.focusNode&&c.focusNode!=a.node&&1==c.focusNode.nodeType){let e=c.focusNode.childNodes[c.focusOffset];e&&"false"==e.contentEditable&&(i=!0)}if(!(i||p&&tO)&&ta(s.node,s.offset,c.anchorNode,c.anchorOffset)&&ta(a.node,a.offset,c.focusNode,c.focusOffset))return;let d=!1;if((l.extend||e==t)&&!(p&&tk)){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),d=!0}catch(e){}}if(!d){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,i=0;i<this.children.length;i++){let o=this.children[i],r=n+o.size;if(n==r?e<=r&&t>=n:e<r&&t>n){let i=n+o.border,s=r-o.border;if(e>=i&&t<=s){this.dirty=e==n||t==r?2:1,e==i&&t==s&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=3:o.markDirty(e-i,t-i);return}o.dirty=o.dom!=o.contentDOM||o.dom.parentNode!=this.contentDOM||o.children.length?3:2}n=r}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class tQ extends tY{constructor(e,t,n,i){let o,r=t.type.toDOM;if("function"==typeof r&&(r=r(n,()=>o?o.parent?o.parent.posBeforeChild(o):void 0:i)),!t.type.spec.raw){if(1!=r.nodeType){let e=document.createElement("span");e.appendChild(r),r=e}r.contentEditable="false",r.classList.add("ProseMirror-widget")}super(e,[],r,null),this.widget=t,this.widget=t,o=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class tX extends tY{constructor(e,t,n,i){super(e,[],t,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class tZ extends tY{constructor(e,t,n,i,o){super(e,[],n,i),this.mark=t,this.spec=o}static create(e,t,n,i){let o=i.nodeViews[t.type.name],r=o&&o(t,i,n);return r&&r.dom||(r=et.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new tZ(e,t,r.dom,r.contentDOM||r.dom,r)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let i=tZ.create(this.parent,this.mark,!0,n),o=this.children,r=this.size;t<r&&(o=no(o,t,r,n)),e>0&&(o=no(o,0,e,n));for(let e=0;e<o.length;e++)o[e].parent=i;return i.children=o,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class t0 extends tY{constructor(e,t,n,i,o,r,s,a,l){super(e,[],o,r),this.node=t,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=s}static create(e,t,n,i,o,r){let s=o.nodeViews[t.type.name],a,l=s&&s(t,o,()=>a?a.parent?a.parent.posBeforeChild(a):void 0:r,n,i),c=l&&l.dom,p=l&&l.contentDOM;if(t.isText){if(c){if(3!=c.nodeType)throw RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text)}else if(!c){let e=et.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:p}=e)}p||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return(c=t9(c,n,t),l)?a=new t4(e,t,n,i,c,p||null,d,l,o,r+1):t.isText?new t2(e,t,n,i,c,d,o):new t0(e,t,n,i,c,p||null,d,o,r+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM){if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>p.empty)}else e.contentElement=this.contentDOM}else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&ne(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,i=t,o=e.composing?this.localCompositionInfo(e,t):null,r=o&&o.pos>-1?o:null,s=o&&o.pos<0,a=new nn(this,r&&r.node,e);(function(e,t,n,i){let o=t.locals(e),r=0;if(0==o.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);i(s,o,t.forChild(r,s),n),r+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let p,d,h,u;for(;s<o.length&&o[s].to==r;){let e=o[s++];e.widget&&(p?(d||(d=[p])).push(e):p=e)}if(p){if(d){d.sort(ni);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(p,c,!!l)}if(l)u=-1,h=l,l=null;else if(c<e.childCount)u=c,h=e.child(c++);else break;for(let e=0;e<a.length;e++)a[e].to<=r&&a.splice(e--,1);for(;s<o.length&&o[s].from<=r&&o[s].to>r;)a.push(o[s++]);let f=r+h.nodeSize;if(h.isText){let e=f;s<o.length&&o[s].from<e&&(e=o[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-r),h=h.cut(0,e-r),f=e,u=-1)}else for(;s<o.length&&o[s].to<f;)s++;let m=h.isInline&&!h.isLeaf?a.filter(e=>!e.inline):a.slice();i(h,m,t.forChild(r,h),u),r=f}})(this.node,this.innerDeco,(t,o,r)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e,o):t.type.side>=0&&!r&&a.syncToMarks(o==this.node.childCount?f.none:this.node.child(o).marks,n,e,o),a.placeWidget(t,e,i)},(t,r,l,c)=>{let p;a.syncToMarks(t.marks,n,e,c),a.findNodeMatch(t,r,l,c)||s&&e.state.selection.from>i&&e.state.selection.to<i+t.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(t,r,l,p,e)||a.updateNextNode(t,r,l,e,c,i)||a.addNode(t,r,l,e,i),i+=t.nodeSize}),a.syncToMarks([],n,e,0),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(r&&this.protectLocalComposition(e,r),function e(t,n,i){let o=t.firstChild,r=!1;for(let s=0;s<n.length;s++){let a=n[s],l=a.dom;if(l.parentNode==t){for(;l!=o;)o=nt(o),r=!0;o=o.nextSibling}else r=!0,t.insertBefore(l,o);if(a instanceof tZ){let n=o?o.previousSibling:t.lastChild;e(a.contentDOM,a.children,i),o=n?n.nextSibling:t.firstChild}}for(;o;)o=nt(o),r=!0;r&&i.trackWrites==t&&(i.trackWrites=null)}(this.contentDOM,this.children,e),tN&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:i}=e.state.selection;if(!(e.state.selection instanceof eJ)||n<t||i>t+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(!this.node.inlineContent)return{node:o,pos:-1,text:""};{let e=o.nodeValue,r=function(e,t,n,i){for(let o=0,r=0;o<e.childCount&&r<=i;){let s=e.child(o++),a=r;if(r+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<e.childCount;){let t=e.child(o++);if(r+=t.nodeSize,!t.isText)break;l+=t.text}if(r>=n){if(r>=i&&l.slice(i-t.length-a,i-a)==t)return i-t.length;let e=a<i?l.lastIndexOf(t,i-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==i&&l.length>=i+t.length-a&&l.slice(i-a,i-a+t.length)==t)return i}}return -1}(this.node.content,e,n-t,i-t);return r<0?null:{node:o,pos:r,text:e}}}protectLocalComposition(e,{node:t,pos:n,text:i}){if(this.getDesc(t))return;let o=t;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let r=new tX(this,o,t,i);e.input.compositionNodes.push(r),this.children=no(this.children,n,n+i.length,e,r)}update(e,t,n,i){return!!(3!=this.dirty&&e.sameMarkup(this.node))&&(this.updateInner(e,t,n,i),!0)}updateInner(e,t,n,i){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(ne(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=t7(this.dom,this.nodeDOM,t8(this.outerDeco,this.node,t),t8(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function t1(e,t,n,i,o){t9(i,t,e);let r=new t0(void 0,e,t,n,i,i,i,o,0);return r.contentDOM&&r.updateChildren(o,0),r}class t2 extends t0{constructor(e,t,n,i,o,r,s){super(e,t,n,i,o,null,r,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,i){return!!(3!=this.dirty&&(0==this.dirty||this.inParent())&&e.sameMarkup(this.node))&&(this.updateOuterDeco(t),(0!=this.dirty||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let i=this.node.cut(e,t),o=document.createTextNode(i.text);return new t2(this.parent,i,this.outerDeco,this.innerDeco,o,o,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(0==e||t==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class t3 extends tY{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class t4 extends t0{constructor(e,t,n,i,o,r,s,a,l,c){super(e,t,n,i,o,r,s,l,c),this.spec=a}update(e,t,n,i){if(3==this.dirty)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,t,n);return o&&this.updateInner(e,t,n,i),o}return(!!this.contentDOM||!!e.isLeaf)&&super.update(e,t,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,i){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}let t5=function(e){e&&(this.nodeName=e)};t5.prototype=Object.create(null);let t6=[new t5];function t8(e,t,n){if(0==e.length)return t6;let i=n?t6[0]:new t5,o=[i];for(let r=0;r<e.length;r++){let s=e[r].type.attrs;if(s)for(let e in s.nodeName&&o.push(i=new t5(s.nodeName)),s){let r=s[e];null!=r&&(n&&1==o.length&&o.push(i=new t5(t.isInline?"span":"div")),"class"==e?i.class=(i.class?i.class+" ":"")+r:"style"==e?i.style=(i.style?i.style+";":"")+r:"nodeName"!=e&&(i[e]=r))}}return o}function t7(e,t,n,i){if(n==t6&&i==t6)return t;let o=t;for(let t=0;t<i.length;t++){let r=i[t],s=n[t];if(t){let t;s&&s.nodeName==r.nodeName&&o!=e&&(t=o.parentNode)&&t.nodeName.toLowerCase()==r.nodeName||((t=document.createElement(r.nodeName)).pmIsDeco=!0,t.appendChild(o),s=t6[0]),o=t}(function(e,t,n){for(let i in t)"class"==i||"style"==i||"nodeName"==i||i in n||e.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=t[i]&&e.setAttribute(i,n[i]);if(t.class!=n.class){let i=t.class?t.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<i.length;t++)-1==o.indexOf(i[t])&&e.classList.remove(i[t]);for(let t=0;t<o.length;t++)-1==i.indexOf(o[t])&&e.classList.add(o[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=n.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}})(o,s||t6[0],r)}return o}function t9(e,t,n){return t7(e,e,t6,t8(t,n,1!=e.nodeType))}function ne(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function nt(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class nn{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,i=n.children.length,o=e.childCount,r=new Map,s=[];n:for(;o>0;){let a;for(;;)if(i){let e=n.children[i-1];if(e instanceof tZ)n=e,i=e.children.length;else{a=e,i--;break}}else if(n==t)break n;else i=n.parent.children.indexOf(n),n=n.parent;let l=a.node;if(l){if(l!=e.child(o-1))break;--o,r.set(a,o),s.push(a)}}return{index:o,matched:r,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n,i){let o=0,r=this.stack.length>>1,s=Math.min(r,e.length);for(;o<s&&(o==r-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&!1!==e[o].type.spec.spanning;)o++;for(;o<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);let o=-1,s=this.top.children.length;i<this.preMatch.index&&(s=Math.min(this.index+3,s));for(let t=this.index;t<s;t++){let n=this.top.children[t];if(n.matchesMark(e[r])&&!this.isLocked(n.dom)){o=t;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let i=tZ.create(this.top,e[r],t,n);this.top.children.splice(this.index,0,i),this.top=i,this.changed=!0}this.index=0,r++}}findNodeMatch(e,t,n,i){let o=-1,r;if(i>=this.preMatch.index&&(r=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&r.matchesNode(e,t,n))o=this.top.children.indexOf(r,this.index);else for(let i=this.index,r=Math.min(this.top.children.length,i+5);i<r;i++){let r=this.top.children[i];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){o=i;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,i,o){let r=this.top.children[i];return 3==r.dirty&&r.dom==r.contentDOM&&(r.dirty=2),!!r.update(e,t,n,o)&&(this.destroyBetween(this.index,i),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return -1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e}return -1}e=t}}updateNextNode(e,t,n,i,o,r){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof t0){let l=this.preMatch.matched.get(a);if(null!=l&&l!=o)return!1;let c=a.dom,p,d=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&ne(t,a.outerDeco));if(!d&&a.update(e,t,n,i))return this.destroyBetween(this.index,s),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!d&&(p=this.recreateWrapper(a,e,t,n,i,r)))return this.destroyBetween(this.index,s),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=2,p.updateChildren(i,r+1),p.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,i,o,r){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!ne(n,e.outerDeco)||!i.eq(e.innerDeco))return null;let s=t0.create(this.top,t,n,i,o,r);if(s.contentDOM)for(let t of(s.children=e.children,e.children=[],s.children))t.parent=s;return e.destroy(),s}addNode(e,t,n,i,o){let r=t0.create(this.top,e,t,n,i,o);r.contentDOM&&r.updateChildren(i,o+1),this.top.children.splice(this.index++,0,r),this.changed=!0}placeWidget(e,t,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let i=new tQ(this.top,e,t,n);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof tZ;)e=(t=e).children[t.children.length-1];(!e||!(e instanceof t2)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((tO||tC)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let i=new t3(this.top,[],n,null);t!=this.top?t.children.push(i):t.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function ni(e,t){return e.type.side-t.type.side}function no(e,t,n,i,o){let r=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,p=a+=l.size;c>=n||p<=t?r.push(l):(c<t&&r.push(l.slice(0,t-c,i)),o&&(r.push(o),o=void 0),p>n&&r.push(l.slice(n-c,l.size,i)))}return r}function nr(e,t=null){let n=e.domSelectionRange(),i=e.state.doc;if(!n.focusNode)return null;let o=e.docView.nearestDesc(n.focusNode),r=o&&0==o.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=i.resolve(s),l,c;if(th(n)){for(l=s;o&&!o.node;)o=o.parent;let e=o.node;if(o&&e.isAtom&&eY.isSelectable(e)&&o.parent&&!(e.isInline&&function(e,t,n){for(let i=0==t,o=t==tp(e);i||o;){if(e==n)return!0;let t=tn(e);if(!(e=e.parentNode))return!1;i=i&&0==t,o=o&&t==tp(e)}}(n.focusNode,n.focusOffset,o.dom))){let e=o.posBefore;c=new eY(s==e?a:i.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,o=s;for(let i=0;i<n.rangeCount;i++){let r=n.getRangeAt(i);t=Math.min(t,e.docView.posFromDOM(r.startContainer,r.startOffset,1)),o=Math.max(o,e.docView.posFromDOM(r.endContainer,r.endOffset,-1))}if(t<0)return null;[l,s]=o==e.state.selection.anchor?[o,t]:[t,o],a=i.resolve(s)}else l=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(l<0)return null}let p=i.resolve(l);if(!c){let n="pointer"==t||e.state.selection.head<a.pos&&!r?1:-1;c=nf(e,p,a,n)}return c}function ns(e){return e.editable?e.hasFocus():ng(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function na(e,t=!1){let n=e.state.selection;if(nh(e,n),ns(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&tC){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&ta(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)(function(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,i="IMG"==n.nodeName;i?t.collapse(n.parentNode,tn(n)+1):t.collapse(n,0),!i&&!e.state.selection.visible&&tb&&tw<=11&&(n.disabled=!0,n.disabled=!1)})(e);else{let i,o,r,s,{anchor:a,head:l}=n,c,p;!nl||n instanceof eJ||(n.$from.parent.inlineContent||(c=nc(e,n.from)),n.empty||n.$from.parent.inlineContent||(p=nc(e,n.to))),e.docView.setSelection(a,l,e,t),nl&&(c&&nd(c),p&&nd(p)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&((i=e.dom.ownerDocument).removeEventListener("selectionchange",e.input.hideSelectionGuard),r=(o=e.domSelectionRange()).anchorNode,s=o.anchorOffset,i.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(o.anchorNode!=r||o.anchorOffset!=s)&&(i.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!ns(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}let nl=tO||tC&&tM<63;function nc(e,t){let{node:n,offset:i}=e.docView.domFromPos(t,0),o=i<n.childNodes.length?n.childNodes[i]:null,r=i?n.childNodes[i-1]:null;if(tO&&o&&"false"==o.contentEditable)return np(o);if((!o||"false"==o.contentEditable)&&(!r||"false"==r.contentEditable)){if(o)return np(o);if(r)return np(r)}}function np(e){return e.contentEditable="true",tO&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function nd(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function nh(e,t){if(t instanceof eY){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(nu(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else nu(e)}function nu(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function nf(e,t,n,i){return e.someProp("createSelectionBetween",i=>i(e,t,n))||eJ.between(t,n,i)}function nm(e){return(!e.editable||!!e.hasFocus())&&ng(e)}function ng(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function nv(e,t){let{$anchor:n,$head:i}=e.selection,o=t>0?n.max(i):n.min(i),r=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return r&&eq.findFrom(r,t)}function nx(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function ny(e,t,n){let i=e.state.selection;if(i instanceof eJ){if(n.indexOf("s")>-1){let{$head:n}=i,o=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let r=e.state.doc.resolve(n.pos+o.nodeSize*(t<0?-1:1));return nx(e,new eJ(i.$anchor,r))}if(!i.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=nv(e.state,t);return!!n&&n instanceof eY&&nx(e,n)}if(!(tT&&n.indexOf("m")>-1)){let n=i.$head,o=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter,r;if(!o||o.isText)return!1;let s=t<0?n.pos-o.nodeSize:n.pos;return!!(o.isAtom||(r=e.docView.descAt(s))&&!r.contentDOM)&&(eY.isSelectable(o)?nx(e,new eY(t<0?e.state.doc.resolve(n.pos-o.nodeSize):n)):!!tj&&nx(e,new eJ(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}else{if(i instanceof eY&&i.node.isInline)return nx(e,new eJ(t>0?i.$to:i.$from));let n=nv(e.state,t);return!!n&&nx(e,n)}}function nb(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nw(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function nk(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,i=t.focusOffset;if(!n)return;let o,r,s=!1;for(tk&&1==n.nodeType&&i<nb(n)&&nw(n.childNodes[i],-1)&&(s=!0);;)if(i>0){if(1!=n.nodeType)break;{let e=n.childNodes[i-1];if(nw(e,-1))o=n,r=--i;else if(3==e.nodeType)i=(n=e).nodeValue.length;else break}}else if(nS(n))break;else{let t=n.previousSibling;for(;t&&nw(t,-1);)o=n.parentNode,r=tn(t),t=t.previousSibling;if(t)i=nb(n=t);else{if((n=n.parentNode)==e.dom)break;i=0}}s?nC(e,n,i):o&&nC(e,o,r)}(e):function(e){let t,n,i=e.domSelectionRange(),o=i.focusNode,r=i.focusOffset;if(!o)return;let s=nb(o);for(;;)if(r<s){if(1!=o.nodeType)break;if(nw(o.childNodes[r],1))t=o,n=++r;else break}else if(nS(o))break;else{let i=o.nextSibling;for(;i&&nw(i,1);)t=i.parentNode,n=tn(i)+1,i=i.nextSibling;if(i)r=0,s=nb(o=i);else{if((o=o.parentNode)==e.dom)break;r=s=0}}t&&nC(e,t,n)}(e)}function nS(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function nC(e,t,n){if(3!=t.nodeType){let e,i;(i=function(e,t){for(;e&&t==e.childNodes.length&&!td(e);)t=tn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=i,n=0):(e=function(e,t){for(;e&&!t&&!td(e);)t=tn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let i=e.domSelection();if(!i)return;if(th(i)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),i.removeAllRanges(),i.addRange(e)}else i.extend&&i.extend(t,n);e.domObserver.setCurSelection();let{state:o}=e;setTimeout(()=>{e.state==o&&na(e)},50)}function nM(e,t){let n=e.state.doc.resolve(t);if(!(tC||tE)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),o=(n.top+n.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(n.left-i.left)>1)return n.left<i.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),o=(n.top+n.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(n.left-i.left)>1)return n.left>i.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function nO(e,t,n){let i=e.state.selection;if(i instanceof eJ&&!i.empty||n.indexOf("s")>-1||tT&&n.indexOf("m")>-1)return!1;let{$from:o,$to:r}=i;if(!o.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=nv(e.state,t);if(n&&n instanceof eY)return nx(e,n)}if(!o.parent.inlineContent){let n=t<0?o:r,s=i instanceof eX?eq.near(n,t):eq.findFrom(n,t);return!!s&&nx(e,s)}return!1}function nN(e,t){if(!(e.state.selection instanceof eJ))return!0;let{$head:n,$anchor:i,empty:o}=e.state.selection;if(!n.sameParent(i))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let r=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(r&&!r.isText){let i=e.state.tr;return t<0?i.delete(n.pos-r.nodeSize,n.pos):i.delete(n.pos,n.pos+r.nodeSize),e.dispatch(i),!0}return!1}function nT(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function nE(e,t){e.someProp("transformCopied",n=>{t=n(t,e)});let n=[],{content:i,openStart:o,openEnd:r}=t;for(;o>1&&r>1&&1==i.childCount&&1==i.firstChild.childCount;){o--,r--;let e=i.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),i=e.content}let s=e.someProp("clipboardSerializer")||et.fromSchema(e.state.schema),a=nL(),l=a.createElement("div");l.appendChild(s.serializeFragment(i,{document:a}));let c=l.firstChild,p,d=0;for(;c&&1==c.nodeType&&(p=nP[c.nodeName.toLowerCase()]);){for(let e=p.length-1;e>=0;e--){let t=a.createElement(p[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}c=l.firstChild}return c&&1==c.nodeType&&c.setAttribute("data-pm-slice",`${o} ${r}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",n=>n(t,e))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function nA(e,t,n,i,o){let r,s,a=o.parent.type.spec.code;if(!n&&!t)return null;let l=!!t&&(i||a||!n);if(l){if(e.someProp("transformPastedText",n=>{t=n(t,a||i,e)}),a)return s=new g(p.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0),e.someProp("transformPasted",t=>{s=t(s,e,!0)}),s;let n=e.someProp("clipboardTextParser",n=>n(t,o,i,e));if(n)s=n;else{let n=o.marks(),{schema:i}=e.state,s=et.fromSchema(i);r=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(e=>{let t=r.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(i.text(e,n)))})}}else e.someProp("transformPastedHTML",t=>{n=t(n,e)}),r=function(e){var t;let n,i=/^(\s*<meta [^>]*>)*/.exec(e);i&&(e=e.slice(i[0].length));let o=nL().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),s;if((s=r&&nP[r[1].toLowerCase()])&&(e=s.map(e=>"<"+e+">").join("")+e+s.map(e=>"</"+e+">").reverse().join("")),o.innerHTML=(t=e,(n=window.trustedTypes)?(nB||(nB=n.defaultPolicy||n.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),nB.createHTML(t)):t),s)for(let e=0;e<s.length;e++)o=o.querySelector(s[e])||o;return o}(n),tj&&function(e){let t=e.querySelectorAll(tC?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let i=t[n];1==i.childNodes.length&&"\xa0"==i.textContent&&i.parentNode&&i.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),i)}}(r);let c=r&&r.querySelector("[data-pm-slice]"),d=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(d&&d[3])for(let e=+d[3];e>0;e--){let e=r.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;r=e}if(s||(s=(e.someProp("clipboardParser")||e.someProp("domParser")||K.fromSchema(e.state.schema)).parseSlice(r,{preserveWhitespace:!!(l||d),context:o,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||nj.test(e.parentNode.nodeName)?null:{ignore:!0}})),d)s=function(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,i;try{i=JSON.parse(t)}catch(t){return e}let{content:o,openStart:r,openEnd:s}=e;for(let e=i.length-2;e>=0;e-=2){let t=n.nodes[i[e]];if(!t||t.hasRequiredAttrs())break;o=p.from(t.create(i[e+1],o)),r++,s++}return new g(o,r,s)}(nI(s,+d[1],+d[2]),d[4]);else if((s=g.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),o,r=[];if(e.forEach(e=>{if(!r)return;let t=i.findWrapping(e.type),n;if(!t)return r=null;if(n=r.length&&o.length&&function e(t,n,i,o,r){if(r<t.length&&r<n.length&&t[r]==n[r]){let s=e(t,n,i,o.lastChild,r+1);if(s)return o.copy(o.content.replaceChild(o.childCount-1,s));if(o.contentMatchAt(o.childCount).matchType(r==t.length-1?i.type:t[r+1]))return o.copy(o.content.append(p.from(nD(i,t,r+1))))}}(t,o,e,r[r.length-1],0))r[r.length-1]=n;else{r.length&&(r[r.length-1]=function e(t,n){if(0==n)return t;let i=t.content.replaceChild(t.childCount-1,e(t.lastChild,n-1)),o=t.contentMatchAt(t.childCount).fillBefore(p.empty,!0);return t.copy(i.append(o))}(r[r.length-1],o.length));let n=nD(e,t);r.push(n),i=i.matchType(n.type),o=t}}),r)return p.from(r)}return e}(s.content,o),!0)).openStart||s.openEnd){let e=0,t=0;for(let t=s.content.firstChild;e<s.openStart&&!t.type.spec.isolating;e++,t=t.firstChild);for(let e=s.content.lastChild;t<s.openEnd&&!e.type.spec.isolating;t++,e=e.lastChild);s=nI(s,e,t)}return e.someProp("transformPasted",t=>{s=t(s,e,l)}),s}let nj=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function nD(e,t,n=0){for(let i=t.length-1;i>=n;i--)e=t[i].create(null,p.from(e));return e}function nR(e,t,n,i,o,r){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(r=0),o<i-1&&(a=nR(a,t,n,i,o+1,r)),o>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,r<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(p.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function nI(e,t,n){return t<e.openStart&&(e=new g(nR(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new g(nR(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}let nP={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},nz=null;function nL(){return nz||(nz=document.implementation.createHTMLDocument("title"))}let nB=null,nF={},n$={},nV={touchstart:!0,touchmove:!0};class nH{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function n_(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function nq(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>nW(e,t))})}function nW(e,t){return e.someProp("handleDOMEvents",n=>{let i=n[t.type];return!!i&&(i(e,t)||t.defaultPrevented)})}function nK(e){return{left:e.clientX,top:e.clientY}}function nU(e,t,n,i,o){if(-1==i)return!1;let r=e.state.doc.resolve(i);for(let i=r.depth+1;i>0;i--)if(e.someProp(t,t=>i>r.depth?t(e,n,r.nodeAfter,r.before(i),o,!0):t(e,n,r.node(i),r.before(i),o,!1)))return!0;return!1}function nJ(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let i=e.state.tr.setSelection(t);"pointer"==n&&i.setMeta("pointer",!0),e.dispatch(i)}n$.keydown=(e,t)=>{if(e.input.shiftKey=16==t.keyCode||t.shiftKey,!nQ(e,t)&&(e.input.lastKeyCode=t.keyCode,e.input.lastKeyCodeTime=Date.now(),!tA||!tC||13!=t.keyCode)){if(229!=t.keyCode&&e.domObserver.forceFlush(),!tN||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",n=>n(e,t))||function(e,t){let n;let i=t.keyCode,o=(n="",t.ctrlKey&&(n+="c"),t.metaKey&&(n+="m"),t.altKey&&(n+="a"),t.shiftKey&&(n+="s"),n);if(8==i||tT&&72==i&&"c"==o)return nN(e,-1)||nk(e,-1);if(46==i&&!t.shiftKey||tT&&68==i&&"c"==o)return nN(e,1)||nk(e,1);if(13==i||27==i)return!0;if(37==i||tT&&66==i&&"c"==o){let t=37==i?"ltr"==nM(e,e.state.selection.from)?-1:1:-1;return ny(e,t,o)||nk(e,t)}if(39==i||tT&&70==i&&"c"==o){let t=39==i?"ltr"==nM(e,e.state.selection.from)?1:-1:1;return ny(e,t,o)||nk(e,t)}if(38==i||tT&&80==i&&"c"==o)return nO(e,-1,o)||nk(e,-1);if(40==i||tT&&78==i&&"c"==o)return function(e){if(!tO||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;nT(e,n,"true"),setTimeout(()=>nT(e,n,"false"),20)}return!1}(e)||nO(e,1,o)||nk(e,1);else if(o==(tT?"m":"c")&&(66==i||73==i||89==i||90==i))return!0;return!1}(e,t)?t.preventDefault():n_(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",t=>t(e,tu(13,"Enter"))),e.input.lastIOSEnter=0)},200)}}},n$.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},n$.keypress=(e,t)=>{if(nQ(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||tT&&t.metaKey)return;if(e.someProp("handleKeyPress",n=>n(e,t))){t.preventDefault();return}let n=e.state.selection;if(!(n instanceof eJ)||!n.$from.sameParent(n.$to)){let i=String.fromCharCode(t.charCode),o=()=>e.state.tr.insertText(i).scrollIntoView();/[\r\n]/.test(i)||e.someProp("handleTextInput",t=>t(e,n.$from.pos,n.$to.pos,i,o))||e.dispatch(o()),t.preventDefault()}};let nG=tT?"metaKey":"ctrlKey";nF.mousedown=(e,t)=>{e.input.shiftKey=t.shiftKey;let n=n1(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,i=t.y-e.clientY;return n*n+i*i<100}(t,e.input.lastClick)&&!t[nG]&&e.input.lastClick.button==t.button&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:t.clientX,y:t.clientY,type:o,button:t.button};let r=e.posAtCoords(nK(t));r&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new nY(e,r,t,!!n)):("doubleClick"==o?function(e,t,n,i){return nU(e,"handleDoubleClickOn",t,n,i)||e.someProp("handleDoubleClick",n=>n(e,t,i))}:function(e,t,n,i){return nU(e,"handleTripleClickOn",t,n,i)||e.someProp("handleTripleClick",n=>n(e,t,i))||function(e,t,n){if(0!=n.button)return!1;let i=e.state.doc;if(-1==t)return!!i.inlineContent&&(nJ(e,eJ.create(i,0,i.content.size),"pointer"),!0);let o=i.resolve(t);for(let t=o.depth+1;t>0;t--){let n=t>o.depth?o.nodeAfter:o.node(t),r=o.before(t);if(n.inlineContent)nJ(e,eJ.create(i,r+1,r+1+n.content.size),"pointer");else{if(!eY.isSelectable(n))continue;nJ(e,eY.create(i,r),"pointer")}return!0}}(e,n,i)})(e,r.pos,r.inside,t)?t.preventDefault():n_(e,"pointer"))};class nY{constructor(e,t,n,i){let o,r;if(this.view=e,this.pos=t,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[nG],this.allowDefault=n.shiftKey,t.inside>-1)o=e.state.doc.nodeAt(t.inside),r=t.inside;else{let n=e.state.doc.resolve(t.pos);o=n.parent,r=n.depth?n.before():0}let s=i?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.nodeDOM.nodeType?a.nodeDOM:null;let{selection:l}=e.state;(0==n.button&&o.type.spec.draggable&&!1!==o.type.spec.selectable||l instanceof eY&&l.from<=r&&l.to>r)&&(this.mightDrag={node:o,pos:r,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&tk&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),n_(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>na(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;if(this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(nK(e))),this.updateAllowDefault(e),this.allowDefault||!t)n_(this.view,"pointer");else{var n,i,o,r;(n=this.view,i=t.pos,o=t.inside,r=this.selectNode,nU(n,"handleClickOn",i,o,e)||n.someProp("handleClick",t=>t(n,i,e))||(r?function(e,t){if(-1==t)return!1;let n=e.state.selection,i,o;n instanceof eY&&(i=n.node);let r=e.state.doc.resolve(t);for(let e=r.depth+1;e>0;e--){let t=e>r.depth?r.nodeAfter:r.node(e);if(eY.isSelectable(t)){o=i&&n.$from.depth>0&&e>=n.$from.depth&&r.before(n.$from.depth+1)==n.$from.pos?r.before(n.$from.depth):r.before(e);break}}return null!=o&&(nJ(e,eY.create(e.state.doc,o),"pointer"),!0)}(n,o):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),i=n.nodeAfter;return!!(i&&i.isAtom&&eY.isSelectable(i))&&(nJ(e,new eY(n),"pointer"),!0)}(n,o)))?e.preventDefault():0==e.button&&(this.flushed||tO&&this.mightDrag&&!this.mightDrag.node.isAtom||tC&&!this.view.state.selection.visible&&2>=Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to)))?(nJ(this.view,eq.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):n_(this.view,"pointer")}}move(e){this.updateAllowDefault(e),n_(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function nQ(e,t){return!!e.composing||!!(tO&&500>Math.abs(t.timeStamp-e.input.compositionEndedAt))&&(e.input.compositionEndedAt=-2e8,!0)}nF.touchstart=e=>{e.input.lastTouch=Date.now(),n1(e),n_(e,"pointer")},nF.touchmove=e=>{e.input.lastTouch=Date.now(),n_(e,"pointer")},nF.contextmenu=e=>n1(e);let nX=tA?5e3:-1;function nZ(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>n1(e),t))}function n0(e){let t;for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=((t=document.createEvent("Event")).initEvent("event",!0,!0),t.timeStamp));e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function n1(e,t=!1){if(!tA||!(e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),n0(e),t||e.docView&&e.docView.dirty){let n=nr(e),i=e.state.selection;return n&&!n.eq(i)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}n$.compositionstart=n$.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof eJ&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(e=>!1===e.type.spec.inclusive)||tC&&tE&&function(e){let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(!t||1!=t.nodeType||n>=t.childNodes.length)return!1;let i=t.childNodes[n];return 1==i.nodeType&&"false"==i.contentEditable}(e)))e.markCursor=e.state.storedMarks||n.marks(),n1(e,!0),e.markCursor=null;else if(n1(e,!t.selection.empty),tk&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,i=t.focusOffset;n&&1==n.nodeType&&0!=i;){let t=i<0?n.lastChild:n.childNodes[i-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,i=-1}}e.input.composing=!0}nZ(e,nX)},n$.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.badSafariComposition?e.domObserver.forceFlush():e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,nZ(e,20))};let n2=tb&&tw<15||tN&&tD<604;function n3(e,t,n,i,o){let r=nA(e,t,n,i,e.state.selection.$from);if(e.someProp("handlePaste",t=>t(e,o,r||g.empty)))return!0;if(!r)return!1;let s=0==r.openStart&&0==r.openEnd&&1==r.content.childCount?r.content.firstChild:null,a=s?e.state.tr.replaceSelectionWith(s,i):e.state.tr.replaceSelection(r);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function n4(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}nF.copy=n$.cut=(e,t)=>{let n=e.state.selection,i="cut"==t.type;if(n.empty)return;let o=n2?null:t.clipboardData,{dom:r,text:s}=nE(e,n.content());o?(t.preventDefault(),o.clearData(),o.setData("text/html",r.innerHTML),o.setData("text/plain",s)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),o=document.createRange();o.selectNodeContents(t),e.dom.blur(),i.removeAllRanges(),i.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}(e,r),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},n$.paste=(e,t)=>{if(e.composing&&!tA)return;let n=n2?null:t.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;n&&n3(e,n4(n),n.getData("text/html"),i,t)?t.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,i=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let o=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout(()=>{e.focus(),i.parentNode&&i.parentNode.removeChild(i),n?n3(e,i.value,null,o,t):n3(e,i.textContent,i.innerHTML,o,t)},50)}(e,t)};class n5{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}let n6=tT?"altKey":"ctrlKey";function n8(e,t){let n=e.someProp("dragCopies",e=>!e(t));return null!=n?n:!t[n6]}for(let e in nF.dragstart=(e,t)=>{let n;let i=e.input.mouseDown;if(i&&i.done(),!t.dataTransfer)return;let o=e.state.selection,r=o.empty?null:e.posAtCoords(nK(t));if(r&&r.pos>=o.from&&r.pos<=(o instanceof eY?o.to-1:o.to));else if(i&&i.mightDrag)n=eY.create(e.state.doc,i.mightDrag.pos);else if(t.target&&1==t.target.nodeType){let i=e.docView.nearestDesc(t.target,!0);i&&i.node.type.spec.draggable&&i!=e.docView&&(n=eY.create(e.state.doc,i.posBefore))}let s=(n||e.state.selection).content(),{dom:a,text:l,slice:c}=nE(e,s);t.dataTransfer.files.length&&tC&&!(tM>120)||t.dataTransfer.clearData(),t.dataTransfer.setData(n2?"Text":"text/html",a.innerHTML),t.dataTransfer.effectAllowed="copyMove",n2||t.dataTransfer.setData("text/plain",l),e.dragging=new n5(c,n8(e,t),n)},nF.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)},n$.dragover=n$.dragenter=(e,t)=>t.preventDefault(),n$.drop=(e,t)=>{try{(function(e,t,n){if(!t.dataTransfer)return;let i=e.posAtCoords(nK(t));if(!i)return;let o=e.state.doc.resolve(i.pos),r=n&&n.slice;r?e.someProp("transformPasted",t=>{r=t(r,e,!1)}):r=nA(e,n4(t.dataTransfer),n2?null:t.dataTransfer.getData("text/html"),!1,o);let s=!!(n&&n8(e,t));if(e.someProp("handleDrop",n=>n(e,t,r||g.empty,s))){t.preventDefault();return}if(!r)return;t.preventDefault();let a=r?eA(e.state.doc,o.pos,r):o.pos;null==a&&(a=o.pos);let l=e.state.tr;if(s){let{node:e}=n;e?e.replace(l):l.deleteSelection()}let c=l.mapping.map(a),p=0==r.openStart&&0==r.openEnd&&1==r.content.childCount,d=l.doc;if(p?l.replaceRangeWith(c,c,r.content.firstChild):l.replaceRange(c,c,r),l.doc.eq(d))return;let h=l.doc.resolve(c);if(p&&eY.isSelectable(r.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(r.content.firstChild))l.setSelection(new eY(h));else{let t=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach((e,n,i,o)=>t=o),l.setSelection(nf(e,h,l.doc.resolve(t)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))})(e,t,e.dragging)}finally{e.dragging=null}},nF.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&na(e)},20))},nF.blur=(e,t)=>{e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),t.relatedTarget&&e.dom.contains(t.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},nF.beforeinput=(e,t)=>{if(tC&&tA&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=t||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",t=>t(e,tu(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())},50)}},n$)nF[e]=n$[e];function n7(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class n9{constructor(e,t){this.toDOM=e,this.spec=t||ir,this.side=this.spec.side||0}map(e,t,n,i){let{pos:o,deleted:r}=e.mapResult(t.from+i,this.side<0?-1:1);return r?null:new ii(o-n,o-n,this)}valid(){return!0}eq(e){return this==e||e instanceof n9&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&n7(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ie{constructor(e,t){this.attrs=e,this.spec=t||ir}map(e,t,n,i){let o=e.map(t.from+i,this.spec.inclusiveStart?-1:1)-n,r=e.map(t.to+i,this.spec.inclusiveEnd?1:-1)-n;return o>=r?null:new ii(o,r,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ie&&n7(this.attrs,e.attrs)&&n7(this.spec,e.spec)}static is(e){return e.type instanceof ie}destroy(){}}class it{constructor(e,t){this.attrs=e,this.spec=t||ir}map(e,t,n,i){let o=e.mapResult(t.from+i,1);if(o.deleted)return null;let r=e.mapResult(t.to+i,-1);return r.deleted||r.pos<=o.pos?null:new ii(o.pos-n,r.pos-n,this)}valid(e,t){let{index:n,offset:i}=e.content.findIndex(t.from),o;return i==t.from&&!(o=e.child(n)).isText&&i+o.nodeSize==t.to}eq(e){return this==e||e instanceof it&&n7(this.attrs,e.attrs)&&n7(this.spec,e.spec)}destroy(){}}class ii{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new ii(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new ii(e,e,new n9(t,n))}static inline(e,t,n,i){return new ii(e,t,new ie(n,i))}static node(e,t,n,i){return new ii(e,t,new it(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ie}get widget(){return this.type instanceof n9}}let io=[],ir={};class is{constructor(e,t){this.local=e.length?e:io,this.children=t.length?t:io}static create(e,t){return t.length?ih(t,e,0,ir):ia}find(e,t,n){let i=[];return this.findInner(null==e?0:e,null==t?1e9:t,i,0,n),i}findInner(e,t,n,i,o){for(let r=0;r<this.local.length;r++){let s=this.local[r];s.from<=t&&s.to>=e&&(!o||o(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(let r=0;r<this.children.length;r+=3)if(this.children[r]<t&&this.children[r+1]>e){let s=this.children[r]+1;this.children[r+2].findInner(e-s,t-s,n,i+s,o)}}map(e,t,n){return this==ia||0==e.maps.length?this:this.mapInner(e,t,0,0,n||ir)}mapInner(e,t,n,i,o){let r;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,i);a&&a.type.valid(t,a)?(r||(r=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,i,o,r,s){let a=e.slice();for(let e=0,t=r;e<n.maps.length;e++){let i=0;n.maps[e].forEach((e,n,o,r)=>{let s=r-o-(n-e);for(let o=0;o<a.length;o+=3){let r=a[o+1];if(r<0||e>r+t-i)continue;let l=a[o]+t-i;n>=l?a[o+1]=e<=l?-2:-1:e>=t&&s&&(a[o]+=s,a[o+1]+=s)}i+=s}),t=n.maps[e].map(t,-1)}let l=!1;for(let t=0;t<a.length;t+=3)if(a[t+1]<0){if(-2==a[t+1]){l=!0,a[t+1]=-1;continue}let c=n.map(e[t]+r),p=c-o;if(p<0||p>=i.content.size){l=!0;continue}let d=n.map(e[t+1]+r,-1)-o,{index:h,offset:u}=i.content.findIndex(p),f=i.maybeChild(h);if(f&&u==p&&u+f.nodeSize==d){let i=a[t+2].mapInner(n,f,c+1,e[t]+r+1,s);i!=ia?(a[t]=p,a[t+1]=d,a[t+2]=i):(a[t+1]=-2,l=!0)}else l=!0}if(l){let l=ih(function(e,t,n,i,o,r,s){for(let a=0;a<e.length;a+=3)-1==e[a+1]&&function e(t,r){for(let e=0;e<t.local.length;e++){let a=t.local[e].map(i,o,r);a?n.push(a):s.onRemove&&s.onRemove(t.local[e].spec)}for(let n=0;n<t.children.length;n+=3)e(t.children[n+2],t.children[n]+r+1)}(e[a+2],t[a]+r+1);return n}(a,e,t,n,o,r,s),i,0,s);t=l.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<l.children.length;e+=3){let n=l.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,l.children[e],l.children[e+1],l.children[e+2])}}return new is(t.sort(iu),a)}(this.children,r||[],e,t,n,i,o):r?new is(r.sort(iu),io):ia}add(e,t){return t.length?this==ia?is.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let i,o=0;e.forEach((e,r)=>{let s=r+n,a;if(a=ip(t,e,s)){for(i||(i=this.children.slice());o<i.length&&i[o]<r;)o+=3;i[o]==r?i[o+2]=i[o+2].addInner(e,a,s+1):i.splice(o,0,r,r+e.nodeSize,ih(a,e,s+1,ir)),o+=3}});let r=ic(o?id(t):t,-n);for(let t=0;t<r.length;t++)r[t].type.valid(e,r[t])||r.splice(t--,1);return new is(r.length?this.local.concat(r).sort(iu):this.local,i||this.children)}remove(e){return 0==e.length||this==ia?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,i=this.local;for(let i=0;i<n.length;i+=3){let o;let r=n[i]+t,s=n[i+1]+t;for(let t=0,n;t<e.length;t++)(n=e[t])&&n.from>r&&n.to<s&&(e[t]=null,(o||(o=[])).push(n));if(!o)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(o,r+1);a!=ia?n[i+2]=a:(n.splice(i,3),i-=3)}if(i.length){for(let n=0,o;n<e.length;n++)if(o=e[n])for(let e=0;e<i.length;e++)i[e].eq(o,t)&&(i==this.local&&(i=this.local.slice()),i.splice(e--,1))}return n==this.children&&i==this.local?this:i.length||n.length?new is(i,n):ia}forChild(e,t){let n,i;if(this==ia)return this;if(t.isLeaf)return is.empty;for(let t=0;t<this.children.length;t+=3)if(this.children[t]>=e){this.children[t]==e&&(n=this.children[t+2]);break}let o=e+1,r=o+t.content.size;for(let e=0;e<this.local.length;e++){let t=this.local[e];if(t.from<r&&t.to>o&&t.type instanceof ie){let e=Math.max(o,t.from)-o,n=Math.min(r,t.to)-o;e<n&&(i||(i=[])).push(t.copy(e,n))}}if(i){let e=new is(i.sort(iu),io);return n?new il([e,n]):e}return n||ia}eq(e){if(this==e)return!0;if(!(e instanceof is)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return im(this.localsInner(e))}localsInner(e){if(this==ia)return io;if(e.inlineContent||!this.local.some(ie.is))return this.local;let t=[];for(let e=0;e<this.local.length;e++)this.local[e].type instanceof ie||t.push(this.local[e]);return t}forEachSet(e){e(this)}}is.empty=new is([],[]),is.removeOverlap=im;let ia=is.empty;class il{constructor(e){this.members=e}map(e,t){let n=this.members.map(n=>n.map(e,t,ir));return il.from(n)}forChild(e,t){if(t.isLeaf)return is.empty;let n=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(e,t);o!=ia&&(o instanceof il?n=n.concat(o.members):n.push(o))}return il.from(n)}eq(e){if(!(e instanceof il)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(e);if(o.length){if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<o.length;e++)t.push(o[e])}else t=o}}return t?im(n?t:t.sort(iu)):io}static from(e){switch(e.length){case 0:return ia;case 1:return e[0];default:return new il(e.every(e=>e instanceof is)?e:e.reduce((e,t)=>e.concat(t instanceof is?t:t.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function ic(e,t){if(!t||!e.length)return e;let n=[];for(let i=0;i<e.length;i++){let o=e[i];n.push(new ii(o.from+t,o.to+t,o.type))}return n}function ip(e,t,n){if(t.isLeaf)return null;let i=n+t.nodeSize,o=null;for(let t=0,r;t<e.length;t++)(r=e[t])&&r.from>n&&r.to<i&&((o||(o=[])).push(r),e[t]=null);return o}function id(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function ih(e,t,n,i){let o=[],r=!1;t.forEach((t,s)=>{let a=ip(e,t,s+n);if(a){r=!0;let e=ih(a,t,n+s+1,i);e!=ia&&o.push(s,s+t.nodeSize,e)}});let s=ic(r?id(e):e,-n).sort(iu);for(let e=0;e<s.length;e++)s[e].type.valid(t,s[e])||(i.onRemove&&i.onRemove(s[e].spec),s.splice(e--,1));return s.length||o.length?new is(s,o):ia}function iu(e,t){return e.from-t.from||e.to-t.to}function im(e){let t=e;for(let n=0;n<t.length-1;n++){let i=t[n];if(i.from!=i.to)for(let o=n+1;o<t.length;o++){let r=t[o];if(r.from==i.from){r.to!=i.to&&(t==e&&(t=e.slice()),t[o]=r.copy(r.from,i.to),ig(t,o+1,r.copy(i.to,r.to)));continue}r.from<i.to&&(t==e&&(t=e.slice()),t[n]=i.copy(i.from,r.from),ig(t,o,i.copy(r.from,i.to)));break}}return t}function ig(e,t,n){for(;t<e.length&&iu(n,e[t])>0;)t++;e.splice(t,0,n)}function iv(e){let t=[];return e.someProp("decorations",n=>{let i=n(e.state);i&&i!=ia&&t.push(i)}),e.cursorWrapper&&t.push(is.create(e.state.doc,[e.cursorWrapper.deco])),il.from(t)}let ix={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},iy=tb&&tw<=11;class ib{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class iw{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ib,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);tb&&tw<=11&&t.some(e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length)?this.flushSoon():tO&&e.composing&&t.some(e=>"childList"==e.type&&"TR"==e.target.nodeName)?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),iy&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,ix)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(nm(this.view)){if(this.suppressingSelectionUpdates)return na(this.view);if(tb&&tw<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ta(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let n=e.focusNode;n;n=ti(n))t.add(n);for(let i=e.anchorNode;i;i=ti(i))if(t.has(i)){n=i;break}let i=n&&this.view.docView.nearestDesc(n);if(i&&i.ignoreMutation({type:"selection",target:3==n.nodeType?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&nm(e)&&!this.ignoreSelectionChange(n),o=-1,r=-1,s=!1,a=[];if(e.editable)for(let e=0;e<t.length;e++){let n=this.registerMutation(t[e],a);n&&(o=o<0?n.from:Math.min(n.from,o),r=r<0?n.to:Math.max(n.to,r),n.typeOver&&(s=!0))}if(tk&&a.length){let t=a.filter(e=>"BR"==e.nodeName);if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let i of t){let t=i.parentNode;t&&"LI"==t.nodeName&&(!n||function(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}(e,n)!=t)&&i.remove()}}}else if((tC||tO)&&a.some(e=>"BR"==e.nodeName)&&(8==e.input.lastKeyCode||46==e.input.lastKeyCode)){for(let e of a)if("BR"==e.nodeName&&e.parentNode){let t=e.nextSibling;t&&1==t.nodeType&&"false"==t.contentEditable&&e.parentNode.removeChild(e)}}let l=null;o<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&th(n)&&(l=nr(e))&&l.eq(eq.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,na(e),this.currentSelection.set(n),e.scrollToSelection()):(o>-1||i)&&(o>-1&&(e.docView.markDirty(o,r),ik.has(e)||(ik.set(e,null),-1===["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace))||(e.requiresGeckoHackNode=tk,iS||(console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),iS=!0))),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,function(e,t){var n;let{focusNode:i,focusOffset:o}=e.domSelectionRange();for(let r of t)if((null===(n=r.parentNode)||void 0===n?void 0:n.nodeName)=="TR"){let t=r.nextSibling;for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.nextSibling;if(t){let n=t;for(;;){let e=n.firstChild;if(!e||1!=e.nodeType||"false"==e.contentEditable||/^(BR|IMG)$/.test(e.nodeName))break;n=e}n.insertBefore(r,n.firstChild),i==r&&e.domSelection().collapse(r,o)}else r.parentNode.removeChild(r)}}(e,a)),this.handleDOMChange(o,r,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||na(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let i=e.addedNodes[n];t.push(i),3==i.nodeType&&(this.lastChangedTextNode=i)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let i=e.previousSibling,o=e.nextSibling;if(tb&&tw<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:r}=e.addedNodes[t];(!n||0>Array.prototype.indexOf.call(e.addedNodes,n))&&(i=n),(!r||0>Array.prototype.indexOf.call(e.addedNodes,r))&&(o=r)}let r=i&&i.parentNode==e.target?tn(i)+1:0,s=n.localPosFromDOM(e.target,r,-1),a=o&&o.parentNode==e.target?tn(o):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let ik=new WeakMap,iS=!1;function iC(e,t){let n=t.startContainer,i=t.startOffset,o=t.endContainer,r=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return ta(s.node,s.offset,o,r)&&([n,i,o,r]=[o,r,n,i]),{anchorNode:n,anchorOffset:i,focusNode:o,focusOffset:r}}function iM(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(tO&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||tO&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}let iO=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function iN(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:nf(e,t.resolve(n.anchor),t.resolve(n.head))}function iT(e,t,n){let i=e.depth,o=t?e.end():e.pos;for(;i>0&&(t||e.indexAfter(i)==e.node(i).childCount);)i--,o++,t=!1;if(n){let t=e.node(i).maybeChild(e.indexAfter(i));for(;t&&!t.isLeaf;)t=t.firstChild,o++}return o}function iE(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class iA{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new nH,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(iP),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=iR(this),iD(this),this.nodeViews=iI(this),this.docView=t1(this.state.doc,ij(this),iv(this),this.dom,this),this.domObserver=new iw(this,(e,t,n,i)=>(function(e,t,n,i,o){let r,s,a,l=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=nr(e,t);if(n&&!e.state.selection.eq(n)){if(tC&&tA&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",t=>t(e,tu(13,"Enter"))))return;let i=e.state.tr.setSelection(n);"pointer"==t?i.setMeta("pointer",!0):"key"==t&&i.scrollIntoView(),l&&i.setMeta("composition",l),e.dispatch(i)}return}let c=e.state.doc.resolve(t),d=c.sharedDepth(n);t=c.before(d+1),n=e.state.doc.resolve(n).after(d+1);let h=e.state.selection,u=function(e,t,n){let i,{node:o,fromOffset:r,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),p=c.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(i=[{node:p,offset:c.anchorOffset}],th(c)||i.push({node:c.focusNode,offset:c.focusOffset})),tC&&8===e.input.lastKeyCode)for(let e=s;e>r;e--){let t=o.childNodes[e-1],n=t.pmViewDesc;if("BR"==t.nodeName&&!n){s=e;break}if(!n||n.size)break}let d=e.state.doc,h=e.someProp("domParser")||K.fromSchema(e.state.schema),u=d.resolve(a),f=null,m=h.parse(o,{topNode:u.parent,topMatch:u.parent.contentMatchAt(u.index()),topOpen:!0,from:r,to:s,preserveWhitespace:"pre"!=u.parent.type.whitespace||"full",findPositions:i,ruleFromNode:iM,context:u});if(i&&null!=i[0].pos){let e=i[0].pos,t=i[1]&&i[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),f=e.state.doc,m=f.slice(u.from,u.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(r=e.state.selection.to,s="end"):(r=e.state.selection.from,s="start"),e.input.lastKeyCode=null;let g=function(e,t,n,i,o){let r=e.findDiffStart(t,n);if(null==r)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==o){let e=Math.max(0,r-Math.min(s,a));i-=s+e-r}if(s<r&&e.size<t.size){let e=i<=r&&i>=s?r-i:0;(r-=e)&&r<t.size&&iE(t.textBetween(r-1,r+1))&&(r+=e?1:-1),a=r+(a-s),s=r}else if(a<r){let t=i<=r&&i>=a?r-i:0;(r-=t)&&r<e.size&&iE(e.textBetween(r-1,r+1))&&(r+=t?1:-1),s=r+(s-a),a=r}return{start:r,endA:s,endB:a}}(m.content,u.doc.content,u.from,r,s);if(g&&e.input.domChangeCount++,(tN&&e.input.lastIOSEnter>Date.now()-225||tA)&&o.some(e=>1==e.nodeType&&!iO.test(e.nodeName))&&(!g||g.endA>=g.endB)&&e.someProp("handleKeyDown",t=>t(e,tu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!g){if(i&&h instanceof eJ&&!h.empty&&h.$head.sameParent(h.$anchor)&&!e.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))g={start:h.from,endA:h.to,endB:h.to};else{if(u.sel){let t=iN(e,e.state.doc,u.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);l&&n.setMeta("composition",l),e.dispatch(n)}}return}}e.state.selection.from<e.state.selection.to&&g.start==g.endB&&e.state.selection instanceof eJ&&(g.start>e.state.selection.from&&g.start<=e.state.selection.from+2&&e.state.selection.from>=u.from?g.start=e.state.selection.from:g.endA<e.state.selection.to&&g.endA>=e.state.selection.to-2&&e.state.selection.to<=u.to&&(g.endB+=e.state.selection.to-g.endA,g.endA=e.state.selection.to)),tb&&tw<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>u.from&&" \xa0"==u.doc.textBetween(g.start-u.from-1,g.start-u.from+1)&&(g.start--,g.endA--,g.endB--);let v=u.doc.resolveNoCache(g.start-u.from),x=u.doc.resolveNoCache(g.endB-u.from),y=f.resolve(g.start),b=v.sameParent(x)&&v.parent.inlineContent&&y.end()>=g.endA;if((tN&&e.input.lastIOSEnter>Date.now()-225&&(!b||o.some(e=>"DIV"==e.nodeName||"P"==e.nodeName))||!b&&v.pos<u.doc.content.size&&(!v.sameParent(x)||!v.parent.inlineContent)&&v.pos<x.pos&&!/\S/.test(u.doc.textBetween(v.pos,x.pos,"","")))&&e.someProp("handleKeyDown",t=>t(e,tu(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>g.start&&function(e,t,n,i,o){if(n-t<=o.pos-i.pos||iT(i,!0,!1)<o.pos)return!1;let r=e.resolve(t);if(!i.parent.isTextblock){let e=r.nodeAfter;return null!=e&&n==t+e.nodeSize}if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let s=e.resolve(iT(r,!0,!0));return!(!s.parent.isTextblock||s.pos>n||iT(s,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(s.parent.content)}(f,g.start,g.endA,v,x)&&e.someProp("handleKeyDown",t=>t(e,tu(8,"Backspace")))){tA&&tC&&e.domObserver.suppressSelectionUpdates();return}tC&&g.endB==g.start&&(e.input.lastChromeDelete=Date.now()),tA&&!b&&v.start()!=x.start()&&0==x.parentOffset&&v.depth==x.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==g.endA&&(g.endB-=2,x=u.doc.resolveNoCache(g.endB-u.from),setTimeout(()=>{e.someProp("handleKeyDown",function(t){return t(e,tu(13,"Enter"))})},20));let w=g.start,k=g.endA,S=t=>{let n=t||e.state.tr.replace(w,k,u.doc.slice(g.start-u.from,g.endB-u.from));if(u.sel){let t=iN(e,n.doc,u.sel);t&&!(tC&&e.composing&&t.empty&&(g.start!=g.endB||e.input.lastChromeDelete<Date.now()-100)&&(t.head==w||t.head==n.mapping.map(k)-1)||tb&&t.empty&&t.head==w)&&n.setSelection(t)}return l&&n.setMeta("composition",l),n.scrollIntoView()};if(b){if(v.pos==x.pos){tb&&tw<=11&&0==v.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>na(e),20));let t=S(e.state.tr.delete(w,k)),n=f.resolve(g.start).marksAcross(f.resolve(g.endA));n&&t.ensureMarks(n),e.dispatch(t)}else if(g.endA==g.endB&&(a=function(e,t){let n=e.firstChild.marks,i=t.firstChild.marks,o=n,r=i,s,a,l;for(let e=0;e<i.length;e++)o=i[e].removeFromSet(o);for(let e=0;e<n.length;e++)r=n[e].removeFromSet(r);if(1==o.length&&0==r.length)a=o[0],s="add",l=e=>e.mark(a.addToSet(e.marks));else{if(0!=o.length||1!=r.length)return null;a=r[0],s="remove",l=e=>e.mark(a.removeFromSet(e.marks))}let c=[];for(let e=0;e<t.childCount;e++)c.push(l(t.child(e)));if(p.from(c).eq(e))return{mark:a,type:s}}(v.parent.content.cut(v.parentOffset,x.parentOffset),y.parent.content.cut(y.parentOffset,g.endA-y.start())))){let t=S(e.state.tr);"add"==a.type?t.addMark(w,k,a.mark):t.removeMark(w,k,a.mark),e.dispatch(t)}else if(v.parent.child(v.index()).isText&&v.index()==x.index()-(x.textOffset?0:1)){let t=v.parent.textBetween(v.parentOffset,x.parentOffset),n=()=>S(e.state.tr.insertText(t,w,k));e.someProp("handleTextInput",i=>i(e,w,k,t,n))||e.dispatch(n())}else e.dispatch(S())}else e.dispatch(S())})(this,e,t,n,i)),this.domObserver.start(),function(e){for(let t in nF){let n=nF[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||nW(e,t)||!e.editable&&t.type in n$||n(e,t)},nV[t]?{passive:!0}:void 0)}tO&&e.dom.addEventListener("input",()=>null),nq(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;for(let t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&nq(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(iP),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let e in this._props)t[e]=this._props[e];for(let n in t.state=this.state,e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n,i,o;let r=this.state,s=!1,a=!1;e.storedMarks&&this.composing&&(n0(this),a=!0),this.state=e;let l=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(l||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=iI(this);(function(e,t){let n=0,i=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let e in t)i++;return n!=i})(e,this.nodeViews)&&(this.nodeViews=e,s=!0)}(l||t.handleDOMEvents!=this._props.handleDOMEvents)&&nq(this),this.editable=iR(this),iD(this);let c=iv(this),p=ij(this),d=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",h=s||!this.docView.matchesNode(e.doc,p,c);(h||!e.selection.eq(r.selection))&&(a=!0);let u="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function(e){let t,n,i=e.dom.getBoundingClientRect(),o=Math.max(0,i.top);for(let r=(i.left+i.right)/2,s=o+1;s<Math.min(innerHeight,i.bottom);s+=5){let i=e.root.elementFromPoint(r,s);if(!i||i==e.dom||!e.dom.contains(i))continue;let a=i.getBoundingClientRect();if(a.top>=o-20){t=i,n=a.top;break}}return{refDOM:t,refTop:n,stack:tP(e.dom)}}(this);if(a){let t,n,a;this.domObserver.stop();let l=h&&(tb||tC)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&(i=r.selection,o=e.selection,a=Math.min(i.$anchor.sharedDepth(i.head),o.$anchor.sharedDepth(o.head)),i.$anchor.start(a)!=o.$anchor.start(a));if(h){let t=tC?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=function(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=tp(e=e.childNodes[t-1])}else{if(!e.parentNode||td(e))return null;t=tn(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),i=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||td(e))return null;t=tn(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&i&&n!=i){let t=i.pmViewDesc,o=e.domObserver.lastChangedTextNode;if(n==o||i==o)return o;if(!t||!t.isText(i.nodeValue))return i;if(e.input.compositionNode==i){let e=n.pmViewDesc;if(!(!e||!e.isText(n.nodeValue)))return i}}return n||i}(this)),(s||!this.docView.update(e.doc,p,c,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=t1(e.doc,p,c,this.dom,this)),!t||this.trackWrites&&this.dom.contains(this.trackWrites)||(l=!0)}l||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&(t=this.docView.domFromPos(this.state.selection.anchor,0),n=this.domSelectionRange(),ta(t.node,t.offset,n.anchorNode,n.anchorOffset)))?na(this,l):(nh(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==d?this.dom.scrollTop=0:"to selection"==d?this.scrollToSelection():u&&function({refDOM:e,refTop:t,stack:n}){let i=e?e.getBoundingClientRect().top:0;tz(n,0==i?0:i-t)}(u)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(e&&this.dom.contains(1==e.nodeType?e:e.parentNode)){if(this.someProp("handleScrollToSelection",e=>e(this)));else if(this.state.selection instanceof eY){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&tI(this,t.getBoundingClientRect(),e)}else tI(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(i=e)}this.dragging=new n5(e.slice,e.move,i<0?void 0:eY.create(this.state.doc,i))}someProp(e,t){let n=this._props&&this._props[e],i;if(null!=n&&(i=t?t(n):n))return i;for(let n=0;n<this.directPlugins.length;n++){let o=this.directPlugins[n].props[e];if(null!=o&&(i=t?t(o):o))return i}let o=this.state.plugins;if(o)for(let n=0;n<o.length;n++){let r=o[n].props[e];if(null!=r&&(i=t?t(r):r))return i}}hasFocus(){if(tb){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(tL)return e.focus(tL);let t=tP(e);e.focus(null==tL?{get preventScroll(){return tL={preventScroll:!0},!0}}:void 0),tL||(tL=!1,tz(t,0))}(this.dom),na(this),this.domObserver.start()}get root(){let e=this._root;if(null==e){for(let e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return e||document}updateRoot(){this._root=null}posAtCoords(e){return function(e,t){var n;let i,o,r=e.dom.ownerDocument,s,a=0,l=function(e,t,n){if(e.caretPositionFromPoint)try{let i=e.caretPositionFromPoint(t,n);if(i)return{node:i.offsetNode,offset:Math.min(tp(i.offsetNode),i.offset)}}catch(e){}if(e.caretRangeFromPoint){let i=e.caretRangeFromPoint(t,n);if(i)return{node:i.startContainer,offset:Math.min(tp(i.startContainer),i.startOffset)}}}(r,t.left,t.top);l&&({node:s,offset:a}=l);let c=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!c||!e.dom.contains(1!=c.nodeType?c.parentNode:c)){let n=e.dom.getBoundingClientRect();if(!tB(t,n)||!(c=function e(t,n,i){let o=t.childNodes.length;if(o&&i.top<i.bottom)for(let r=Math.max(0,Math.min(o-1,Math.floor(o*(n.top-i.top)/(i.bottom-i.top))-2)),s=r;;){let i=t.childNodes[s];if(1==i.nodeType){let t=i.getClientRects();for(let o=0;o<t.length;o++){let r=t[o];if(tB(n,r))return e(i,n,r)}}if((s=(s+1)%o)==r)break}return t}(e.dom,t,n)))return null}if(tO)for(let e=c;s&&e;e=ti(e))e.draggable&&(s=void 0);if(c=(i=(n=c).parentNode)&&/^li$/i.test(i.nodeName)&&t.left<n.getBoundingClientRect().left?i:n,s){let n;if(tk&&1==s.nodeType&&(a=Math.min(a,s.childNodes.length))<s.childNodes.length){let e=s.childNodes[a],n;"IMG"==e.nodeName&&(n=e.getBoundingClientRect()).right<=t.left&&n.bottom>t.top&&a++}tj&&a&&1==s.nodeType&&1==(n=s.childNodes[a-1]).nodeType&&"false"==n.contentEditable&&n.getBoundingClientRect().top>=t.top&&a--,s==e.dom&&a==s.childNodes.length-1&&1==s.lastChild.nodeType&&t.top>s.lastChild.getBoundingClientRect().bottom?o=e.state.doc.content.size:(0==a||1!=s.nodeType||"BR"!=s.childNodes[a-1].nodeName)&&(o=function(e,t,n,i){let o=-1;for(let n=t,r=!1;n!=e.dom;){let t=e.docView.nearestDesc(n,!0),s;if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)&&((s=t.dom.getBoundingClientRect()).width||s.height)&&(t.node.isBlock&&t.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(t.dom.nodeName)&&(!r&&s.left>i.left||s.top>i.top?o=t.posBefore:(!r&&s.right<i.left||s.bottom<i.top)&&(o=t.posAfter),r=!0),!t.contentDOM&&o<0&&!t.node.isText))return(t.node.isBlock?i.top<(s.top+s.bottom)/2:i.left<(s.left+s.right)/2)?t.posBefore:t.posAfter;n=t.dom.parentNode}return o>-1?o:e.docView.posFromDOM(t,n,-1)}(e,s,a,t))}null==o&&(o=function(e,t,n){let{node:i,offset:o}=function e(t,n){let i,o,r,s=2e8,a,l=0,c=n.top,p=n.top;for(let e=t.firstChild,d=0;e;e=e.nextSibling,d++){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=tr(e).getClientRects()}for(let h=0;h<t.length;h++){let u=t[h];if(u.top<=c&&u.bottom>=p){c=Math.max(u.bottom,c),p=Math.min(u.top,p);let t=u.left>n.left?u.left-n.left:u.right<n.left?n.left-u.right:0;if(t<s){r=e,s=t,a=t&&3==r.nodeType?{left:u.right<n.left?u.right:u.left,top:n.top}:n,1==e.nodeType&&t&&(l=d+(n.left>=(u.left+u.right)/2?1:0));continue}}else u.top>n.top&&!i&&u.left<=n.left&&u.right>=n.left&&(i=e,o={left:Math.max(u.left,Math.min(u.right,n.left)),top:u.top});!r&&(n.left>=u.right&&n.top>=u.top||n.left>=u.left&&n.top>=u.bottom)&&(l=d+1)}}return(!r&&i&&(r=i,a=o,s=0),r&&3==r.nodeType)?function(e,t){let n=e.nodeValue.length,i=document.createRange(),o;for(let r=0;r<n;r++){i.setEnd(e,r+1),i.setStart(e,r);let n=t$(i,1);if(n.top!=n.bottom&&tB(t,n)){o={node:e,offset:r+(t.left>=(n.left+n.right)/2?1:0)};break}}return i.detach(),o||{node:e,offset:0}}(r,a):!r||s&&1==r.nodeType?{node:t,offset:l}:e(r,a)}(t,n),r=-1;if(1==i.nodeType&&!i.firstChild){let e=i.getBoundingClientRect();r=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(i,o,r)}(e,c,t));let p=e.docView.nearestDesc(c,!0);return{pos:o,inside:p?p.posAtStart-p.border:-1}}(this,e)}coordsAtPos(e,t=1){return tH(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let i=this.docView.posFromDOM(e,t,n);if(null==i)throw RangeError("DOM position not inside the editor");return i}endOfTextblock(e,t){var n,i,o;let r,s;return n=this,i=t||this.state,o=e,tU==i&&tJ==o?tG:(tU=i,tJ=o,tG="up"==o||"down"==o?(r=i.selection,s="up"==o?r.$from:r.$to,tW(n,i,()=>{let{node:e}=n.docView.domFromPos(s.pos,"up"==o?-1:1);for(;;){let t=n.docView.nearestDesc(e,!0);if(!t)break;if(t.node.isBlock){e=t.contentDOM||t.dom;break}e=t.dom.parentNode}let t=tH(n,s.pos,1);for(let n=e.firstChild;n;n=n.nextSibling){let e;if(1==n.nodeType)e=n.getClientRects();else{if(3!=n.nodeType)continue;e=tr(n,0,n.nodeValue.length).getClientRects()}for(let n=0;n<e.length;n++){let i=e[n];if(i.bottom>i.top+1&&("up"==o?t.top-i.top>(i.bottom-t.top)*2:i.bottom-t.bottom>(t.bottom-i.top)*2))return!1}}return!0})):function(e,t,n){let{$head:i}=t.selection;if(!i.parent.isTextblock)return!1;let o=i.parentOffset,r=o==i.parent.content.size,s=e.domSelection();return s?tK.test(i.parent.textContent)&&s.modify?tW(e,t,()=>{let{focusNode:t,focusOffset:o,anchorNode:r,anchorOffset:a}=e.domSelectionRange(),l=s.caretBidiLevel;s.modify("move",n,"character");let c=i.depth?e.docView.domAfterPos(i.before()):e.dom,{focusNode:p,focusOffset:d}=e.domSelectionRange(),h=p&&!c.contains(1==p.nodeType?p:p.parentNode)||t==p&&o==d;try{s.collapse(r,a),t&&(t!=r||o!=a)&&s.extend&&s.extend(t,o)}catch(e){}return null!=l&&(s.caretBidiLevel=l),h}):"left"==n||"backward"==n?!o:r:i.pos==i.start()||i.pos==i.end()}(n,i,o))}pasteHTML(e,t){return n3(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return n3(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return nE(this,e)}destroy(){this.docView&&(function(e){for(let t in e.domObserver.stop(),e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],iv(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ts())}get isDestroyed(){return null==this.docView}dispatchEvent(e){nW(this,e)||!nF[e.type]||!this.editable&&e.type in n$||nF[e.type](this,e)}domSelectionRange(){let e=this.domSelection();return e?tO&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){let n;if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return iC(e,n)}function i(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",i,!0),n?iC(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function ij(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))}),t.translate||(t.translate="no"),[ii.node(0,e.state.doc.content.size,t)]}function iD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ii.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function iR(e){return!e.someProp("editable",t=>!1===t(e.state))}function iI(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function iP(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw RangeError("Plugins passed directly to the view must not have a state component")}iA.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};for(var iz={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},iL={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},iB="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),iF="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),i$=0;i$<10;i$++)iz[48+i$]=iz[96+i$]=String(i$);for(var i$=1;i$<=24;i$++)iz[i$+111]="F"+i$;for(var i$=65;i$<=90;i$++)iz[i$]=String.fromCharCode(i$+32),iL[i$]=String.fromCharCode(i$);for(var iV in iz)iL.hasOwnProperty(iV)||(iL[iV]=iz[iV]);let iH="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),i_="undefined"!=typeof navigator&&/Win/.test(navigator.platform);function iq(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function iW(e){let t=function(e){let t=Object.create(null);for(let n in e)t[function(e){let t,n,i,o,r=e.split(/-(?!$)/),s=r[r.length-1];"Space"==s&&(s=" ");for(let e=0;e<r.length-1;e++){let s=r[e];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))i=!0;else if(/^mod$/i.test(s))iH?o=!0:n=!0;else throw Error("Unrecognized modifier name: "+s)}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),i&&(s="Shift-"+s),s}(n)]=e[n];return t}(e);return function(e,n){var i;let o=("Esc"==(i=!(iB&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||iF&&n.shiftKey&&n.key&&1==n.key.length||"Unidentified"==n.key)&&n.key||(n.shiftKey?iL:iz)[n.keyCode]||n.key||"Unidentified")&&(i="Escape"),"Del"==i&&(i="Delete"),"Left"==i&&(i="ArrowLeft"),"Up"==i&&(i="ArrowUp"),"Right"==i&&(i="ArrowRight"),"Down"==i&&(i="ArrowDown"),i),r,s=t[iq(o,n)];if(s&&s(e.state,e.dispatch,e))return!0;if(1==o.length&&" "!=o){if(n.shiftKey){let i=t[iq(o,n,!1)];if(i&&i(e.state,e.dispatch,e))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(i_&&n.ctrlKey&&n.altKey)&&(r=iz[n.keyCode])&&r!=o){let i=t[iq(r,n)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}let iK=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function iU(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("backward",e):!(n.parentOffset>0))?n:null}let iJ=(e,t,n)=>{let i=iU(e,n);if(!i)return!1;let o=i0(i);if(!o){let n=i.blockRange(),o=n&&ew(n);return null!=o&&(t&&t(e.tr.lift(n,o).scrollIntoView()),!0)}let r=o.nodeBefore;if(oo(e,o,t,-1))return!0;if(0==i.parent.content.size&&(iX(r,"end")||eY.isSelectable(r)))for(let n=i.depth;;n--){let s=ej(e.doc,i.before(n),i.after(n),g.empty);if(s&&s.slice.size<s.to-s.from){if(t){let n=e.tr.step(s);n.setSelection(iX(r,"end")?eq.findFrom(n.doc.resolve(n.mapping.map(o.pos,-1)),-1):eY.create(n.doc,o.pos-r.nodeSize)),t(n.scrollIntoView())}return!0}if(1==n||i.node(n-1).childCount>1)break}return!!r.isAtom&&o.depth==i.depth-1&&(t&&t(e.tr.delete(o.pos-r.nodeSize,o.pos).scrollIntoView()),!0)},iG=(e,t,n)=>{let i=iU(e,n);if(!i)return!1;let o=i0(i);return!!o&&iQ(e,o,t)},iY=(e,t,n)=>{let i=i1(e,n);if(!i)return!1;let o=i4(i);return!!o&&iQ(e,o,t)};function iQ(e,t,n){let i=t.nodeBefore,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let e=i.lastChild;if(!e)return!1;i=e}let r=t.nodeAfter,s=t.pos+1;for(;!r.isTextblock;s++){if(r.type.spec.isolating)return!1;let e=r.firstChild;if(!e)return!1;r=e}let a=ej(e.doc,o,s,g.empty);if(!a||a.from!=o||a instanceof ev&&a.slice.size>=s-o)return!1;if(n){let t=e.tr.step(a);t.setSelection(eJ.create(t.doc,o)),n(t.scrollIntoView())}return!0}function iX(e,t,n=!1){for(let i=e;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)break}return!1}let iZ=(e,t,n)=>{let{$head:i,empty:o}=e.selection,r=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):i.parentOffset>0)return!1;r=i0(i)}let s=r&&r.nodeBefore;return!!(s&&eY.isSelectable(s))&&(t&&t(e.tr.setSelection(eY.create(e.doc,r.pos-s.nodeSize)).scrollIntoView()),!0)};function i0(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function i1(e,t){let{$cursor:n}=e.selection;return n&&(t?t.endOfTextblock("forward",e):!(n.parentOffset<n.parent.content.size))?n:null}let i2=(e,t,n)=>{let i=i1(e,n);if(!i)return!1;let o=i4(i);if(!o)return!1;let r=o.nodeAfter;if(oo(e,o,t,1))return!0;if(0==i.parent.content.size&&(iX(r,"start")||eY.isSelectable(r))){let n=ej(e.doc,i.before(),i.after(),g.empty);if(n&&n.slice.size<n.to-n.from){if(t){let i=e.tr.step(n);i.setSelection(iX(r,"start")?eq.findFrom(i.doc.resolve(i.mapping.map(o.pos)),1):eY.create(i.doc,i.mapping.map(o.pos))),t(i.scrollIntoView())}return!0}}return!!r.isAtom&&o.depth==i.depth-1&&(t&&t(e.tr.delete(o.pos,o.pos+r.nodeSize).scrollIntoView()),!0)},i3=(e,t,n)=>{let{$head:i,empty:o}=e.selection,r=i;if(!o)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):i.parentOffset<i.parent.content.size)return!1;r=i4(i)}let s=r&&r.nodeAfter;return!!(s&&eY.isSelectable(s))&&(t&&t(e.tr.setSelection(eY.create(e.doc,r.pos)).scrollIntoView()),!0)};function i4(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}let i5=(e,t)=>{let n=e.selection,i=n instanceof eY,o;if(i){if(n.node.isTextblock||!eN(e.doc,n.from))return!1;o=n.from}else if(null==(o=eE(e.doc,n.from,-1)))return!1;if(t){let n=e.tr.join(o);i&&n.setSelection(eY.create(n.doc,o-e.doc.resolve(o).nodeBefore.nodeSize)),t(n.scrollIntoView())}return!0},i6=(e,t)=>{let n=e.selection,i;if(n instanceof eY){if(n.node.isTextblock||!eN(e.doc,n.to))return!1;i=n.to}else if(null==(i=eE(e.doc,n.to,1)))return!1;return t&&t(e.tr.join(i).scrollIntoView()),!0},i8=(e,t)=>{let{$from:n,$to:i}=e.selection,o=n.blockRange(i),r=o&&ew(o);return null!=r&&(t&&t(e.tr.lift(o,r).scrollIntoView()),!0)},i7=(e,t)=>{let{$head:n,$anchor:i}=e.selection;return!!(n.parent.type.spec.code&&n.sameParent(i))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function i9(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}let oe=(e,t)=>{let{$head:n,$anchor:i}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let o=n.node(-1),r=n.indexAfter(-1),s=i9(o.contentMatchAt(r));if(!s||!o.canReplaceWith(r,r,s))return!1;if(t){let i=n.after(),o=e.tr.replaceWith(i,i,s.createAndFill());o.setSelection(eq.near(o.doc.resolve(i),1)),t(o.scrollIntoView())}return!0},ot=(e,t)=>{let n=e.selection,{$from:i,$to:o}=n;if(n instanceof eX||i.parent.inlineContent||o.parent.inlineContent)return!1;let r=i9(o.parent.contentMatchAt(o.indexAfter()));if(!r||!r.isTextblock)return!1;if(t){let n=(!i.parentOffset&&o.index()<o.parent.childCount?i:o).pos,s=e.tr.insert(n,r.createAndFill());s.setSelection(eJ.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},on=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(eO(e.doc,i))return t&&t(e.tr.split(i).scrollIntoView()),!0}let i=n.blockRange(),o=i&&ew(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)},oi=(e,t)=>{let{$from:n,to:i}=e.selection,o,r=n.sharedDepth(i);return 0!=r&&(o=n.before(r),t&&t(e.tr.setSelection(eY.create(e.doc,o))),!0)};function oo(e,t,n,i){let o,r,s,a=t.nodeBefore,l=t.nodeAfter,c,d,h=a.type.spec.isolating||l.type.spec.isolating;if(!h&&(o=t.nodeBefore,r=t.nodeAfter,s=t.index(),o&&r&&o.type.compatibleContent(r.type)&&(!o.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-o.nodeSize,t.pos).scrollIntoView()),!0):!!(t.parent.canReplace(s,s+1)&&(r.isTextblock||eN(e.doc,t.pos)))&&(n&&n(e.tr.join(t.pos).scrollIntoView()),!0))))return!0;let u=!h&&t.parent.canReplace(t.index(),t.index()+1);if(u&&(c=(d=a.contentMatchAt(a.childCount)).findWrapping(l.type))&&d.matchType(c[0]||l.type).validEnd){if(n){let i=t.pos+l.nodeSize,o=p.empty;for(let e=c.length-1;e>=0;e--)o=p.from(c[e].create(null,o));o=p.from(a.copy(o));let r=e.tr.step(new ex(t.pos-1,i,t.pos,i,new g(o,1,0),c.length,!0)),s=r.doc.resolve(i+2*c.length);s.nodeAfter&&s.nodeAfter.type==a.type&&eN(r.doc,s.pos)&&r.join(s.pos),n(r.scrollIntoView())}return!0}let f=l.type.spec.isolating||i>0&&h?null:eq.findFrom(t,1),m=f&&f.$from.blockRange(f.$to),v=m&&ew(m);if(null!=v&&v>=t.depth)return n&&n(e.tr.lift(m,v).scrollIntoView()),!0;if(u&&iX(l,"start",!0)&&iX(a,"end")){let i=a,o=[];for(;o.push(i),!i.isTextblock;)i=i.lastChild;let r=l,s=1;for(;!r.isTextblock;r=r.firstChild)s++;if(i.canReplace(i.childCount,i.childCount,r.content)){if(n){let i=p.empty;for(let e=o.length-1;e>=0;e--)i=p.from(o[e].copy(i));n(e.tr.step(new ex(t.pos-o.length,t.pos+l.nodeSize,t.pos+s,t.pos+l.nodeSize-s,new g(i,o.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function or(e){return function(t,n){let i=t.selection,o=e<0?i.$from:i.$to,r=o.depth;for(;o.node(r).isInline;){if(!r)return!1;r--}return!!o.node(r).isTextblock&&(n&&n(t.tr.setSelection(eJ.create(t.doc,e<0?o.start(r):o.end(r)))),!0)}}let oa=or(-1),ol=or(1);function oc(e,t=null){return function(n,i){let o=!1;for(let i=0;i<n.selection.ranges.length&&!o;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(r,s,(i,r)=>{if(o)return!1;if(!(!i.isTextblock||i.hasMarkup(e,t))){if(i.type==e)o=!0;else{let t=n.doc.resolve(r),i=t.index();o=t.parent.canReplaceWith(i,i+1,e)}}})}if(!o)return!1;if(i){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[i];o.setBlockType(r,s,e,t)}i(o.scrollIntoView())}return!0}}function op(...e){return function(t,n,i){for(let o=0;o<e.length;o++)if(e[o](t,n,i))return!0;return!1}}let od=op(iK,iJ,iZ),oh=op(iK,i2,i3),ou={Enter:op(i7,ot,on,(e,t)=>{let{$from:n,$to:i}=e.selection;if(e.selection instanceof eY&&e.selection.node.isBlock)return!!(n.parentOffset&&eO(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let o=[],r,s,a=!1,l=!1;for(let e=n.depth;;e--){if(n.node(e).isBlock){let t;a=n.end(e)==n.pos+(n.depth-e),l=n.start(e)==n.pos-(n.depth-e),s=i9(n.node(e-1).contentMatchAt(n.indexAfter(e-1))),o.unshift(t||(a&&s?{type:s}:null)),r=e;break}if(1==e)return!1;o.unshift(null)}let c=e.tr;(e.selection instanceof eJ||e.selection instanceof eX)&&c.deleteSelection();let p=c.mapping.map(n.pos),d=eO(c.doc,p,o.length,o);if(d||(o[0]=s?{type:s}:null,d=eO(c.doc,p,o.length,o)),!d)return!1;if(c.split(p,o.length,o),!a&&l&&n.node(r).type!=s){let e=c.mapping.map(n.before(r)),t=c.doc.resolve(e);s&&n.node(r-1).canReplaceWith(t.index(),t.index()+1,s)&&c.setNodeMarkup(c.mapping.map(n.before(r)),s)}return t&&t(c.scrollIntoView()),!0}),"Mod-Enter":oe,Backspace:od,"Mod-Backspace":od,"Shift-Backspace":od,Delete:oh,"Mod-Delete":oh,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new eX(e.doc))),!0)},of={"Ctrl-h":ou.Backspace,"Alt-Backspace":ou["Mod-Backspace"],"Ctrl-d":ou.Delete,"Ctrl-Alt-Backspace":ou["Mod-Delete"],"Alt-Delete":ou["Mod-Delete"],"Alt-d":ou["Mod-Delete"],"Ctrl-a":oa,"Ctrl-e":ol};for(let e in ou)of[e]=ou[e];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):"undefined"!=typeof os&&os.platform&&os.platform();function om(e){let{state:t,transaction:n}=e,{selection:i}=n,{doc:o}=n,{storedMarks:r}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return r},get selection(){return i},get doc(){return o},get tr(){return i=n.selection,o=n.doc,r=n.storedMarks,n}}}class og{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:i}=t,{tr:o}=n,r=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{let n=t(...e)(r);return o.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(o),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:n,editor:i,state:o}=this,{view:r}=i,s=[],a=!!e,l=e||o.tr,c={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{let i=this.buildProps(l,t),o=n(...e)(i);return s.push(o),c}])),run:()=>(a||!t||l.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(l),s.every(e=>!0===e))};return c}createCan(e){let{rawCommands:t,state:n}=this,i=e||n.tr,o=this.buildProps(i,!1);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,!1)}}buildProps(e,t=!0){let{rawCommands:n,editor:i,state:o}=this,{view:r}=i,s={tr:e,editor:i,view:r,state:om({state:o,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(s)]))}};return s}}class ov{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){let n=this.callbacks[e];return n&&n.forEach(e=>e.apply(this,t)),this}off(e,t){let n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(e=>e!==t):delete this.callbacks[e]),this}once(e,t){let n=(...i)=>{this.off(e,n),t.apply(this,i)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}}function ox(e,t,n){return void 0===e.config[t]&&e.parent?ox(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?ox(e.parent,t,n):null}):e.config[t]}function oy(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function ob(e){let t=[],{nodeExtensions:n,markExtensions:i}=oy(e),o=[...n,...i],r={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage,extensions:o},i=ox(e,"addGlobalAttributes",n);i&&i().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,i])=>{t.push({type:n,name:e,attribute:{...r,...i}})})})})}),o.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},i=ox(e,"addAttributes",n);i&&Object.entries(i()).forEach(([n,i])=>{let o={...r,...i};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&(null==o?void 0:o.default)===void 0&&delete o.default,t.push({type:e.name,name:n,attribute:o})})}),t}function ow(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function ok(...e){return e.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(([e,t])=>{if(!n[e]){n[e]=t;return}if("class"===e){let i=t?String(t).split(" "):[],o=n[e]?n[e].split(" "):[],r=i.filter(e=>!o.includes(e));n[e]=[...o,...r].join(" ")}else if("style"===e){let i=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],o=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],r=new Map;o.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());r.set(t,n)}),i.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());r.set(t,n)}),n[e]=Array.from(r.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t}),n},{})}function oS(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>ok(e,t),{})}function oC(e){return"function"==typeof e}function oM(e,t,...n){return oC(e)?t?e.bind(t)(...n):e(...n):e}function oO(e,t){return"style"in e?e:{...e,getAttrs:n=>{let i=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===i)return!1;let o=t.reduce((e,t)=>{var i;let o=t.attribute.parseHTML?t.attribute.parseHTML(n):"string"!=typeof(i=n.getAttribute(t.name))?i:i.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(i):"true"===i||"false"!==i&&i;return null==o?e:{...e,[t.name]:o}},{});return{...i,...o}}}}function oN(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>!("attrs"===e&&function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function oT(e,t){return t.nodes[e]||t.marks[e]||null}function oE(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function oA(e,t){let n=et.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}let oj=(e,t=500)=>{let n="",i=e.parentOffset;return e.parent.nodesBetween(Math.max(0,i-t),i,(e,t,o,r)=>{var s,a;let l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:o,index:r}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,i-t))}),n};function oD(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class oR{constructor(e){this.find=e.find,this.handler=e.handler}}let oI=(e,t)=>{if(oD(t))return t.exec(e);let n=t(e);if(!n)return null;let i=[n.text];return i.index=n.index,i.input=e,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i};function oP(e){var t;let{editor:n,from:i,to:o,text:r,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;let c=l.state.doc.resolve(i);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let p=!1,d=oj(c)+r;return s.forEach(e=>{if(p)return;let t=oI(d,e.find);if(!t)return;let s=l.state.tr,c=om({state:l.state,transaction:s}),h={from:i-(t[0].length-r.length),to:o},{commands:u,chain:f,can:m}=new og({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:u,chain:f,can:m})&&s.steps.length&&(s.setMeta(a,{transform:s,from:i,to:o,text:r}),l.dispatch(s),p=!0)}),p}function oz(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function oL(e,t){let n={...e};return oz(e)&&oz(t)&&Object.keys(t).forEach(i=>{oz(t[i])&&oz(e[i])?n[i]=oL(e[i],t[i]):n[i]=t[i]}),n}class oB{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oM(ox(this,"addOptions",{name:this.name}))),this.storage=oM(ox(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new oB(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>oL(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new oB(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=oM(ox(t,"addOptions",{name:t.name})),t.storage=oM(ox(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){let{tr:n}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){let o=i.marks();if(!o.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;let r=o.find(e=>(null==e?void 0:e.type.name)===t.name);return r&&n.removeStoredMark(r),n.insertText(" ",i.pos),e.view.dispatch(n),!0}return!1}}class oF{constructor(e){this.find=e.find,this.handler=e.handler}}let o$=(e,t,n)=>{if(oD(t))return[...e.matchAll(t)];let i=t(e,n);return i?i.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]},oV=null,oH=e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n};class o_{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=o_.resolve(e),this.schema=function(e,t){var n;let i=ob(e),{nodeExtensions:o,markExtensions:r}=oy(e);return new q({topNode:null===(n=o.find(e=>ox(e,"topNode")))||void 0===n?void 0:n.name,nodes:Object.fromEntries(o.map(n=>{let o=i.filter(e=>e.type===n.name),r={name:n.name,options:n.options,storage:n.storage,editor:t},s=oN({...e.reduce((e,t)=>{let i=ox(t,"extendNodeSchema",r);return{...e,...i?i(n):{}}},{}),content:oM(ox(n,"content",r)),marks:oM(ox(n,"marks",r)),group:oM(ox(n,"group",r)),inline:oM(ox(n,"inline",r)),atom:oM(ox(n,"atom",r)),selectable:oM(ox(n,"selectable",r)),draggable:oM(ox(n,"draggable",r)),code:oM(ox(n,"code",r)),whitespace:oM(ox(n,"whitespace",r)),linebreakReplacement:oM(ox(n,"linebreakReplacement",r)),defining:oM(ox(n,"defining",r)),isolating:oM(ox(n,"isolating",r)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=oM(ox(n,"parseHTML",r));a&&(s.parseDOM=a.map(e=>oO(e,o)));let l=ox(n,"renderHTML",r);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:oS(e,o)}));let c=ox(n,"renderText",r);return c&&(s.toText=c),[n.name,s]})),marks:Object.fromEntries(r.map(n=>{let o=i.filter(e=>e.type===n.name),r={name:n.name,options:n.options,storage:n.storage,editor:t},s=oN({...e.reduce((e,t)=>{let i=ox(t,"extendMarkSchema",r);return{...e,...i?i(n):{}}},{}),inclusive:oM(ox(n,"inclusive",r)),excludes:oM(ox(n,"excludes",r)),group:oM(ox(n,"group",r)),spanning:oM(ox(n,"spanning",r)),code:oM(ox(n,"code",r)),attrs:Object.fromEntries(o.map(e=>{var t;return[e.name,{default:null===(t=null==e?void 0:e.attribute)||void 0===t?void 0:t.default}]}))}),a=oM(ox(n,"parseHTML",r));a&&(s.parseDOM=a.map(e=>oO(e,o)));let l=ox(n,"renderHTML",r);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:oS(e,o)})),[n.name,s]}))})}(this.extensions,t),this.setupExtensions()}static resolve(e){var t;let n=o_.sort(o_.flatten(e)),i=Array.from(new Set((t=n.map(e=>e.name)).filter((e,n)=>t.indexOf(e)!==n)));return i.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${i.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=ox(e,"addExtensions",t);return n?[e,...this.flatten(n())]:e}).flat(10)}static sort(e){return e.sort((e,t)=>{let n=ox(e,"priority")||100,i=ox(t,"priority")||100;return n>i?-1:n<i?1:0})}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:oT(t.name,this.schema)},i=ox(t,"addCommands",n);return i?{...e,...i()}:e},{})}get plugins(){let{editor:e}=this,t=o_.sort([...this.extensions].reverse()),n=[],i=[],o=t.map(t=>{let o={name:t.name,options:t.options,storage:t.storage,editor:e,type:oT(t.name,this.schema)},r=[],s=ox(t,"addKeyboardShortcuts",o),a={};if("mark"===t.type&&ox(t,"exitable",o)&&(a.ArrowRight=()=>oB.handleExit({editor:e,mark:t})),s){let t=Object.fromEntries(Object.entries(s()).map(([t,n])=>[t,()=>n({editor:e})]));a={...a,...t}}let l=new e7({props:{handleKeyDown:iW(a)}});r.push(l);let c=ox(t,"addInputRules",o);oE(t,e.options.enableInputRules)&&c&&n.push(...c());let p=ox(t,"addPasteRules",o);oE(t,e.options.enablePasteRules)&&p&&i.push(...p());let d=ox(t,"addProseMirrorPlugins",o);if(d){let e=d();r.push(...e)}return r}).flat();return[function(e){let{editor:t,rules:n}=e,i=new e7({state:{init:()=>null,apply(e,o,r){let s=e.getMeta(i);if(s)return s;let a=e.getMeta("applyInputRules");return a&&setTimeout(()=>{let{text:e}=a;"string"==typeof e||(e=oA(p.from(e),r.schema));let{from:o}=a,s=o+e.length;oP({editor:t,from:o,to:s,text:e,rules:n,plugin:i})}),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:(e,o,r,s)=>oP({editor:t,from:o,to:r,text:s,rules:n,plugin:i}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:o}=e.state.selection;o&&oP({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(e,o){if("Enter"!==o.key)return!1;let{$cursor:r}=e.state.selection;return!!r&&oP({editor:t,from:r.pos,to:r.pos,text:"\n",rules:n,plugin:i})}},isInputRules:!0});return i}({editor:e,rules:n}),...function(e){let t;let{editor:n,rules:i}=e,o=null,r=!1,s=!1,a="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{t=null}let l=({state:e,from:i,to:o,rule:r,pasteEvt:s})=>{let l=e.tr;if(function(e){let{editor:t,state:n,from:i,to:o,rule:r,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:p}=new og({editor:t,state:n}),d=[];return n.doc.nodesBetween(i,o,(e,t)=>{if(!e.isTextblock||e.type.spec.code)return;let h=Math.max(i,t),u=Math.min(o,t+e.content.size);o$(e.textBetween(h-t,u-t,void 0,""),r.find,s).forEach(e=>{if(void 0===e.index)return;let t=h+e.index+1,i=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(i)},u=r.handler({state:n,range:o,match:e,commands:l,chain:c,can:p,pasteEvent:s,dropEvent:a});d.push(u)})}),d.every(e=>null!==e)}({editor:n,state:om({state:e,transaction:l}),from:Math.max(i-1,0),to:o.b-1,rule:r,pasteEvent:s,dropEvent:t})&&l.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{t=null}return a="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,l}};return i.map(e=>new e7({view(e){let t=t=>{var i;(o=(null===(i=e.dom.parentElement)||void 0===i?void 0:i.contains(t.target))?e.dom.parentElement:null)&&(oV=n)},i=()=>{oV&&(oV=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",i),{destroy(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",i)}}},props:{handleDOMEvents:{drop:(e,n)=>{if(s=o===e.dom.parentElement,t=n,!s){let e=oV;(null==e?void 0:e.isEditable)&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;let i=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return a=t,r=!!(null==i?void 0:i.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,i)=>{let o=t[0],c="paste"===o.getMeta("uiEvent")&&!r,d="drop"===o.getMeta("uiEvent")&&!s,h=o.getMeta("applyPasteRules"),u=!!h;if(!c&&!d&&!u)return;if(u){let{text:t}=h;"string"==typeof t||(t=oA(p.from(t),i.schema));let{from:n}=h,o=n+t.length;return l({rule:e,state:i,from:n,to:{b:o},pasteEvt:oH(t)})}let f=n.doc.content.findDiffStart(i.doc.content),m=n.doc.content.findDiffEnd(i.doc.content);if("number"==typeof f&&m&&f!==m.b)return l({rule:e,state:i,from:f,to:m,pasteEvt:a})}}))}({editor:e,rules:i}),...o]}get attributes(){return ob(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=oy(this.extensions);return Object.fromEntries(t.filter(e=>!!ox(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),i={name:t.name,options:t.options,storage:t.storage,editor:e,type:ow(t.name,this.schema)},o=ox(t,"addNodeView",i);return o?[t.name,(i,r,s,a,l)=>{let c=oS(i,n);return o()({node:i,view:r,getPos:s,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]:[]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;let n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:oT(e.name,this.schema)};"mark"===e.type&&(null===(t=oM(ox(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name);let i=ox(e,"onBeforeCreate",n),o=ox(e,"onCreate",n),r=ox(e,"onUpdate",n),s=ox(e,"onSelectionUpdate",n),a=ox(e,"onTransaction",n),l=ox(e,"onFocus",n),c=ox(e,"onBlur",n),p=ox(e,"onDestroy",n);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),r&&this.editor.on("update",r),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),p&&this.editor.on("destroy",p)})}}class oq{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oM(ox(this,"addOptions",{name:this.name}))),this.storage=oM(ox(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new oq(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>oL(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new oq({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=oM(ox(t,"addOptions",{name:t.name})),t.storage=oM(ox(t,"addStorage",{name:t.name,options:t.options})),t}}function oW(e,t,n){let{from:i,to:o}=t,{blockSeparator:r="\n\n",textSerializers:s={}}=n||{},a="";return e.nodesBetween(i,o,(e,n,l,c)=>{var p;e.isBlock&&n>i&&(a+=r);let d=null==s?void 0:s[e.type.name];if(d)return l&&(a+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null===(p=null==e?void 0:e.text)||void 0===p?void 0:p.slice(Math.max(i,n)-n,o-n))}),a}function oK(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}let oU=oq.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new e7({key:new tt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:i,selection:o}=t,{ranges:r}=o,s=Math.min(...r.map(e=>e.$from.pos)),a=Math.max(...r.map(e=>e.$to.pos)),l=oK(n);return oW(i,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function oJ(e,t,n={strict:!0}){let i=Object.keys(t);return!i.length||i.every(i=>n.strict?t[i]===e[i]:oD(t[i])?t[i].test(e[i]):t[i]===e[i])}function oG(e,t,n={}){return e.find(e=>e.type===t&&oJ(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function oY(e,t,n={}){return!!oG(e,t,n)}function oQ(e,t,n){var i;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some(e=>e.type===t)||(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(e=>e.type===t)||(n=n||(null===(i=o.node.marks[0])||void 0===i?void 0:i.attrs),!oG([...o.node.marks],t,n)))return;let r=o.index,s=e.start()+o.offset,a=r+1,l=s+o.node.nodeSize;for(;r>0&&oY([...e.parent.child(r-1).marks],t,n);)r-=1,s-=e.parent.child(r).nodeSize;for(;a<e.parent.childCount&&oY([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function oX(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function oZ(e){return e instanceof eJ}function o0(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function o1(e,t=null){if(!t)return null;let n=eq.atStart(e),i=eq.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return i;let o=n.from,r=i.to;return"all"===t?eJ.create(e,o0(0,o,r),o0(e.content.size,o,r)):eJ.create(e,o0(t,o,r),o0(t,o,r))}function o2(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function o3(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}let o4=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let i=t[n];3===i.nodeType&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?e.removeChild(i):1===i.nodeType&&o4(i)}return e};function o5(e){let t=`<body>${e}</body>`;return o4(new window.DOMParser().parseFromString(t,"text/html").body)}function o6(e,t,n){if(e instanceof E||e instanceof p)return e;n={slice:!0,parseOptions:{},...n};let i="object"==typeof e&&null!==e,o="string"==typeof e;if(i)try{if(Array.isArray(e)&&e.length>0)return p.fromArray(e.map(e=>t.nodeFromJSON(e)));let i=t.nodeFromJSON(e);return n.errorOnInvalidContent&&i.check(),i}catch(i){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),o6("",t,n)}if(o){if(n.errorOnInvalidContent){let i=!1,o="",r=new q({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(i=!0,o="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?K.fromSchema(r).parseSlice(o5(e),n.parseOptions):K.fromSchema(r).parse(o5(e),n.parseOptions),n.errorOnInvalidContent&&i)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${o}`)})}let i=K.fromSchema(t);return n.slice?i.parseSlice(o5(e),n.parseOptions).content:i.parse(o5(e),n.parseOptions)}return o6("",t,n)}let o8=e=>!("type"in e);function o7(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}function o9(e,t,n={}){let{from:i,to:o,empty:r}=e.selection,s=t?ow(t,e.schema):null,a=[];e.doc.nodesBetween(i,o,(e,t)=>{if(e.isText)return;let n=Math.max(i,t),r=Math.min(o,t+e.nodeSize);a.push({node:e,from:n,to:r})});let l=o-i,c=a.filter(e=>!s||s.name===e.node.type.name).filter(e=>oJ(e.node.attrs,n,{strict:!1}));return r?!!c.length:c.reduce((e,t)=>e+t.to-t.from,0)>=l}function re(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function rt(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,i)=>(n.includes(i)||(t[i]=e[i]),t),{})}function rn(e,t,n={},i={}){return o6(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:i.errorOnInvalidContent})}function ri(e,t){let n=oX(t,e.schema),{from:i,to:o,empty:r}=e.selection,s=[];r?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(i,o,e=>{s.push(...e.marks)});let a=s.find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}function ro(e){return t=>(function(e,t){for(let n=e.depth;n>0;n-=1){let i=e.node(n);if(t(i))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:i}}})(t.$from,e)}function rr(e,t){let n=re("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){let n=ow(t,e.schema),{from:i,to:o}=e.selection,r=[];e.doc.nodesBetween(i,o,e=>{r.push(e)});let s=r.reverse().find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}(e,t):"mark"===n?ri(e,t):{}}function rs(e,t,n){let i=[];return e===t?n.resolve(e).marks().forEach(t=>{let o=oQ(n.resolve(e),t.type);o&&i.push({mark:t,...o})}):n.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&i.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),i}function ra(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{let i=e.find(e=>e.type===t&&e.name===n);return!!i&&i.attribute.keepOnSplit}))}function rl(e,t,n={}){let{empty:i,ranges:o}=e.selection,r=t?oX(t,e.schema):null;if(i)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!r||r.name===e.type.name).find(e=>oJ(e.attrs,n,{strict:!1}));let s=0,a=[];if(o.forEach(({$from:t,$to:n})=>{let i=t.pos,o=n.pos;e.doc.nodesBetween(i,o,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(i,t),r=Math.min(o,t+e.nodeSize);s+=r-n,a.push(...e.marks.map(e=>({mark:e,from:n,to:r})))})}),0===s)return!1;let l=a.filter(e=>!r||r.name===e.mark.type.name).filter(e=>oJ(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),c=a.filter(e=>!r||e.mark.type!==r&&e.mark.type.excludes(r)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+c:l)>=s}function rc(e,t){let{nodeExtensions:n}=oy(t),i=n.find(t=>t.name===e);if(!i)return!1;let o={name:i.name,options:i.options,storage:i.storage},r=oM(ox(i,"group",o));return"string"==typeof r&&r.split(" ").includes("list")}function rp(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var i;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(i=e.text)&&void 0!==i?i:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let i=!0;return e.content.forEach(e=>{!1!==i&&(rp(e,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function rd(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let i=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(i)}}let rh=(e,t)=>{let n=ro(e=>e.type===t)(e.selection);if(!n)return!0;let i=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===i)return!0;let o=e.doc.nodeAt(i);return!(n.node.type===(null==o?void 0:o.type)&&eN(e.doc,n.pos))||(e.join(n.pos),!0)},ru=(e,t)=>{let n=ro(e=>e.type===t)(e.selection);if(!n)return!0;let i=e.doc.resolve(n.start).after(n.depth);if(void 0===i)return!0;let o=e.doc.nodeAt(i);return!(n.node.type===(null==o?void 0:o.type)&&eN(e.doc,i))||(e.join(i),!0)};var rf=Object.freeze({__proto__:null,blur:()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null===(n=null==window?void 0:window.getSelection())||void 0===n||n.removeAllRanges())}),!0),clearContent:(e=!1)=>({commands:t})=>t.setContent("",e),clearNodes:()=>({state:e,tr:t,dispatch:n})=>{let{selection:i}=t,{ranges:o}=i;return!n||(o.forEach(({$from:n,$to:i})=>{e.doc.nodesBetween(n.pos,i.pos,(e,n)=>{if(e.type.isText)return;let{doc:i,mapping:o}=t,r=i.resolve(o.map(n)),s=i.resolve(o.map(n+e.nodeSize)),a=r.blockRange(s);if(!a)return;let l=ew(a);if(e.type.isTextblock){let{defaultType:e}=r.parent.contentMatchAt(r.index());t.setNodeMarkup(a.start,e)}(l||0===l)&&t.lift(a,l)})}),!0)},command:e=>t=>e(t),createParagraphNear:()=>({state:e,dispatch:t})=>ot(e,t),cut:(e,t)=>({editor:n,tr:i})=>{let{state:o}=n,r=o.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);let s=i.mapping.map(t);return i.insert(s,r.content),i.setSelection(new eJ(i.doc.resolve(Math.max(s-1,0)))),!0},deleteCurrentNode:()=>({tr:e,dispatch:t})=>{let{selection:n}=e,i=n.$anchor.node();if(i.content.size>0)return!1;let o=e.selection.$anchor;for(let n=o.depth;n>0;n-=1)if(o.node(n).type===i.type){if(t){let t=o.before(n),i=o.after(n);e.delete(t,i).scrollIntoView()}return!0}return!1},deleteNode:e=>({tr:t,state:n,dispatch:i})=>{let o=ow(e,n.schema),r=t.selection.$anchor;for(let e=r.depth;e>0;e-=1)if(r.node(e).type===o){if(i){let n=r.before(e),i=r.after(e);t.delete(n,i).scrollIntoView()}return!0}return!1},deleteRange:e=>({tr:t,dispatch:n})=>{let{from:i,to:o}=e;return n&&t.delete(i,o),!0},deleteSelection:()=>({state:e,dispatch:t})=>iK(e,t),enter:()=>({commands:e})=>e.keyboardShortcut("Enter"),exitCode:()=>({state:e,dispatch:t})=>oe(e,t),extendMarkRange:(e,t={})=>({tr:n,state:i,dispatch:o})=>{let r=oX(e,i.schema),{doc:s,selection:a}=n,{$from:l,from:c,to:p}=a;if(o){let e=oQ(l,r,t);if(e&&e.from<=c&&e.to>=p){let t=eJ.create(s,e.from,e.to);n.setSelection(t)}}return!0},first:e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:(e=null,t={})=>({editor:n,view:i,tr:o,dispatch:r})=>{t={scrollIntoView:!0,...t};let s=()=>{(o3()||o2())&&i.dom.focus(),requestAnimationFrame(()=>{!n.isDestroyed&&(i.focus(),"undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!o3()&&!o2()&&i.dom.focus({preventScroll:!0}))})};if(i.hasFocus()&&null===e||!1===e)return!0;if(r&&null===e&&!oZ(n.state.selection))return s(),!0;let a=o1(o.doc,e)||n.state.selection,l=n.state.selection.eq(a);return r&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},forEach:(e,t)=>n=>e.every((e,i)=>t(e,{...n,index:i})),insertContent:(e,t)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),insertContentAt:(e,t,n)=>({tr:i,dispatch:o,editor:r})=>{var s;if(o){let o,a;n={parseOptions:r.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l=e=>{r.emit("contentError",{editor:r,error:e,disableCollaboration:()=>{r.storage.collaboration&&(r.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!r.options.enableContentCheck&&r.options.emitContentError)try{o6(t,r.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(e){l(e)}try{o=o6(t,r.schema,{parseOptions:c,errorOnInvalidContent:null!==(s=n.errorOnInvalidContent)&&void 0!==s?s:r.options.enableContentCheck})}catch(e){return l(e),!1}let{from:d,to:h}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},u=!0,f=!0;if((o8(o)?o:[o]).forEach(e=>{e.check(),u=!!u&&e.isText&&0===e.marks.length,f=!!f&&e.isBlock}),d===h&&f){let{parent:e}=i.doc.resolve(d);!e.isTextblock||e.type.spec.code||e.childCount||(d-=1,h+=1)}if(u){if(Array.isArray(t))a=t.map(e=>e.text||"").join("");else if(t instanceof p){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),a=e}else a="object"==typeof t&&t&&t.text?t.text:t;i.insertText(a,d,h)}else a=o,i.replaceWith(d,h,a);n.updateSelection&&function(e,t,n){let i=e.steps.length-1;if(i<t)return;let o=e.steps[i];if(!(o instanceof ev||o instanceof ex))return;let r=e.mapping.maps[i],s=0;r.forEach((e,t,n,i)=>{0===s&&(s=i)}),e.setSelection(eq.near(e.doc.resolve(s),-1))}(i,i.steps.length-1,0),n.applyInputRules&&i.setMeta("applyInputRules",{from:d,text:a}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:d,text:a})}return!0},joinBackward:()=>({state:e,dispatch:t})=>iJ(e,t),joinDown:()=>({state:e,dispatch:t})=>i6(e,t),joinForward:()=>({state:e,dispatch:t})=>i2(e,t),joinItemBackward:()=>({state:e,dispatch:t,tr:n})=>{try{let i=eE(e.doc,e.selection.$from.pos,-1);if(null==i)return!1;return n.join(i,2),t&&t(n),!0}catch{return!1}},joinItemForward:()=>({state:e,dispatch:t,tr:n})=>{try{let i=eE(e.doc,e.selection.$from.pos,1);if(null==i)return!1;return n.join(i,2),t&&t(n),!0}catch{return!1}},joinTextblockBackward:()=>({state:e,dispatch:t})=>iG(e,t),joinTextblockForward:()=>({state:e,dispatch:t})=>iY(e,t),joinUp:()=>({state:e,dispatch:t})=>i5(e,t),keyboardShortcut:e=>({editor:t,view:n,tr:i,dispatch:o})=>{let r=(function(e){let t,n,i,o;let r=e.split(/-(?!$)/),s=r[r.length-1];"Space"===s&&(s=" ");for(let e=0;e<r.length-1;e+=1){let s=r[e];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))t=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))i=!0;else if(/^mod$/i.test(s))o3()||o7()?o=!0:n=!0;else throw Error(`Unrecognized modifier name: ${s}`)}return t&&(s=`Alt-${s}`),n&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s})(e).split(/-(?!$)/),s=r.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),a=new KeyboardEvent("keydown",{key:"Space"===s?" ":s,altKey:r.includes("Alt"),ctrlKey:r.includes("Ctrl"),metaKey:r.includes("Meta"),shiftKey:r.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,a))});return null==l||l.steps.forEach(e=>{let t=e.map(i.mapping);t&&o&&i.maybeStep(t)}),!0},lift:(e,t={})=>({state:n,dispatch:i})=>{let o=ow(e,n.schema);return!!o9(n,o,t)&&i8(n,i)},liftEmptyBlock:()=>({state:e,dispatch:t})=>on(e,t),liftListItem:e=>({state:t,dispatch:n})=>(function(e){return function(t,n){let{$from:i,$to:o}=t.selection,r=i.blockRange(o,t=>t.childCount>0&&t.firstChild.type==e);return!!r&&(!n||(i.node(r.depth-1).type==e?function(e,t,n,i){let o=e.tr,r=i.end,s=i.$to.end(i.depth);r<s&&(o.step(new ex(r-1,s,r,s,new g(p.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new N(o.doc.resolve(i.$from.pos),o.doc.resolve(s),i.depth));let a=ew(i);if(null==a)return!1;o.lift(i,a);let l=o.doc.resolve(o.mapping.map(r,-1)-1);return eN(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),t(o.scrollIntoView()),!0}(t,n,e,r):function(e,t,n){let i=e.tr,o=n.parent;for(let e=n.end,t=n.endIndex-1,r=n.startIndex;t>r;t--)e-=o.child(t).nodeSize,i.delete(e-1,e+1);let r=i.doc.resolve(n.start),s=r.nodeAfter;if(i.mapping.map(n.end)!=n.start+r.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==o.childCount,c=r.node(-1),d=r.index(-1);if(!c.canReplace(d+(a?0:1),d+1,s.content.append(l?p.empty:p.from(o))))return!1;let h=r.pos,u=h+s.nodeSize;return i.step(new ex(h-(a?1:0),u+(l?1:0),h+1,u-1,new g((a?p.empty:p.from(o.copy(p.empty))).append(l?p.empty:p.from(o.copy(p.empty))),a?0:1,l?0:1),a?0:1)),t(i.scrollIntoView()),!0}(t,n,r)))}})(ow(e,t.schema))(t,n),newlineInCode:()=>({state:e,dispatch:t})=>i7(e,t),resetAttributes:(e,t)=>({tr:n,state:i,dispatch:o})=>{let r=null,s=null,a=re("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(r=ow(e,i.schema)),"mark"===a&&(s=oX(e,i.schema)),o&&n.selection.ranges.forEach(e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,i)=>{r&&r===e.type&&n.setNodeMarkup(i,void 0,rt(e.attrs,t)),s&&e.marks.length&&e.marks.forEach(o=>{s===o.type&&n.addMark(i,i+e.nodeSize,s.create(rt(o.attrs,t)))})})}),!0)},scrollIntoView:()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),selectAll:()=>({tr:e,dispatch:t})=>{if(t){let t=new eX(e.doc);e.setSelection(t)}return!0},selectNodeBackward:()=>({state:e,dispatch:t})=>iZ(e,t),selectNodeForward:()=>({state:e,dispatch:t})=>i3(e,t),selectParentNode:()=>({state:e,dispatch:t})=>oi(e,t),selectTextblockEnd:()=>({state:e,dispatch:t})=>ol(e,t),selectTextblockStart:()=>({state:e,dispatch:t})=>oa(e,t),setContent:(e,t=!1,n={},i={})=>({editor:o,tr:r,dispatch:s,commands:a})=>{var l,c;let{doc:p}=r;if("full"!==n.preserveWhitespace){let a=rn(e,o.schema,n,{errorOnInvalidContent:null!==(l=i.errorOnInvalidContent)&&void 0!==l?l:o.options.enableContentCheck});return s&&r.replaceWith(0,p.content.size,a).setMeta("preventUpdate",!t),!0}return s&&r.setMeta("preventUpdate",!t),a.insertContentAt({from:0,to:p.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(c=i.errorOnInvalidContent)&&void 0!==c?c:o.options.enableContentCheck})},setMark:(e,t={})=>({tr:n,state:i,dispatch:o})=>{let{selection:r}=n,{empty:s,ranges:a}=r,l=oX(e,i.schema);if(o){if(s){let e=ri(i,l);n.addStoredMark(l.create({...e,...t}))}else a.forEach(e=>{let o=e.$from.pos,r=e.$to.pos;i.doc.nodesBetween(o,r,(e,i)=>{let s=Math.max(i,o),a=Math.min(i+e.nodeSize,r);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(s,a,l.create({...e.attrs,...t}))}):n.addMark(s,a,l.create(t))})})}return function(e,t,n){var i;let{selection:o}=t,r=null;if(oZ(o)&&(r=o.$cursor),r){let t=null!==(i=e.storedMarks)&&void 0!==i?i:r.marks();return!!n.isInSet(t)||!t.some(e=>e.type.excludes(n))}let{ranges:s}=o;return s.some(({$from:t,$to:i})=>{let o=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,i.pos,(e,t,i)=>{if(o)return!1;if(e.isInline){let t=!i||i.type.allowsMarkType(n),r=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));o=t&&r}return!o}),o})}(i,n,l)},setMeta:(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),setNode:(e,t={})=>({state:n,dispatch:i,chain:o})=>{let r;let s=ow(e,n.schema);return(n.selection.$anchor.sameParent(n.selection.$head)&&(r=n.selection.$anchor.parent.attrs),s.isTextblock)?o().command(({commands:e})=>!!oc(s,{...r,...t})(n)||e.clearNodes()).command(({state:e})=>oc(s,{...r,...t})(e,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection:e=>({tr:t,dispatch:n})=>{if(n){let{doc:n}=t,i=o0(e,0,n.content.size),o=eY.create(n,i);t.setSelection(o)}return!0},setTextSelection:e=>({tr:t,dispatch:n})=>{if(n){let{doc:n}=t,{from:i,to:o}="number"==typeof e?{from:e,to:e}:e,r=eJ.atStart(n).from,s=eJ.atEnd(n).to,a=o0(i,r,s),l=o0(o,r,s),c=eJ.create(n,a,l);t.setSelection(c)}return!0},sinkListItem:e=>({state:t,dispatch:n})=>(function(e){return function(t,n){let{$from:i,$to:o}=t.selection,r=i.blockRange(o,t=>t.childCount>0&&t.firstChild.type==e);if(!r)return!1;let s=r.startIndex;if(0==s)return!1;let a=r.parent,l=a.child(s-1);if(l.type!=e)return!1;if(n){let i=l.lastChild&&l.lastChild.type==a.type,o=p.from(i?e.create():null),s=new g(p.from(e.create(null,p.from(a.type.create(null,o)))),i?3:1,0),c=r.start,d=r.end;n(t.tr.step(new ex(c-(i?3:1),d,c,d,s,1,!0)).scrollIntoView())}return!0}})(ow(e,t.schema))(t,n),splitBlock:({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:i,editor:o})=>{let{selection:r,doc:s}=t,{$from:a,$to:l}=r,c=ra(o.extensionManager.attributes,a.node().type.name,a.node().attrs);if(r instanceof eY&&r.node.isBlock)return!!(a.parentOffset&&eO(s,a.pos))&&(i&&(e&&rd(n,o.extensionManager.splittableMarks),t.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;let p=l.parentOffset===l.parent.content.size,d=0===a.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(a.node(-1).contentMatchAt(a.indexAfter(-1))),h=p&&d?[{type:d,attrs:c}]:void 0,u=eO(t.doc,t.mapping.map(a.pos),1,h);if(!h&&!u&&eO(t.doc,t.mapping.map(a.pos),1,d?[{type:d}]:void 0)&&(u=!0,h=d?[{type:d,attrs:c}]:void 0),i){if(u&&(r instanceof eJ&&t.deleteSelection(),t.split(t.mapping.map(a.pos),1,h),d&&!p&&!a.parentOffset&&a.parent.type!==d)){let e=t.mapping.map(a.before()),n=t.doc.resolve(e);a.node(-1).canReplaceWith(n.index(),n.index()+1,d)&&t.setNodeMarkup(t.mapping.map(a.before()),d)}e&&rd(n,o.extensionManager.splittableMarks),t.scrollIntoView()}return u},splitListItem:(e,t={})=>({tr:n,state:i,dispatch:o,editor:r})=>{var s;let a=ow(e,i.schema),{$from:l,$to:c}=i.selection,d=i.selection.node;if(d&&d.isBlock||l.depth<2||!l.sameParent(c))return!1;let h=l.node(-1);if(h.type!==a)return!1;let u=r.extensionManager.attributes;if(0===l.parent.content.size&&l.node(-1).childCount===l.indexAfter(-1)){if(2===l.depth||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let e=p.empty,i=l.index(-1)?1:l.index(-2)?2:3;for(let t=l.depth-i;t>=l.depth-3;t-=1)e=p.from(l.node(t).copy(e));let o=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,r={...ra(u,l.node().type.name,l.node().attrs),...t},c=(null===(s=a.contentMatch.defaultType)||void 0===s?void 0:s.createAndFill(r))||void 0;e=e.append(p.from(a.createAndFill(null,c)||void 0));let d=l.before(l.depth-(i-1));n.replace(d,l.after(-o),new g(e,4-i,0));let h=-1;n.doc.nodesBetween(d,n.doc.content.size,(e,t)=>{if(h>-1)return!1;e.isTextblock&&0===e.content.size&&(h=t+1)}),h>-1&&n.setSelection(eJ.near(n.doc.resolve(h))),n.scrollIntoView()}return!0}let f=c.pos===l.end()?h.contentMatchAt(0).defaultType:null,m={...ra(u,h.type.name,h.attrs),...t},v={...ra(u,l.node().type.name,l.node().attrs),...t};if(n.delete(l.pos,c.pos),!eO(n.doc,l.pos,2))return!1;if(o){let{selection:e,storedMarks:t}=i,{splittableMarks:s}=r.extensionManager,c=t||e.$to.parentOffset&&e.$from.marks();if(n.split(l.pos,2,f?[{type:a,attrs:m},{type:f,attrs:v}]:[{type:a,attrs:m}]).scrollIntoView(),!c||!o)return!0;let p=c.filter(e=>s.includes(e.type.name));n.ensureMarks(p)}return!0},toggleList:(e,t,n,i={})=>({editor:o,tr:r,state:s,dispatch:a,chain:l,commands:c,can:p})=>{let{extensions:d,splittableMarks:h}=o.extensionManager,u=ow(e,s.schema),f=ow(t,s.schema),{selection:m,storedMarks:g}=s,{$from:v,$to:x}=m,y=v.blockRange(x),b=g||m.$to.parentOffset&&m.$from.marks();if(!y)return!1;let w=ro(e=>rc(e.type.name,d))(m);if(y.depth>=1&&w&&y.depth-w.depth<=1){if(w.node.type===u)return c.liftListItem(f);if(rc(w.node.type.name,d)&&u.validContent(w.node.content)&&a)return l().command(()=>(r.setNodeMarkup(w.pos,u),!0)).command(()=>rh(r,u)).command(()=>ru(r,u)).run()}return n&&b&&a?l().command(()=>{let e=p().wrapInList(u,i),t=b.filter(e=>h.includes(e.type.name));return r.ensureMarks(t),!!e||c.clearNodes()}).wrapInList(u,i).command(()=>rh(r,u)).command(()=>ru(r,u)).run():l().command(()=>!!p().wrapInList(u,i)||c.clearNodes()).wrapInList(u,i).command(()=>rh(r,u)).command(()=>ru(r,u)).run()},toggleMark:(e,t={},n={})=>({state:i,commands:o})=>{let{extendEmptyMarkRange:r=!1}=n,s=oX(e,i.schema);return rl(i,s,t)?o.unsetMark(s,{extendEmptyMarkRange:r}):o.setMark(s,t)},toggleNode:(e,t,n={})=>({state:i,commands:o})=>{let r;let s=ow(e,i.schema),a=ow(t,i.schema),l=o9(i,s,n);return(i.selection.$anchor.sameParent(i.selection.$head)&&(r=i.selection.$anchor.parent.attrs),l)?o.setNode(a,r):o.setNode(s,{...r,...n})},toggleWrap:(e,t={})=>({state:n,commands:i})=>{let o=ow(e,n.schema);return o9(n,o,t)?i.lift(o):i.wrapIn(o,t)},undoInputRule:()=>({state:e,dispatch:t})=>{let n=e.plugins;for(let i=0;i<n.length;i+=1){let o;let r=n[i];if(r.spec.isInputRules&&(o=r.getState(e))){if(t){let t=e.tr,n=o.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(o.text){let n=t.doc.resolve(o.from).marks();t.replaceWith(o.from,o.to,e.schema.text(o.text,n))}else t.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>({tr:e,dispatch:t})=>{let{selection:n}=e,{empty:i,ranges:o}=n;return!!i||(t&&o.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0)},unsetMark:(e,t={})=>({tr:n,state:i,dispatch:o})=>{var r;let{extendEmptyMarkRange:s=!1}=t,{selection:a}=n,l=oX(e,i.schema),{$from:c,empty:p,ranges:d}=a;if(!o)return!0;if(p&&s){let{from:e,to:t}=a,i=null===(r=c.marks().find(e=>e.type===l))||void 0===r?void 0:r.attrs,o=oQ(c,l,i);o&&(e=o.from,t=o.to),n.removeMark(e,t,l)}else d.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},updateAttributes:(e,t={})=>({tr:n,state:i,dispatch:o})=>{let r=null,s=null,a=re("string"==typeof e?e:e.name,i.schema);return!!a&&("node"===a&&(r=ow(e,i.schema)),"mark"===a&&(s=oX(e,i.schema)),o&&n.selection.ranges.forEach(e=>{let o,a,l,c;let p=e.$from.pos,d=e.$to.pos;n.selection.empty?i.doc.nodesBetween(p,d,(e,t)=>{r&&r===e.type&&(l=Math.max(t,p),c=Math.min(t+e.nodeSize,d),o=t,a=e)}):i.doc.nodesBetween(p,d,(e,i)=>{i<p&&r&&r===e.type&&(l=Math.max(i,p),c=Math.min(i+e.nodeSize,d),o=i,a=e),i>=p&&i<=d&&(r&&r===e.type&&n.setNodeMarkup(i,void 0,{...e.attrs,...t}),s&&e.marks.length&&e.marks.forEach(o=>{if(s===o.type){let r=Math.max(i,p),a=Math.min(i+e.nodeSize,d);n.addMark(r,a,s.create({...o.attrs,...t}))}}))}),a&&(void 0!==o&&n.setNodeMarkup(o,void 0,{...a.attrs,...t}),s&&a.marks.length&&a.marks.forEach(e=>{s===e.type&&n.addMark(l,c,s.create({...e.attrs,...t}))}))}),!0)},wrapIn:(e,t={})=>({state:n,dispatch:i})=>(function(e,t=null){return function(n,i){let{$from:o,$to:r}=n.selection,s=o.blockRange(r),a=s&&ek(s,e,t);return!!a&&(i&&i(n.tr.wrap(s,a).scrollIntoView()),!0)}})(ow(e,n.schema),t)(n,i),wrapInList:(e,t={})=>({state:n,dispatch:i})=>(function(e,t=null){return function(n,i){let{$from:o,$to:r}=n.selection,s=o.blockRange(r);if(!s)return!1;let a=i?n.tr:null;return!!function(e,t,n,i=null){let o=!1,r=t,s=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&0==t.startIndex){if(0==t.$from.index(t.depth-1))return!1;let e=s.resolve(t.start-2);r=new N(e,e,t.depth),t.endIndex<t.parent.childCount&&(t=new N(t.$from,s.resolve(t.$to.end(t.depth)),t.depth)),o=!0}let a=ek(r,n,i,t);return!!a&&(e&&function(e,t,n,i,o){let r=p.empty;for(let e=n.length-1;e>=0;e--)r=p.from(n[e].type.create(n[e].attrs,r));e.step(new ex(t.start-(i?2:0),t.end,t.start,t.end,new g(r,0,0),n.length,!0));let s=0;for(let e=0;e<n.length;e++)n[e].type==o&&(s=e+1);let a=n.length-s,l=t.start+n.length-(i?2:0),c=t.parent;for(let n=t.startIndex,i=t.endIndex,o=!0;n<i;n++,o=!1)!o&&eO(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(n).nodeSize}(e,t,a,o,n),!0)}(a,s,e,t)&&(i&&i(a.scrollIntoView()),!0)}})(ow(e,n.schema),t)(n,i)});let rm=oq.create({name:"commands",addCommands:()=>({...rf})}),rg=oq.create({name:"drop",addProseMirrorPlugins(){return[new e7({key:new tt("tiptapDrop"),props:{handleDrop:(e,t,n,i)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:i})}}})]}}),rv=oq.create({name:"editable",addProseMirrorPlugins(){return[new e7({key:new tt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),rx=new tt("focusEvents"),ry=oq.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new e7({key:rx,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let i=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1},blur:(t,n)=>{e.isFocused=!1;let i=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(i),!1}}}})]}}),rb=oq.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{let{selection:n,doc:i}=t,{empty:o,$anchor:r}=n,{pos:s,parent:a}=r,l=r.parent.isTextblock&&s>0?t.doc.resolve(s-1):r,c=l.parent.type.spec.isolating,p=r.pos-r.parentOffset,d=c&&1===l.parent.childCount?p===r.pos:eq.atStart(i).from===s;return!!o&&!!a.type.isTextblock&&!a.textContent.length&&!!d&&(!d||"paragraph"!==r.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...n},o={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return o3()||o7()?o:i},addProseMirrorPlugins(){return[new e7({key:new tt("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;let i=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),o=e.some(e=>e.getMeta("preventClearDocument"));if(!i||o)return;let{empty:r,from:s,to:a}=t.selection,l=eq.atStart(t.doc).from,c=eq.atEnd(t.doc).to;if(r||!(s===l&&a===c)||!rp(n.doc))return;let p=n.tr,d=om({state:n,transaction:p}),{commands:h}=new og({editor:this.editor,state:d});if(h.clearNodes(),p.steps.length)return p}})]}}),rw=oq.create({name:"paste",addProseMirrorPlugins(){return[new e7({key:new tt("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),rk=oq.create({name:"tabindex",addProseMirrorPlugins(){return[new e7({key:new tt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class rS{get name(){return this.node.type.name}constructor(e,t,n=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;let e=this.resolvedPos.start(this.resolvedPos.depth-1);return new rS(this.resolvedPos.doc.resolve(e),this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new rS(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new rS(e,this.editor)}get children(){let e=[];return this.node.content.forEach((t,n)=>{let i=t.isBlock&&!t.isTextblock,o=t.isAtom&&!t.isText,r=this.pos+n+(o?0:1);if(r<0||r>this.resolvedPos.doc.nodeSize-2)return;let s=this.resolvedPos.doc.resolve(r);if(!i&&s.depth<=this.depth)return;let a=new rS(s,this.editor,i,i?t:null);i&&(a.actualDepth=this.depth+1),e.push(new rS(s,this.editor,i,i?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){let e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,i=this.parent;for(;i&&!n;){if(i.node.type.name===e){if(Object.keys(t).length>0){let e=i.node.attrs,n=Object.keys(t);for(let i=0;i<n.length;i+=1){let o=n[i];if(e[o]!==t[o])break}}else n=i}i=i.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let i=[];if(!this.children||0===this.children.length)return i;let o=Object.keys(t);return this.children.forEach(r=>{(!n||!(i.length>0))&&(r.node.type.name===e&&o.every(e=>t[e]===r.node.attrs[e])&&i.push(r),n&&i.length>0||(i=i.concat(r.querySelectorAll(e,t,n))))}),i}setAttribute(e){let{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}let rC=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;class rM extends ov{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:t,moved:n})=>this.options.onDrop(e,t,n)),this.on("paste",({event:e,slice:t})=>this.options.onPaste(e,t)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){let i=document.querySelector("style[data-tiptap-style]");if(null!==i)return i;let o=document.createElement("style");return t&&o.setAttribute("nonce",t),o.setAttribute("data-tiptap-style",""),o.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(o),o}(rC,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){let n=oC(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;let t=this.state.plugins,n=t;if([].concat(e).forEach(e=>{let t="string"==typeof e?`${e}$`:e.key;n=n.filter(e=>!e.key.startsWith(t))}),t.length===n.length)return;let i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}createExtensionManager(){var e,t;let n=[...this.options.enableCoreExtensions?[rv,oU.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),rm,ry,rb,rk,rg,rw].filter(e=>"object"!=typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name]):[],...this.options.extensions].filter(e=>["extension","node","mark"].includes(null==e?void 0:e.type));this.extensionManager=new o_(n,this)}createCommandManager(){this.commandManager=new og({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=rn(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>"collaboration"!==e.name),this.createExtensionManager()}}),t=rn(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let n=o1(t,this.options.autofocus);this.view=new iA(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...null===(e=this.options.editorProps)||void 0===e?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:e8.create({doc:t,selection:n||void 0})});let i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass(),this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;let t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)});return}let t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});let i=e.getMeta("focus"),o=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),o&&this.emit("blur",{editor:this,event:o.event,transaction:e}),!e.docChanged||e.getMeta("preventUpdate")||this.emit("update",{editor:this,transaction:e})}getAttributes(e){return rr(this.state,e)}isActive(e,t){let n="string"==typeof e?e:null,i="string"==typeof e?t:e;return function(e,t,n={}){if(!t)return o9(e,null,n)||rl(e,null,n);let i=re(t,e.schema);return"node"===i?o9(e,t,n):"mark"===i&&rl(e,t,n)}(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return oA(this.state.doc.content,this.schema)}getText(e){let{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return function(e,t){let n={from:0,to:e.content.size};return oW(e,n,t)}(this.state.doc,{blockSeparator:t,textSerializers:{...oK(this.schema),...n}})}get isEmpty(){return rp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){return new rS(this.state.doc.resolve(e),this)}get $doc(){return this.$pos(0)}}function rO(e){return new oR({find:e.find,handler:({state:t,range:n,match:i})=>{let o=oM(e.getAttributes,void 0,i);if(!1===o||null===o)return null;let{tr:r}=t,s=i[i.length-1],a=i[0];if(s){let i=a.search(/\S/),l=n.from+a.indexOf(s),c=l+s.length;if(rs(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;c<n.to&&r.delete(c,n.to),l>n.from&&r.delete(n.from+i,l);let p=n.from+i+s.length;r.addMark(n.from+i,p,e.type.create(o||{})),r.removeStoredMark(e.type)}}})}function rN(e){return new oR({find:e.find,handler:({state:t,range:n,match:i})=>{let o=oM(e.getAttributes,void 0,i)||{},{tr:r}=t,s=n.from,a=n.to,l=e.type.create(o);if(i[1]){let e=s+i[0].lastIndexOf(i[1]);e>a?e=a:a=e+i[1].length;let t=i[0][i[0].length-1];r.insertText(t,s+i[0].length-1),r.replaceWith(e,a,l)}else if(i[0]){let t=e.type.isInline?s:s-1;r.insert(t,e.type.create(o)).delete(r.mapping.map(s),r.mapping.map(a))}r.scrollIntoView()}})}function rT(e){return new oR({find:e.find,handler:({state:t,range:n,match:i})=>{let o=t.doc.resolve(n.from),r=oM(e.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,r)}})}function rE(e){return new oR({find:e.find,handler:({state:t,range:n,match:i,chain:o})=>{let r=oM(e.getAttributes,void 0,i)||{},s=t.tr.delete(n.from,n.to),a=s.doc.resolve(n.from).blockRange(),l=a&&ek(a,e.type,r);if(!l)return null;if(s.wrap(a,l),e.keepMarks&&e.editor){let{selection:n,storedMarks:i}=t,{splittableMarks:o}=e.editor.extensionManager,r=i||n.$to.parentOffset&&n.$from.marks();if(r){let e=r.filter(e=>o.includes(e.type.name));s.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";o().updateAttributes(t,r).run()}let c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&eN(s.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(i,c))&&s.join(n.from-1)}})}class rA{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=oM(ox(this,"addOptions",{name:this.name}))),this.storage=oM(ox(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new rA(e)}configure(e={}){let t=this.extend({...this.config,addOptions:()=>oL(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new rA(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=oM(ox(t,"addOptions",{name:t.name})),t.storage=oM(ox(t,"addStorage",{name:t.name,options:t.options})),t}}function rj(e){return new oF({find:e.find,handler:({state:t,range:n,match:i,pasteEvent:o})=>{let r=oM(e.getAttributes,void 0,i,o);if(!1===r||null===r)return null;let{tr:s}=t,a=i[i.length-1],l=i[0],c=n.to;if(a){let i=l.search(/\S/),o=n.from+l.indexOf(a),p=o+a.length;if(rs(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>o).length)return null;p<n.to&&s.delete(p,n.to),o>n.from&&s.delete(n.from+i,o),c=n.from+i+a.length,s.addMark(n.from+i,c,e.type.create(r||{})),s.removeStoredMark(e.type)}}})}var rD={exports:{}},rR={};rD.exports=function(){if(i)return rR;i=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=s.useState,n=s.useEffect,o=s.useLayoutEffect,r=s.useDebugValue;function a(t){var n=t.getSnapshot;t=t.value;try{var i=n();return!e(t,i)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,i){var s=i(),l=t({inst:{value:s,getSnapshot:i}}),c=l[0].inst,p=l[1];return o(function(){c.value=s,c.getSnapshot=i,a(c)&&p({inst:c})},[e,s,i]),n(function(){return a(c)&&p({inst:c}),e(function(){a(c)&&p({inst:c})})},[e]),r(s),s};return rR.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:l,rR}();var rI=rD.exports;let rP=(...e)=>t=>{e.forEach(e=>{"function"==typeof e?e(t):e&&(e.current=t)})},rz=({contentComponent:e})=>{let t=rI.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return s.createElement(s.Fragment,null,Object.values(t))};class rL extends s.Component{constructor(e){var t;super(e),this.editorContentRef=s.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(null===(t=e.editor)||void 0===t?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){let e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;let t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){let e=new Set,t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,i){t={...t,[n]:l.createPortal(i.reactElement,i.element,n)},e.forEach(e=>e())},removeRenderer(n){let i={...t};delete i[n],t=i,e.forEach(e=>e())}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){let e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;let t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){let{editor:e,innerRef:t,...n}=this.props;return s.createElement(s.Fragment,null,s.createElement("div",{ref:rP(t,this.editorContentRef),...n}),(null==e?void 0:e.contentComponent)&&s.createElement(rz,{contentComponent:e.contentComponent}))}}let rB=(0,s.forwardRef)((e,t)=>{let n=s.useMemo(()=>Math.floor(4294967295*Math.random()).toString(),[e.editor]);return s.createElement(rL,{key:n,innerRef:t,...e})}),rF=s.memo(rB);var r$=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(o of t.entries())if(!n.has(o[0]))return!1;for(o of t.entries())if(!e(o[1],n.get(o[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(o of t.entries())if(!n.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(t[o]!==n[o])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,r[o]))return!1;for(o=i;0!=o--;){var i,o,r,s=r[o];if(("_owner"!==s||!t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}),rV={exports:{}},rH={};rV.exports=function(){if(o)return rH;o=1;var e="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},t=rI.useSyncExternalStore,n=s.useRef,i=s.useEffect,r=s.useMemo,a=s.useDebugValue;return rH.useSyncExternalStoreWithSelector=function(o,s,l,c,p){var d=n(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;var u=t(o,(d=r(function(){function t(t){if(!o){if(o=!0,n=t,t=c(t),void 0!==p&&h.hasValue){var r=h.value;if(p(r,t))return i=r}return i=t}if(r=i,e(n,t))return r;var s=c(t);return void 0!==p&&p(r,s)?r:(n=t,i=s)}var n,i,o=!1,r=void 0===l?null:l;return[function(){return t(s())},null===r?void 0:function(){return t(r())}]},[s,l,c,p]))[0],d[1]);return i(function(){h.hasValue=!0,h.value=u},[u]),a(u),u},rH}();var r_=rV.exports;let rq="undefined"!=typeof window?s.useLayoutEffect:s.useEffect;class rW{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){let e=()=>{this.transactionNumber+=1,this.subscribers.forEach(e=>e())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}}let rK="undefined"==typeof window,rU=rK||!!("undefined"!=typeof window&&window.next);class rJ{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return void 0===this.options.current.immediatelyRender?rK||rU?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){return new rM({...this.options.current,onBeforeCreate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onBeforeCreate)||void 0===n?void 0:n.call(t,...e)},onBlur:(...e)=>{var t,n;return null===(n=(t=this.options.current).onBlur)||void 0===n?void 0:n.call(t,...e)},onCreate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onCreate)||void 0===n?void 0:n.call(t,...e)},onDestroy:(...e)=>{var t,n;return null===(n=(t=this.options.current).onDestroy)||void 0===n?void 0:n.call(t,...e)},onFocus:(...e)=>{var t,n;return null===(n=(t=this.options.current).onFocus)||void 0===n?void 0:n.call(t,...e)},onSelectionUpdate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(t,...e)},onTransaction:(...e)=>{var t,n;return null===(n=(t=this.options.current).onTransaction)||void 0===n?void 0:n.call(t,...e)},onUpdate:(...e)=>{var t,n;return null===(n=(t=this.options.current).onUpdate)||void 0===n?void 0:n.call(t,...e)},onContentError:(...e)=>{var t,n;return null===(n=(t=this.options.current).onContentError)||void 0===n?void 0:n.call(t,...e)},onDrop:(...e)=>{var t,n;return null===(n=(t=this.options.current).onDrop)||void 0===n?void 0:n.call(t,...e)},onPaste:(...e)=>{var t,n;return null===(n=(t=this.options.current).onPaste)||void 0===n?void 0:n.call(t,...e)}})}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>!!["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)||("extensions"===n&&e.extensions&&t.extensions?e.extensions.length===t.extensions.length&&e.extensions.every((e,n)=>{var i;return e===(null===(i=t.extensions)||void 0===i?void 0:i[n])}):e[n]===t[n]))}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?rJ.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((t,n)=>t===e[n]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){let e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}let rG=((0,s.createContext)({editor:null}).Consumer,(0,s.createContext)({onDragStart:void 0})),rY=()=>(0,s.useContext)(rG);function rQ(e){return!!("function"==typeof e&&e.prototype&&e.prototype.isReactComponent)}function rX(e){return!!("object"==typeof e&&e.$$typeof&&("Symbol(react.forward_ref)"===e.$$typeof.toString()||"react.forward_ref"===e.$$typeof.description))}s.forwardRef((e,t)=>{let{onDragStart:n}=rY(),i=e.as||"div";return s.createElement(i,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});let rZ=/^\s*>\s$/,r0=rA.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML({HTMLAttributes:e}){return["blockquote",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[rE({find:rZ,type:this.type})]}}),r1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,r2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,r3=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,r4=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,r5=oB.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return["strong",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[rO({find:r1,type:this.type}),rO({find:r3,type:this.type})]},addPasteRules(){return[rj({find:r2,type:this.type}),rj({find:r4,type:this.type})]}}),r6="textStyle",r8=/^\s*([-+*])\s$/,r7=rA.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML({HTMLAttributes:e}){return["ul",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(r6)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=rE({find:r8,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=rE({find:r8,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(r6),editor:this.editor})),[e]}}),r9=/(^|[^`])`([^`]+)`(?!`)/,se=/(^|[^`])`([^`]+)`(?!`)/g,st=oB.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML({HTMLAttributes:e}){return["code",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[rO({find:r9,type:this.type})]},addPasteRules(){return[rj({find:se,type:this.type})]}}),sn=/^```([a-z]+)?[\s\n]$/,si=/^~~~([a-z]+)?[\s\n]$/,so=rA.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;let{languageClassPrefix:n}=this.options;return[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter(e=>e.startsWith(n)).map(e=>e.replace(n,""))[0]||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML({node:e,HTMLAttributes:t}){return["pre",ok(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{let{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!!e&&t.parent.type.name===this.name&&(!!n||!t.parent.textContent.length)&&this.editor.commands.clearNodes()},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;let{state:t}=e,{selection:n}=t,{$from:i,empty:o}=n;if(!o||i.parent.type!==this.type)return!1;let r=i.parentOffset===i.parent.nodeSize-2,s=i.parent.textContent.endsWith("\n\n");return!!r&&!!s&&e.chain().command(({tr:e})=>(e.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;let{state:t}=e,{selection:n,doc:i}=t,{$from:o,empty:r}=n;if(!r||o.parent.type!==this.type||o.parentOffset!==o.parent.nodeSize-2)return!1;let s=o.after();return void 0!==s&&(i.nodeAt(s)?e.commands.command(({tr:e})=>(e.setSelection(eq.near(i.resolve(s))),!0)):e.commands.exitCode())}}},addInputRules(){return[rT({find:sn,type:this.type,getAttributes:e=>({language:e[1]})}),rT({find:si,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new e7({key:new tt("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;let n=t.clipboardData.getData("text/plain"),i=t.clipboardData.getData("vscode-editor-data"),o=i?JSON.parse(i):void 0,r=null==o?void 0:o.mode;if(!n||!r)return!1;let{tr:s,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:r},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(eJ.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),sr=rA.create({name:"doc",topNode:!0,content:"block+"});class ss{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t,n=this.editorView.state.doc.resolve(this.cursorPos),i=!n.parent.inlineContent,o,r=this.editorView.dom,s=r.getBoundingClientRect(),a=s.width/r.offsetWidth,l=s.height/r.offsetHeight;if(i){let e=n.nodeBefore,t=n.nodeAfter;if(e||t){let n=this.editorView.nodeDOM(this.cursorPos-(e?e.nodeSize:0));if(n){let i=n.getBoundingClientRect(),r=e?i.bottom:i.top;e&&t&&(r=(r+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let s=this.width/2*l;o={left:i.left,right:i.right,top:r-s,bottom:r+s}}}}if(!o){let e=this.editorView.coordsAtPos(this.cursorPos),t=this.width/2*a;o={left:e.left-t,right:e.left+t,top:e.top,bottom:e.bottom}}let c=this.editorView.dom.offsetParent;if(!this.element&&(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",i),this.element.classList.toggle("prosemirror-dropcursor-inline",!i),c&&(c!=document.body||"static"!=getComputedStyle(c).position)){let n=c.getBoundingClientRect(),i=n.width/c.offsetWidth,o=n.height/c.offsetHeight;e=n.left-c.scrollLeft*i,t=n.top-c.scrollTop*o}else e=-pageXOffset,t=-pageYOffset;this.element.style.left=(o.left-e)/a+"px",this.element.style.top=(o.top-t)/l+"px",this.element.style.width=(o.right-o.left)/a+"px",this.element.style.height=(o.bottom-o.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),i=n&&n.type.spec.disableDropCursor,o="function"==typeof i?i(this.editorView,t,e):i;if(t&&!o){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=eA(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}let sa=oq.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[function(e={}){return new e7({view:t=>new ss(t,e)})}(this.options)]}});class sl extends eq{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return sl.valid(n)?new sl(n):eq.near(n)}content(){return g.empty}eq(e){return e instanceof sl&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw RangeError("Invalid input for GapCursor.fromJSON");return new sl(e.resolve(t.pos))}getBookmark(){return new sc(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),i=e.node(t);if(0==n){if(i.type.spec.isolating)return!0;continue}for(let e=i.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||sp(e.type))return!0;if(e.inlineContent)return!1}}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),i=e.node(t);if(n==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let e=i.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||sp(e.type))return!0;if(e.inlineContent)return!1}}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let i=t.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,t,n=!1){i:for(;;){if(!n&&sl.valid(e))return e;let i=e.pos,o=null;for(let n=e.depth;;n--){let r=e.node(n);if(t>0?e.indexAfter(n)<r.childCount:e.index(n)>0){o=r.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;i+=t;let s=e.doc.resolve(i);if(sl.valid(s))return s}for(;;){let r=t>0?o.firstChild:o.lastChild;if(!r){if(o.isAtom&&!o.isText&&!eY.isSelectable(o)){e=e.doc.resolve(i+o.nodeSize*t),n=!1;continue i}break}o=r,i+=t;let s=e.doc.resolve(i);if(sl.valid(s))return s}return null}}}sl.prototype.visible=!1,sl.findFrom=sl.findGapCursorFrom,eq.jsonID("gapcursor",sl);class sc{constructor(e){this.pos=e}map(e){return new sc(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return sl.valid(t)?new sl(t):eq.near(t)}}function sp(e){return e.isAtom||e.spec.isolating||e.spec.createGapCursor}let sd=iW({ArrowLeft:sh("horiz",-1),ArrowRight:sh("horiz",1),ArrowUp:sh("vert",-1),ArrowDown:sh("vert",1)});function sh(e,t){let n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,i,o){let r=e.selection,s=t>0?r.$to:r.$from,a=r.empty;if(r instanceof eJ){if(!o.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=sl.findGapCursorFrom(s,t,a);return!!l&&(i&&i(e.tr.setSelection(new sl(l))),!0)}}function su(e,t,n){if(!e||!e.editable)return!1;let i=e.state.doc.resolve(t);if(!sl.valid(i))return!1;let o=e.posAtCoords({left:n.clientX,top:n.clientY});return!(o&&o.inside>-1&&eY.isSelectable(e.state.doc.nodeAt(o.inside)))&&(e.dispatch(e.state.tr.setSelection(new sl(i))),!0)}function sf(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof sl))return!1;let{$from:n}=e.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!i)return!1;let o=p.empty;for(let e=i.length-1;e>=0;e--)o=p.from(i[e].createAndFill(null,o));let r=e.state.tr.replace(n.pos,n.pos,new g(o,0,0));return r.setSelection(eJ.near(r.doc.resolve(n.pos+1))),e.dispatch(r),!1}function sm(e){if(!(e.selection instanceof sl))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",is.create(e.doc,[ii.widget(e.selection.head,t,{key:"gapcursor"})])}let sg=oq.create({name:"gapCursor",addProseMirrorPlugins:()=>[new e7({props:{decorations:sm,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&sl.valid(n)?new sl(n):null,handleClick:su,handleKeyDown:sd,handleDOMEvents:{beforeinput:sf}}})],extendNodeSchema(e){var t;let n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:null!==(t=oM(ox(e,"allowGapCursor",n)))&&void 0!==t?t:null}}}),sv=rA.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML:()=>[{tag:"br"}],renderHTML({HTMLAttributes:e}){return["br",ok(this.options.HTMLAttributes,e)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:i})=>e.first([()=>e.exitCode(),()=>e.command(()=>{let{selection:e,storedMarks:o}=n;if(e.$from.parent.type.spec.isolating)return!1;let{keepMarks:r}=this.options,{splittableMarks:s}=i.extensionManager,a=o||e.$to.parentOffset&&e.$from.marks();return t().insertContent({type:this.name}).command(({tr:e,dispatch:t})=>{if(t&&a&&r){let t=a.filter(e=>s.includes(e.type.name));e.ensureMarks(t)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),sx=rA.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){let n=this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0];return[`h${n}`,ok(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.setNode(this.name,e),toggleHeading:e=>({commands:t})=>!!this.options.levels.includes(e.level)&&t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>rT({find:RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}});var sy=function(){};sy.prototype.append=function(e){return e.length?(e=sy.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},sy.prototype.prepend=function(e){return e.length?sy.from(e).append(this):this},sy.prototype.appendInner=function(e){return new sw(this,e)},sy.prototype.slice=function(e,t){return(void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t)?sy.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},sy.prototype.get=function(e){if(!(e<0)&&!(e>=this.length))return this.getInner(e)},sy.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},sy.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var i=[];return this.forEach(function(t,n){return i.push(e(t,n))},t,n),i},sy.from=function(e){return e instanceof sy?e:e&&e.length?new sb(e):sy.empty};var sb=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,i){for(var o=t;o<n;o++)if(!1===e(this.values[o],i+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,i){for(var o=t-1;o>=n;o--)if(!1===e(this.values[o],i+o))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(sy);sy.empty=new sb([]);var sw=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,i){var o=this.left.length;if(t<o&&!1===this.left.forEachInner(e,t,Math.min(n,o),i)||n>o&&!1===this.right.forEachInner(e,Math.max(t-o,0),Math.min(this.length,n)-o,i+o))return!1},t.prototype.forEachInvertedInner=function(e,t,n,i){var o=this.left.length;if(t>o&&!1===this.right.forEachInvertedInner(e,t-o,Math.max(n,o)-o,i+o)||n<o&&!1===this.left.forEachInvertedInner(e,Math.min(t,o),n,i))return!1},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(sy);class sk{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){let n,i,o,r;if(0==this.eventCount)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}t&&(i=(n=this.remapping(s,this.items.length)).maps.length);let a=e.tr,l=[],c=[];return this.items.forEach((e,t)=>{if(!e.step){n||(i=(n=this.remapping(s,t+1)).maps.length),i--,c.push(e);return}if(n){c.push(new sS(e.map));let t=e.step.map(n.slice(i)),o;t&&a.maybeStep(t).doc&&(o=a.mapping.maps[a.mapping.maps.length-1],l.push(new sS(o,void 0,void 0,l.length+c.length))),i--,o&&n.appendMap(o,i)}else a.maybeStep(e.step);if(e.selection)return o=n?e.selection.map(n.slice(i)):e.selection,r=new sk(this.items.slice(0,s).append(c.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:r,transform:a,selection:o}}addTransform(e,t,n,i){var o,r;let s,a=[],l=this.eventCount,c=this.items,p=!i&&c.length?c.get(c.length-1):null;for(let n=0;n<e.steps.length;n++){let o=e.steps[n].invert(e.docs[n]),r=new sS(e.mapping.maps[n],o,t),s;(s=p&&p.merge(r))&&(r=s,n?a.pop():c=c.slice(0,c.length-1)),a.push(r),t&&(l++,t=void 0),i||(p=r)}let d=l-n.depth;return d>sM&&(o=c,r=d,o.forEach((e,t)=>{if(e.selection&&0==r--)return s=t,!1}),c=o.slice(s),l-=d),new sk(c.append(a),l)}remapping(e,t){let n=new el;return this.items.forEach((t,i)=>{let o=null!=t.mirrorOffset&&i-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,o)},e,t),n}addMaps(e){return 0==this.eventCount?this:new sk(this.items.append(e.map(e=>new sS(e))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-t),o=e.mapping,r=e.steps.length,s=this.eventCount;this.items.forEach(e=>{e.selection&&s--},i);let a=t;this.items.forEach(t=>{let i=o.getMirror(--a);if(null==i)return;r=Math.min(r,i);let l=o.maps[i];if(t.step){let r=e.steps[i].invert(e.docs[i]),c=t.selection&&t.selection.map(o.slice(a+1,i));c&&s++,n.push(new sS(l,r,c))}else n.push(new sS(l))},i);let l=[];for(let e=t;e<r;e++)l.push(new sS(o.maps[e]));let c=new sk(this.items.slice(0,i).append(l).append(n),s);return c.emptyItemCount()>500&&(c=c.compress(this.items.length-n.length)),c}emptyItemCount(){let e=0;return this.items.forEach(t=>{!t.step&&e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,i=[],o=0;return this.items.forEach((r,s)=>{if(s>=e)i.push(r),r.selection&&o++;else if(r.step){let e=r.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=r.selection&&r.selection.map(t.slice(n));a&&o++;let l=new sS(s.invert(),e,a),c,p=i.length-1;(c=i.length&&i[p].merge(l))?i[p]=c:i.push(l)}}else r.map&&n--},this.items.length,0),new sk(sy.from(i.reverse()),o)}}sk.empty=new sk(sy.empty,0);class sS{constructor(e,t,n,i){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new sS(t.getMap().invert(),t,this.selection)}}}class sC{constructor(e,t,n,i,o){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=i,this.prevComposition=o}}let sM=20;function sO(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach((e,n,i,o)=>t.push(i,o));return t}function sN(e,t){if(!e)return null;let n=[];for(let i=0;i<e.length;i+=2){let o=t.map(e[i],1),r=t.map(e[i+1],-1);o<=r&&n.push(o,r)}return n}let sT=!1,sE=null;function sA(e){let t=e.plugins;if(sE!=t){sT=!1,sE=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){sT=!0;break}}return sT}let sj=new tt("history"),sD=new tt("closeHistory");function sR(e,t){return(n,i)=>{let o=sj.getState(n);if(!o||0==(e?o.undone:o.done).eventCount)return!1;if(i){let r=function(e,t,n){let i=sA(t),o=sj.get(t).spec.config,r=(n?e.undone:e.done).popEvent(t,i);if(!r)return null;let s=r.selection.resolve(r.transform.doc),a=(n?e.done:e.undone).addTransform(r.transform,t.selection.getBookmark(),o,i),l=new sC(n?a:r.remaining,n?r.remaining:a,null,0,-1);return r.transform.setSelection(s).setMeta(sj,{redo:n,historyState:l})}(o,n,e);r&&i(t?r.scrollIntoView():r)}return!0}}let sI=sR(!1,!0),sP=sR(!0,!0);sR(!1,!1),sR(!0,!1);let sz=oq.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>({state:e,dispatch:t})=>sI(e,t),redo:()=>({state:e,dispatch:t})=>sP(e,t)}),addProseMirrorPlugins(){return[function(e={}){return new e7({key:sj,state:{init:()=>new sC(sk.empty,sk.empty,null,0,-1),apply:(t,n,i)=>(function(e,t,n,i){let o=n.getMeta(sj),r;if(o)return o.historyState;n.getMeta(sD)&&(e=new sC(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(sj))return s.getMeta(sj).redo?new sC(e.done.addTransform(n,void 0,i,sA(t)),e.undone,sO(n.mapping.maps),e.prevTime,e.prevComposition):new sC(e.done,e.undone.addTransform(n,void 0,i,sA(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new sC(e.done.rebased(n,r),e.undone.rebased(n,r),sN(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new sC(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),sN(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let o=n.getMeta("composition"),r=0==e.prevTime||!s&&e.prevComposition!=o&&(e.prevTime<(n.time||0)-i.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((e,i)=>{for(let o=0;o<t.length;o+=2)e<=t[o+1]&&i>=t[o]&&(n=!0)}),n}(n,e.prevRanges)),a=s?sN(e.prevRanges,n.mapping):sO(n.mapping.maps);return new sC(e.done.addTransform(n,r?t.selection.getBookmark():void 0,i,sA(t)),sk.empty,a,n.time,null==o?e.prevComposition:o)}})(n,i,t,e)},config:e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,i="historyUndo"==n?sI:"historyRedo"==n?sP:null;return!!i&&!!e.editable&&(t.preventDefault(),i(e.state,e.dispatch))}}}})}(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),sL=rA.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML({HTMLAttributes:e}){return["hr",ok(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!function(e,t){let{selection:n}=e,{$from:i}=n;if(n instanceof eY){let e=i.index();return i.parent.canReplaceWith(e,e+1,t)}let o=i.depth;for(;o>=0;){let e=i.index(o);if(i.node(o).contentMatchAt(e).matchType(t))return!0;o-=1}return!1}(t,t.schema.nodes[this.name]))return!1;let{selection:n}=t,{$from:i,$to:o}=n,r=e();return 0===i.parentOffset?r.insertContentAt({from:Math.max(i.pos-1,0),to:o.pos},{type:this.name}):n instanceof eY?r.insertContentAt(o.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:e,dispatch:t})=>{var n;if(t){let{$to:t}=e.selection,i=t.end();if(t.nodeAfter)t.nodeAfter.isTextblock?e.setSelection(eJ.create(e.doc,t.pos+1)):t.nodeAfter.isBlock?e.setSelection(eY.create(e.doc,t.pos)):e.setSelection(eJ.create(e.doc,t.pos));else{let o=null===(n=t.parent.type.contentMatch.defaultType)||void 0===n?void 0:n.create();o&&(e.insert(i,o),e.setSelection(eJ.create(e.doc,i+1)))}e.scrollIntoView()}return!0}).run()}}},addInputRules(){return[rN({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),sB=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,sF=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,s$=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,sV=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,sH=oB.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[rO({find:sB,type:this.type}),rO({find:s$,type:this.type})]},addPasteRules(){return[rj({find:sF,type:this.type}),rj({find:sV,type:this.type})]}}),s_=rA.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML({HTMLAttributes:e}){return["li",ok(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),sq="textStyle",sW=/^(\d+)\.\s$/,sK=rA.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML({HTMLAttributes:e}){let{start:t,...n}=e;return 1===t?["ol",ok(this.options.HTMLAttributes,n),0]:["ol",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes("listItem",this.editor.getAttributes(sq)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=rE({find:sW,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=rE({find:sW,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(sq)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),sU=rA.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML({HTMLAttributes:e}){return["p",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),sJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,sG=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,sY=oB.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML({HTMLAttributes:e}){return["s",ok(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[rO({find:sJ,type:this.type})]},addPasteRules(){return[rj({find:sG,type:this.type})]}}),sQ=rA.create({name:"text",group:"inline"}),sX=oq.create({name:"starterKit",addExtensions(){let e=[];return!1!==this.options.bold&&e.push(r5.configure(this.options.bold)),!1!==this.options.blockquote&&e.push(r0.configure(this.options.blockquote)),!1!==this.options.bulletList&&e.push(r7.configure(this.options.bulletList)),!1!==this.options.code&&e.push(st.configure(this.options.code)),!1!==this.options.codeBlock&&e.push(so.configure(this.options.codeBlock)),!1!==this.options.document&&e.push(sr.configure(this.options.document)),!1!==this.options.dropcursor&&e.push(sa.configure(this.options.dropcursor)),!1!==this.options.gapcursor&&e.push(sg.configure(this.options.gapcursor)),!1!==this.options.hardBreak&&e.push(sv.configure(this.options.hardBreak)),!1!==this.options.heading&&e.push(sx.configure(this.options.heading)),!1!==this.options.history&&e.push(sz.configure(this.options.history)),!1!==this.options.horizontalRule&&e.push(sL.configure(this.options.horizontalRule)),!1!==this.options.italic&&e.push(sH.configure(this.options.italic)),!1!==this.options.listItem&&e.push(s_.configure(this.options.listItem)),!1!==this.options.orderedList&&e.push(sK.configure(this.options.orderedList)),!1!==this.options.paragraph&&e.push(sU.configure(this.options.paragraph)),!1!==this.options.strike&&e.push(sY.configure(this.options.strike)),!1!==this.options.text&&e.push(sQ.configure(this.options.text)),e}}),sZ=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,s0=rA.create({name:"image",addOptions:()=>({inline:!1,allowBase64:!1,HTMLAttributes:{}}),inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes:()=>({src:{default:null},alt:{default:null},title:{default:null}}),parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",ok(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[rN({find:sZ,type:this.type,getAttributes:e=>{let[,,t,n,i]=e;return{src:n,alt:t,title:i}}})]}}),s1="numeric",s2="ascii",s3="alpha",s4="asciinumeric",s5="alphanumeric",s6="domain",s8="emoji",s7="whitespace";function s9(e,t,n){for(let i in t[s1]&&(t[s4]=!0,t[s5]=!0),t[s2]&&(t[s4]=!0,t[s3]=!0),t[s4]&&(t[s5]=!0),t[s3]&&(t[s5]=!0),t[s5]&&(t[s6]=!0),t[s8]&&(t[s6]=!0),t){let t=(i in n||(n[i]=[]),n[i]);0>t.indexOf(e)&&t.push(e)}}function ae(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}ae.groups={},ae.prototype={accepts(){return!!this.t},go(e){let t=this.j[e];if(t)return t;for(let t=0;t<this.jr.length;t++){let n=this.jr[t][0],i=this.jr[t][1];if(i&&n.test(e))return i}return this.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,i){for(let o=0;o<e.length;o++)this.tt(e[o],t,n,i)},tr(e,t,n,i){let o;return i=i||ae.groups,t&&t.j?o=t:(o=new ae(t),n&&i&&s9(t,n,i)),this.jr.push([e,o]),o},ts(e,t,n,i){let o=this,r=e.length;if(!r)return o;for(let t=0;t<r-1;t++)o=o.tt(e[t]);return o.tt(e[r-1],t,n,i)},tt(e,t,n,i){if(i=i||ae.groups,t&&t.j)return this.j[e]=t,t;let o,r=this.go(e);return r?(Object.assign((o=new ae).j,r.j),o.jr.push.apply(o.jr,r.jr),o.jd=r.jd,o.t=r.t):o=new ae,t&&(i&&(o.t&&"string"==typeof o.t?s9(t,Object.assign(function(e,t){let n={};for(let i in t)t[i].indexOf(e)>=0&&(n[i]=!0);return n}(o.t,i),n),i):n&&s9(t,n,i)),o.t=t),this.j[e]=o,o}};let at=(e,t,n,i,o)=>e.ta(t,n,i,o),an=(e,t,n,i,o)=>e.tr(t,n,i,o),ai=(e,t,n,i,o)=>e.ts(t,n,i,o),ao=(e,t,n,i,o)=>e.tt(t,n,i,o),ar="WORD",as="UWORD",aa="ASCIINUMERICAL",al="ALPHANUMERICAL",ac="LOCALHOST",ap="UTLD",ad="SCHEME",ah="SLASH_SCHEME",au="OPENBRACE",af="CLOSEBRACE",am="OPENBRACKET",ag="CLOSEBRACKET",av="OPENPAREN",ax="CLOSEPAREN",ay="OPENANGLEBRACKET",ab="CLOSEANGLEBRACKET",aw="FULLWIDTHLEFTPAREN",ak="FULLWIDTHRIGHTPAREN",aS="LEFTCORNERBRACKET",aC="RIGHTCORNERBRACKET",aM="LEFTWHITECORNERBRACKET",aO="RIGHTWHITECORNERBRACKET",aN="FULLWIDTHLESSTHAN",aT="FULLWIDTHGREATERTHAN",aE="AMPERSAND",aA="APOSTROPHE",aj="ASTERISK",aD="BACKSLASH",aR="BACKTICK",aI="CARET",aP="COLON",az="COMMA",aL="DOLLAR",aB="EQUALS",aF="EXCLAMATION",a$="HYPHEN",aV="PERCENT",aH="PIPE",a_="PLUS",aq="POUND",aW="QUERY",aK="QUOTE",aU="FULLWIDTHMIDDLEDOT",aJ="SEMI",aG="SLASH",aY="TILDE",aQ="UNDERSCORE",aX="EMOJI";var aZ=Object.freeze({__proto__:null,ALPHANUMERICAL:al,AMPERSAND:aE,APOSTROPHE:aA,ASCIINUMERICAL:aa,ASTERISK:aj,AT:"AT",BACKSLASH:aD,BACKTICK:aR,CARET:aI,CLOSEANGLEBRACKET:ab,CLOSEBRACE:af,CLOSEBRACKET:ag,CLOSEPAREN:ax,COLON:aP,COMMA:az,DOLLAR:aL,DOT:"DOT",EMOJI:aX,EQUALS:aB,EXCLAMATION:aF,FULLWIDTHGREATERTHAN:aT,FULLWIDTHLEFTPAREN:aw,FULLWIDTHLESSTHAN:aN,FULLWIDTHMIDDLEDOT:aU,FULLWIDTHRIGHTPAREN:ak,HYPHEN:a$,LEFTCORNERBRACKET:aS,LEFTWHITECORNERBRACKET:aM,LOCALHOST:ac,NL:"NL",NUM:"NUM",OPENANGLEBRACKET:ay,OPENBRACE:au,OPENBRACKET:am,OPENPAREN:av,PERCENT:aV,PIPE:aH,PLUS:a_,POUND:aq,QUERY:aW,QUOTE:aK,RIGHTCORNERBRACKET:aC,RIGHTWHITECORNERBRACKET:aO,SCHEME:ad,SEMI:aJ,SLASH:aG,SLASH_SCHEME:ah,SYM:"SYM",TILDE:aY,TLD:"TLD",UNDERSCORE:aQ,UTLD:ap,UWORD:as,WORD:ar,WS:"WS"});let a0=/[a-z]/,a1=/\p{L}/u,a2=/\p{Emoji}/u,a3=/\d/,a4=/\s/,a5=null,a6=null;function a8(e,t){let n=function(e){let t=[],n=e.length,i=0;for(;i<n;){let o,r=e.charCodeAt(i),s=r<55296||r>56319||i+1===n||(o=e.charCodeAt(i+1))<56320||o>57343?e[i]:e.slice(i,i+2);t.push(s),i+=s.length}return t}(t.replace(/[A-Z]/g,e=>e.toLowerCase())),i=n.length,o=[],r=0,s=0;for(;s<i;){let a=e,l=null,c=0,p=null,d=-1,h=-1;for(;s<i&&(l=a.go(n[s]));)(a=l).accepts()?(d=0,h=0,p=a):d>=0&&(d+=n[s].length,h++),c+=n[s].length,r+=n[s].length,s++;r-=d,s-=h,c-=d,o.push({t:p.t,v:t.slice(r-c,r),s:r-c,e:r})}return o}function a7(e,t,n,i,o){let r;let s=t.length;for(let n=0;n<s-1;n++){let s=t[n];e.j[s]?r=e.j[s]:((r=new ae(i)).jr=o.slice(),e.j[s]=r),e=r}return(r=new ae(n)).jr=o.slice(),e.j[t[s-1]]=r,r}function a9(e){let t=[],n=[],i=0;for(;i<e.length;){let o=0;for(;"0123456789".indexOf(e[i+o])>=0;)o++;if(o>0){t.push(n.join(""));for(let t=parseInt(e.substring(i,i+o),10);t>0;t--)n.pop();i+=o}else n.push(e[i]),i++}return t}let le={defaultProtocol:"http",events:null,format:ln,formatHref:ln,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function lt(e,t=null){let n=Object.assign({},le);e&&(n=Object.assign(n,e instanceof lt?e.o:e));let i=n.ignoreTags,o=[];for(let e=0;e<i.length;e++)o.push(i[e].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=o}function ln(e){return e}function li(e,t){this.t="token",this.v=e,this.tk=t}function lo(e,t){class n extends li{constructor(t,n){super(t,n),this.t=e}}for(let e in t)n.prototype[e]=t[e];return n.t=e,n}lt.prototype={o:le,ignoreTags:[],defaultRender:e=>e,check(e){return this.get("validate",e.toString(),e)},get(e,t,n){let i=null!=t,o=this.o[e];return o&&("object"==typeof o?"function"==typeof(o=n.t in o?o[n.t]:le[e])&&i&&(o=o(t,n)):"function"==typeof o&&i&&(o=o(t,n.t,n))),o},getObj(e,t,n){let i=this.o[e];return"function"==typeof i&&null!=t&&(i=i(t,n.t,n)),i},render(e){let t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}},li.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){let t=this.toString(),n=e.get("truncate",t,this),i=e.get("format",t,this);return n&&i.length>n?i.substring(0,n)+"":i},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=le.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){let t=this.toHref(e.get("defaultProtocol")),n=e.get("formatHref",t,this),i=e.get("tagName",t,this),o=this.toFormattedString(e),r={},s=e.get("className",t,this),a=e.get("target",t,this),l=e.get("rel",t,this),c=e.getObj("attributes",t,this),p=e.getObj("events",t,this);return r.href=n,s&&(r.class=s),a&&(r.target=a),l&&(r.rel=l),c&&Object.assign(r,c),{tagName:i,attributes:r,content:o,eventListeners:p}}};let lr=lo("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),ls=lo("text"),la=lo("nl"),ll=lo("url",{isLink:!0,toHref(e=le.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){let e=this.tk;return e.length>=2&&e[0].t!==ac&&e[1].t===aP}}),lc=e=>new ae(e);function lp(e,t,n){let i=n[0].s,o=n[n.length-1].e;return new e(t.slice(i,o),n)}let ld="undefined"!=typeof console&&console&&console.warn||(()=>{}),lh={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function lu(e,t=!1){if(lh.initialized&&ld(`linkifyjs: already initialized - will not register custom scheme "${e}" until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);lh.customSchemes.push([e,t])}function lf(e){return lh.initialized||function(){lh.scanner=function(e=[]){let t={};ae.groups=t;let n=new ae;null==a5&&(a5=a9("aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xf6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2")),null==a6&&(a6=a9("121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222")),ao(n,"'",aA),ao(n,"{",au),ao(n,"}",af),ao(n,"[",am),ao(n,"]",ag),ao(n,"(",av),ao(n,")",ax),ao(n,"<",ay),ao(n,">",ab),ao(n,"",aw),ao(n,"",ak),ao(n,"",aS),ao(n,"",aC),ao(n,"",aM),ao(n,"",aO),ao(n,"",aN),ao(n,"",aT),ao(n,"&",aE),ao(n,"*",aj),ao(n,"@","AT"),ao(n,"`",aR),ao(n,"^",aI),ao(n,":",aP),ao(n,",",az),ao(n,"$",aL),ao(n,".","DOT"),ao(n,"=",aB),ao(n,"!",aF),ao(n,"-",a$),ao(n,"%",aV),ao(n,"|",aH),ao(n,"+",a_),ao(n,"#",aq),ao(n,"?",aW),ao(n,'"',aK),ao(n,"/",aG),ao(n,";",aJ),ao(n,"~",aY),ao(n,"_",aQ),ao(n,"\\",aD),ao(n,"",aU);let i=an(n,a3,"NUM",{[s1]:!0});an(i,a3,i);let o=an(i,a0,aa,{[s4]:!0}),r=an(i,a1,al,{[s5]:!0}),s=an(n,a0,ar,{[s2]:!0});an(s,a3,o),an(s,a0,s),an(o,a3,o),an(o,a0,o);let a=an(n,a1,as,{[s3]:!0});an(a,a0),an(a,a3,r),an(a,a1,a),an(r,a3,r),an(r,a0),an(r,a1,r);let l=ao(n,"\n","NL",{[s7]:!0}),c=ao(n,"\r","WS",{[s7]:!0}),p=an(n,a4,"WS",{[s7]:!0});ao(n,"",p),ao(c,"\n",l),ao(c,"",p),an(c,a4,p),ao(p,"\r"),ao(p,"\n"),an(p,a4,p),ao(p,"",p);let d=an(n,a2,aX,{[s8]:!0});ao(d,"#"),an(d,a2,d),ao(d,"",d);let h=ao(d,"");ao(h,"#"),an(h,a2,d);let u=[[a0,s],[a3,o]],f=[[a0,null],[a1,a],[a3,r]];for(let e=0;e<a5.length;e++)a7(n,a5[e],"TLD",ar,u);for(let e=0;e<a6.length;e++)a7(n,a6[e],ap,as,f);s9("TLD",{tld:!0,ascii:!0},t),s9(ap,{utld:!0,alpha:!0},t),a7(n,"file",ad,ar,u),a7(n,"mailto",ad,ar,u),a7(n,"http",ah,ar,u),a7(n,"https",ah,ar,u),a7(n,"ftp",ah,ar,u),a7(n,"ftps",ah,ar,u),s9(ad,{scheme:!0,ascii:!0},t),s9(ah,{slashscheme:!0,ascii:!0},t),e=e.sort((e,t)=>e[0]>t[0]?1:-1);for(let t=0;t<e.length;t++){let i=e[t][0],o=e[t][1]?{scheme:!0}:{slashscheme:!0};i.indexOf("-")>=0?o[s6]=!0:a0.test(i)?a3.test(i)?o[s4]=!0:o[s2]=!0:o[s1]=!0,ai(n,i,i,o)}return ai(n,"localhost",ac,{ascii:!0}),n.jd=new ae("SYM"),{start:n,tokens:Object.assign({groups:t},aZ)}}(lh.customSchemes);for(let e=0;e<lh.tokenQueue.length;e++)lh.tokenQueue[e][1]({scanner:lh.scanner});lh.parser=function({groups:e}){let t=e.domain.concat([aE,aj,"AT",aD,aR,aI,aL,aB,a$,"NUM",aV,aH,a_,aq,aG,"SYM",aY,aQ]),n=[aA,aP,az,"DOT",aF,aV,aW,aK,aJ,ay,ab,au,af,ag,am,av,ax,aw,ak,aS,aC,aM,aO,aN,aT],i=[aE,aA,aj,aD,aR,aI,aL,aB,a$,au,af,aV,aH,a_,aq,aW,aG,"SYM",aY,aQ],o=lc(),r=ao(o,aY);at(r,i,r),at(r,e.domain,r);let s=lc(),a=lc(),l=lc();at(o,e.domain,s),at(o,e.scheme,a),at(o,e.slashscheme,l),at(s,i,r),at(s,e.domain,s);let c=ao(s,"AT");ao(r,"AT",c),ao(a,"AT",c),ao(l,"AT",c);let p=ao(r,"DOT");at(p,i,r),at(p,e.domain,r);let d=lc();at(c,e.domain,d),at(d,e.domain,d);let h=ao(d,"DOT");at(h,e.domain,d);let u=lc(lr);at(h,e.tld,u),at(h,e.utld,u),ao(c,ac,u);let f=ao(d,a$);ao(f,a$,f),at(f,e.domain,d),at(u,e.domain,d),ao(u,"DOT",h),ao(u,a$,f),at(ao(u,aP),e.numeric,lr);let m=ao(s,a$),g=ao(s,"DOT");ao(m,a$,m),at(m,e.domain,s),at(g,i,r),at(g,e.domain,s);let v=lc(ll);at(g,e.tld,v),at(g,e.utld,v),at(v,e.domain,s),at(v,i,r),ao(v,"DOT",g),ao(v,a$,m),ao(v,"AT",c);let x=ao(v,aP),y=lc(ll);at(x,e.numeric,y);let b=lc(ll),w=lc();at(b,t,b),at(b,n,w),at(w,t,b),at(w,n,w),ao(v,aG,b),ao(y,aG,b);let k=ao(a,aP),S=ao(l,aP),C=ao(S,aG),M=ao(C,aG);at(a,e.domain,s),ao(a,"DOT",g),ao(a,a$,m),at(l,e.domain,s),ao(l,"DOT",g),ao(l,a$,m),at(k,e.domain,b),ao(k,aG,b),ao(k,aW,b),at(M,e.domain,b),at(M,t,b),ao(M,aG,b);let O=[[au,af],[am,ag],[av,ax],[ay,ab],[aw,ak],[aS,aC],[aM,aO],[aN,aT]];for(let e=0;e<O.length;e++){let[i,o]=O[e],r=ao(b,i);ao(w,i,r),ao(r,o,b);let s=lc(ll);at(r,t,s);let a=lc();at(r,n),at(s,t,s),at(s,n,a),at(a,t,s),at(a,n,a),ao(s,o,b),ao(a,o,b)}return ao(o,ac,v),ao(o,"NL",la),{start:o,tokens:aZ}}(lh.scanner.tokens);for(let e=0;e<lh.pluginQueue.length;e++)lh.pluginQueue[e][1]({scanner:lh.scanner,parser:lh.parser});lh.initialized=!0}(),function(e,t,n){let i=n.length,o=0,r=[],s=[];for(;o<i;){let a=e,l=null,c=null,p=0,d=null,h=-1;for(;o<i&&!(l=a.go(n[o].t));)s.push(n[o++]);for(;o<i&&(c=l||a.go(n[o].t));)l=null,(a=c).accepts()?(h=0,d=a):h>=0&&h++,o++,p++;if(h<0)(o-=p)<i&&(s.push(n[o]),o++);else{s.length>0&&(r.push(lp(ls,t,s)),s=[]),o-=h,p-=h;let e=d.t,i=n.slice(o-p,o);r.push(lp(e,t,i))}}return s.length>0&&r.push(lp(ls,t,s)),r}(lh.parser.start,e,a8(lh.scanner.start,e))}function lm(e,t=null,n=null){if(t&&"object"==typeof t){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}let i=new lt(n),o=lf(e),r=[];for(let e=0;e<o.length;e++){let n=o[e];n.isLink&&(!t||n.t===t)&&i.check(n)&&r.push(n.toFormattedObject(i))}return r}lf.scan=a8;let lg="[\0- \xa0-\u2029]",lv=new RegExp(lg),lx=RegExp(`${lg}$`),ly=RegExp(lg,"g");function lb(e,t){let n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(e=>{let t="string"==typeof e?e:e.scheme;t&&n.push(t)}),!e||e.replace(ly,"").match(RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}let lw=oB.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if("string"==typeof e){lu(e);return}lu(e.scheme,e.optionalSlashes)})},onDestroy(){ae.groups={},lh.scanner=null,lh.parser=null,lh.tokenQueue=[],lh.pluginQueue=[],lh.customSchemes=[],lh.initialized=!1},inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!lb(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}),addAttributes(){return{href:{default:null,parseHTML:e=>e.getAttribute("href")},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{let t=e.getAttribute("href");return!!(t&&this.options.isAllowedUri(t,{defaultValidate:e=>!!lb(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol}))&&null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:e=>!!lb(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ok(this.options.HTMLAttributes,e),0]:["a",ok(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{let{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!lb(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().setMark(this.name,e).setMeta("preventAutolink",!0).run()},toggleLink:e=>({chain:t})=>{let{href:n}=e;return!!this.options.isAllowedUri(n,{defaultValidate:e=>!!lb(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})&&t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[rj({find:e=>{let t=[];if(e){let{protocols:n,defaultProtocol:i}=this.options,o=lm(e).filter(e=>e.isLink&&this.options.isAllowedUri(e.value,{defaultValidate:e=>!!lb(e,n),protocols:n,defaultProtocol:i}));o.length&&o.forEach(e=>t.push({text:e.value,data:{href:e.href},index:e.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins(){var e,t,n;let i=[],{protocols:o,defaultProtocol:r}=this.options;return this.options.autolink&&i.push((e={type:this.type,defaultProtocol:this.options.defaultProtocol,validate:e=>this.options.isAllowedUri(e,{defaultValidate:e=>!!lb(e,o),protocols:o,defaultProtocol:r}),shouldAutoLink:this.options.shouldAutoLink},new e7({key:new tt("autolink"),appendTransaction:(t,n,i)=>{let o=t.some(e=>e.docChanged)&&!n.doc.eq(i.doc),r=t.some(e=>e.getMeta("preventAutolink"));if(!o||r)return;let{tr:s}=i;if((function(e){let{mapping:t,steps:n}=e,i=[];return t.maps.forEach((e,o)=>{let r=[];if(e.ranges.length)e.forEach((e,t)=>{r.push({from:e,to:t})});else{let{from:e,to:t}=n[o];if(void 0===e||void 0===t)return;r.push({from:e,to:t})}r.forEach(({from:e,to:n})=>{let r=t.slice(o).map(e,-1),s=t.slice(o).map(n),a=t.invert().map(r,-1),l=t.invert().map(s);i.push({oldRange:{from:a,to:l},newRange:{from:r,to:s}})})}),function(e){let t=function(e,t=JSON.stringify){let n={};return e.filter(e=>{let i=t(e);return!Object.prototype.hasOwnProperty.call(n,i)&&(n[i]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>!t.filter((e,t)=>t!==n).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}(i)})(function(e,t){let n=new eH(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}(n.doc,[...t])).forEach(({newRange:t})=>{let n,o;let r=function(e,t,n){let i=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&i.push({node:e,pos:t})}),i}(i.doc,t,e=>e.isTextblock);if(r.length>1)n=r[0],o=i.doc.textBetween(n.pos,n.pos+n.node.nodeSize,void 0," ");else if(r.length){let e=i.doc.textBetween(t.from,t.to," "," ");if(!lx.test(e))return;n=r[0],o=i.doc.textBetween(n.pos,t.to,void 0," ")}if(n&&o){let t=o.split(lv).filter(Boolean);if(t.length<=0)return!1;let r=t[t.length-1],a=n.pos+o.lastIndexOf(r);if(!r)return!1;let l=lf(r).map(t=>t.toObject(e.defaultProtocol));if(!(1===l.length?l[0].isLink:3===l.length&&!!l[1].isLink&&["()","[]"].includes(l[0].value+l[2].value)))return!1;l.filter(e=>e.isLink).map(e=>({...e,from:a+e.start+1,to:a+e.end+1})).filter(e=>!i.schema.marks.code||!i.doc.rangeHasMark(e.from,e.to,i.schema.marks.code)).filter(t=>e.validate(t.value)).filter(t=>e.shouldAutoLink(t.value)).forEach(t=>{rs(t.from,t.to,i.doc).some(t=>t.mark.type===e.type)||s.addMark(t.from,t.to,e.type.create({href:t.href}))})}}),s.steps.length)return s}}))),!0===this.options.openOnClick&&i.push((t={type:this.type},new e7({key:new tt("handleClickLink"),props:{handleClick:(e,n,i)=>{var o,r;if(0!==i.button||!e.editable)return!1;let s=i.target,a=[];for(;"DIV"!==s.nodeName;)a.push(s),s=s.parentNode;if(!a.find(e=>"A"===e.nodeName))return!1;let l=rr(e.state,t.type.name),c=i.target,p=null!==(o=null==c?void 0:c.href)&&void 0!==o?o:l.href,d=null!==(r=null==c?void 0:c.target)&&void 0!==r?r:l.target;return!!c&&!!p&&(window.open(p,d),!0)}}}))),this.options.linkOnPaste&&i.push((n={editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type},new e7({key:new tt("handlePasteLink"),props:{handlePaste:(e,t,i)=>{let{state:o}=e,{selection:r}=o,{empty:s}=r;if(s)return!1;let a="";i.content.forEach(e=>{a+=e.textContent});let l=lm(a,{defaultProtocol:n.defaultProtocol}).find(e=>e.isLink&&e.value===a);return!!a&&!!l&&n.editor.commands.setMark(n.type,{href:l.href})}}}))),i}}),lk=oq.create({name:"placeholder",addOptions:()=>({emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}),addProseMirrorPlugins(){return[new e7({key:new tt("placeholder"),props:{decorations:({doc:e,selection:t})=>{let n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=t,o=[];if(!n)return null;let r=this.editor.isEmpty;return e.descendants((e,t)=>{let n=i>=t&&i<=t+e.nodeSize,s=!e.isLeaf&&rp(e);if((n||!this.options.showOnlyCurrent)&&s){let i=[this.options.emptyNodeClass];r&&i.push(this.options.emptyEditorClass);let s=ii.node(t,t+e.nodeSize,{class:i.join(" "),"data-placeholder":"function"==typeof this.options.placeholder?this.options.placeholder({editor:this.editor,node:e,pos:t,hasAnchor:n}):this.options.placeholder});o.push(s)}return this.options.includeChildren}),is.create(e,o)}}})]}});function lS({editor:e,onImageClick:t,onLinkClick:n}){let i=({onClick:e,isActive:t=!1,children:n,title:i})=>r.jsx("button",{type:"button",onClick:e,title:i,className:`p-2 rounded hover:bg-gray-100 transition-colors ${t?"bg-gray-200 text-royal-blue":"text-gray-600"}`,children:n});return(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-200 bg-gray-50",children:[r.jsx(i,{onClick:()=>e.chain().focus().toggleBold().run(),isActive:e.isActive("bold"),title:"Bold (Ctrl+B)",children:r.jsx("span",{className:"font-bold text-sm",children:"B"})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleItalic().run(),isActive:e.isActive("italic"),title:"Italic (Ctrl+I)",children:r.jsx("span",{className:"italic text-sm",children:"I"})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleStrike().run(),isActive:e.isActive("strike"),title:"Strikethrough",children:r.jsx("span",{className:"line-through text-sm",children:"S"})}),r.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),r.jsx(i,{onClick:()=>e.chain().focus().toggleHeading({level:1}).run(),isActive:e.isActive("heading",{level:1}),title:"Heading 1",children:r.jsx("span",{className:"font-bold text-sm",children:"H1"})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleHeading({level:2}).run(),isActive:e.isActive("heading",{level:2}),title:"Heading 2",children:r.jsx("span",{className:"font-bold text-sm",children:"H2"})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleHeading({level:3}).run(),isActive:e.isActive("heading",{level:3}),title:"Heading 3",children:r.jsx("span",{className:"font-bold text-sm",children:"H3"})}),r.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),r.jsx(i,{onClick:()=>e.chain().focus().toggleBulletList().run(),isActive:e.isActive("bulletList"),title:"Bullet List",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleOrderedList().run(),isActive:e.isActive("orderedList"),title:"Numbered List",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleBlockquote().run(),isActive:e.isActive("blockquote"),title:"Quote",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"})})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleCode().run(),isActive:e.isActive("code"),title:"Inline code",children:r.jsx("span",{className:"text-xs font-mono",children:"</>"})}),r.jsx(i,{onClick:()=>e.chain().focus().toggleCodeBlock().run(),isActive:e.isActive("codeBlock"),title:"Code block",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 18l4-4-4-4M8 6l-4 4 4 4"})})}),r.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),r.jsx(i,{onClick:t,title:"Insert Image",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx(i,{onClick:n,isActive:e.isActive("link"),title:"Insert Link",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),r.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),r.jsx(i,{onClick:()=>e.chain().focus().unsetAllMarks().clearNodes().run(),title:"Clear formatting",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M9 5h10M5 9v10"})})}),r.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),r.jsx(i,{onClick:()=>e.chain().focus().undo().run(),title:"Undo (Ctrl+Z)",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),r.jsx(i,{onClick:()=>e.chain().focus().redo().run(),title:"Redo (Ctrl+Shift+Z)",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})})})]})}function lC({content:e,onChange:t,placeholder:n="Write your travel story here...",onImageUpload:i}){let o=function(e={},t=[]){let n=(0,s.useRef)(e);n.current=e;let[i]=(0,s.useState)(()=>new rJ(n)),o=rI.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return(0,s.useDebugValue)(o),(0,s.useEffect)(i.onRender(t)),function(e){var t;let[n]=(0,s.useState)(()=>new rW(e.editor)),i=r_.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!==(t=e.equalityFn)&&void 0!==t?t:r$);rq(()=>n.watch(e.editor),[e.editor,n]),(0,s.useDebugValue)(i)}({editor:o,selector:({transactionNumber:t})=>!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===t?0:t+1}),o}({extensions:[sX.configure({heading:{levels:[1,2,3]}}),s0.configure({HTMLAttributes:{class:"rounded-xl max-w-full md:max-w-[700px] mx-auto my-4 shadow-sm"}}),lw.configure({openOnClick:!1,HTMLAttributes:{class:"text-desert-gold underline"}}),lk.configure({placeholder:n,emptyEditorClass:"is-editor-empty"})],content:e,immediatelyRender:!1,onUpdate:({editor:e})=>{t(e.getHTML())},editorProps:{attributes:{class:"tiptap-editor prose prose-lg md:prose-xl max-w-none focus:outline-none min-h-[260px] p-4"}}}),a=(0,s.useCallback)(async e=>{if(o&&i)try{let t=await i(e);o.chain().focus().setImage({src:t}).run()}catch(e){console.error("Failed to upload image:",e),alert("Failed to upload image. Please try again.")}},[o,i]),l=(0,s.useCallback)(()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.onchange=async e=>{let t=e.target.files?.[0];t&&await a(t)},e.click()},[a]),c=(0,s.useCallback)(()=>{if(!o)return;let e=window.prompt("Enter URL:");e&&o.chain().focus().setLink({href:e}).run()},[o]);return o?(0,r.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white shadow-sm overflow-hidden focus-within:border-desert-gold/80 focus-within:shadow-md transition-all",children:[r.jsx("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Editor"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Format your story with headings, lists, images and more."})]})}),r.jsx("div",{className:"border-b border-gray-100 bg-white",children:r.jsx(lS,{editor:o,onImageClick:l,onLinkClick:c})}),r.jsx("div",{className:"bg-white",children:r.jsx(rF,{editor:o})})]}):r.jsx("div",{className:"border border-gray-200 rounded-2xl p-4 min-h-[320px] flex items-center justify-center bg-white",children:r.jsx("div",{className:"w-8 h-8 border-4 border-desert-gold border-t-transparent rounded-full animate-spin"})})}var lM=n(6226);function lO({title:e,coverImage:t,content:n,category:i,authorName:o}){let s=new Date().toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden h-full",children:[r.jsx("div",{className:"bg-gray-100 px-4 py-2 border-b border-gray-200",children:r.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Live Preview"})}),(0,r.jsxs)("div",{className:"overflow-y-auto max-h-[600px]",children:[(0,r.jsxs)("div",{className:"h-48 relative bg-gray-200",children:[t?r.jsx(lM.default,{src:t,alt:"Cover",fill:!0,className:"object-cover"}):r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:r.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 p-4 text-white",children:[i&&r.jsx("span",{className:"inline-block px-2 py-0.5 bg-desert-gold text-xs font-bold uppercase rounded-full mb-2",children:i}),r.jsx("h2",{className:"text-xl font-bold leading-tight",children:e||"Your Blog Title"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm opacity-90 mt-1",children:[r.jsx("span",{children:s}),r.jsx("span",{children:""}),r.jsx("span",{children:"5 min read"})]})]})]}),r.jsx("div",{className:"p-4 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center text-sm font-bold text-gray-500",children:o?o.charAt(0).toUpperCase():"?"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"font-medium text-sm text-royal-blue",children:o||"Author Name"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Traveler"})]})]})}),r.jsx("div",{className:"p-4",children:n?r.jsx("div",{className:"prose prose-lg md:prose-xl max-w-none",dangerouslySetInnerHTML:{__html:n}}):r.jsx("p",{className:"text-gray-400 text-sm italic",children:"Start writing to see the preview..."})})]})]})}var lN=n(8439),lT=n(5826);let lE=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function lA(e,t,n){let i=function(e){let{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){let n=t.split(".").pop().toLowerCase(),i=lE.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:o}=e,r="string"==typeof t?t:"string"==typeof o&&o.length>0?o:`./${e.name}`;return"string"!=typeof i.path&&lj(i,"path",r),void 0!==n&&Object.defineProperty(i,"handle",{value:n,writable:!1,configurable:!1,enumerable:!0}),lj(i,"relativePath",r),i}function lj(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}let lD=[".DS_Store","Thumbs.db"];function lR(e){return"object"==typeof e&&null!==e}function lI(e){return e.filter(e=>-1===lD.indexOf(e.name))}function lP(e){if(null===e)return[];let t=[];for(let n=0;n<e.length;n++){let i=e[n];t.push(i)}return t}function lz(e){if("function"!=typeof e.webkitGetAsEntry)return lL(e);let t=e.webkitGetAsEntry();return t&&t.isDirectory?lF(t):lL(e,t)}function lL(e,t){return(0,lT.mG)(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){let t=yield e.getAsFileSystemHandle();if(null===t)throw Error(`${e} is not a File`);if(void 0!==t){let e=yield t.getFile();return e.handle=t,lA(e)}}let i=e.getAsFile();if(!i)throw Error(`${e} is not a File`);return lA(i,null!==(n=null==t?void 0:t.fullPath)&&void 0!==n?n:void 0)})}function lB(e){return(0,lT.mG)(this,void 0,void 0,function*(){return e.isDirectory?lF(e):function(e){return(0,lT.mG)(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(n=>{t(lA(n,e.fullPath))},e=>{n(e)})})})}(e)})}function lF(e){let t=e.createReader();return new Promise((e,n)=>{let i=[];!function o(){t.readEntries(t=>(0,lT.mG)(this,void 0,void 0,function*(){if(t.length){let e=Promise.all(t.map(lB));i.push(e),o()}else try{let t=yield Promise.all(i);e(t)}catch(e){n(e)}}),e=>{n(e)})}()})}var l$=n(4191);function lV(e){return function(e){if(Array.isArray(e))return lU(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lK(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lH(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lH(Object(n),!0).forEach(function(t){lq(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lH(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function lq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,i,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r=[],s=!0,a=!1;try{for(o=o.call(e);!(s=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return r}}(e,t)||lK(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lK(e,t){if(e){if("string"==typeof e)return lU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lU(e,t)}}function lU(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var lJ="function"==typeof l$?l$:l$.default,lG=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(","),n=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:"file-invalid-type",message:"File type must be ".concat(n)}},lY=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},lQ=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},lX={code:"too-many-files",message:"Too many files"};function lZ(e,t){var n="application/x-moz-file"===e.type||lJ(e,t);return[n,n?null:lG(t)]}function l0(e,t,n){if(l1(e.size)){if(l1(t)&&l1(n)){if(e.size>n)return[!1,lY(n)];if(e.size<t)return[!1,lQ(t)]}else if(l1(t)&&e.size<t)return[!1,lQ(t)];else if(l1(n)&&e.size>n)return[!1,lY(n)]}return[!0,null]}function l1(e){return null!=e}function l2(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function l3(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function l4(e){e.preventDefault()}function l5(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return t.some(function(t){return!l2(e)&&t&&t.apply(void 0,[e].concat(i)),l2(e)})}}function l6(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function l8(e){return/^.*\.[\w]+$/.test(e)}var l7=["children"],l9=["open"],ce=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ct=["refKey","onChange","onClick"];function cn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,i,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r=[],s=!0,a=!1;try{for(o=o.call(e);!(s=(n=o.next()).done)&&(r.push(n.value),!t||r.length!==t);s=!0);}catch(e){a=!0,i=e}finally{try{s||null==o.return||o.return()}finally{if(a)throw i}}return r}}(e,t)||ci(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ci(e,t){if(e){if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(e,t)}}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cr(Object(n),!0).forEach(function(t){ca(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cl(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var cc=(0,s.forwardRef)(function(e,t){var n=e.children,i=ch(cl(e,l7)),o=i.open,r=cl(i,l9);return(0,s.useImperativeHandle)(t,function(){return{open:o}},[o]),s.createElement(s.Fragment,null,n(cs(cs({},r),{},{open:o})))});cc.displayName="Dropzone";var cp={disabled:!1,getFilesFromEvent:function(e){return(0,lT.mG)(this,void 0,void 0,function*(){return lR(e)&&lR(e.dataTransfer)?function(e,t){return(0,lT.mG)(this,void 0,void 0,function*(){if(e.items){let n=lP(e.items).filter(e=>"file"===e.kind);return"drop"!==t?n:lI(function e(t){return t.reduce((t,n)=>[...t,...Array.isArray(n)?e(n):[n]],[])}((yield Promise.all(n.map(lz)))))}return lI(lP(e.files).map(e=>lA(e)))})}(e.dataTransfer,e.type):lR(e)&&lR(e.target)?lP(e.target.files).map(e=>lA(e)):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return(0,lT.mG)(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>lA(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};cc.defaultProps=cp,cc.propTypes={children:lN.func,accept:lN.objectOf(lN.arrayOf(lN.string)),multiple:lN.bool,preventDropOnDocument:lN.bool,noClick:lN.bool,noKeyboard:lN.bool,noDrag:lN.bool,noDragEventsBubbling:lN.bool,minSize:lN.number,maxSize:lN.number,maxFiles:lN.number,disabled:lN.bool,getFilesFromEvent:lN.func,onFileDialogCancel:lN.func,onFileDialogOpen:lN.func,useFsAccessApi:lN.bool,autoFocus:lN.bool,onDragEnter:lN.func,onDragLeave:lN.func,onDragOver:lN.func,onDrop:lN.func,onDropAccepted:lN.func,onDropRejected:lN.func,onError:lN.func,validator:lN.func};var cd={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=cs(cs({},cp),e),n=t.accept,i=t.disabled,o=t.getFilesFromEvent,r=t.maxSize,a=t.minSize,l=t.multiple,c=t.maxFiles,p=t.onDragEnter,d=t.onDragLeave,h=t.onDragOver,u=t.onDrop,f=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,v=t.onFileDialogOpen,x=t.useFsAccessApi,y=t.autoFocus,b=t.preventDropOnDocument,w=t.noClick,k=t.noKeyboard,S=t.noDrag,C=t.noDragEventsBubbling,M=t.onError,O=t.validator,N=(0,s.useMemo)(function(){return function(e){if(l1(e))return Object.entries(e).reduce(function(e,t){var n=lW(t,2),i=n[0],o=n[1];return[].concat(lV(e),[i],lV(o))},[]).filter(function(e){return l6(e)||l8(e)}).join(",")}(n)},[n]),T=(0,s.useMemo)(function(){return l1(n)?[{description:"Files",accept:Object.entries(n).filter(function(e){var t=lW(e,2),n=t[0],i=t[1],o=!0;return l6(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),Array.isArray(i)&&i.every(l8)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(e,t){var n=lW(t,2),i=n[0],o=n[1];return l_(l_({},e),{},lq({},i,o))},{})}]:n},[n]),E=(0,s.useMemo)(function(){return"function"==typeof v?v:cf},[v]),A=(0,s.useMemo)(function(){return"function"==typeof g?g:cf},[g]),j=(0,s.useRef)(null),D=(0,s.useRef)(null),R=cn((0,s.useReducer)(cu,cd),2),I=R[0],P=R[1],z=I.isFocused,L=I.isFileDialogActive,B=(0,s.useRef)("undefined"!=typeof window&&window.isSecureContext&&x&&"showOpenFilePicker"in window),F=function(){!B.current&&L&&setTimeout(function(){D.current&&!D.current.files.length&&(P({type:"closeDialog"}),A())},300)};(0,s.useEffect)(function(){return window.addEventListener("focus",F,!1),function(){window.removeEventListener("focus",F,!1)}},[D,L,A,B]);var $=(0,s.useRef)([]),V=function(e){j.current&&j.current.contains(e.target)||(e.preventDefault(),$.current=[])};(0,s.useEffect)(function(){return b&&(document.addEventListener("dragover",l4,!1),document.addEventListener("drop",V,!1)),function(){b&&(document.removeEventListener("dragover",l4),document.removeEventListener("drop",V))}},[j,b]),(0,s.useEffect)(function(){return!i&&y&&j.current&&j.current.focus(),function(){}},[j,y,i]);var H=(0,s.useCallback)(function(e){M?M(e):console.error(e)},[M]),_=(0,s.useCallback)(function(e){var t;e.preventDefault(),e.persist(),en(e),$.current=[].concat(function(e){if(Array.isArray(e))return co(e)}(t=$.current)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||ci(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e.target]),l3(e)&&Promise.resolve(o(e)).then(function(t){if(!l2(e)||C){var n,i,o,s,d,h,u,f,m=t.length,g=m>0&&(i=(n={files:t,accept:N,minSize:a,maxSize:r,multiple:l,maxFiles:c,validator:O}).files,o=n.accept,s=n.minSize,d=n.maxSize,h=n.multiple,u=n.maxFiles,f=n.validator,(!!h||!(i.length>1))&&(!h||!(u>=1)||!(i.length>u))&&i.every(function(e){var t=lW(lZ(e,o),1)[0],n=lW(l0(e,s,d),1)[0],i=f?f(e):null;return t&&n&&!i}));P({isDragAccept:g,isDragReject:m>0&&!g,isDragActive:!0,type:"setDraggedFiles"}),p&&p(e)}}).catch(function(e){return H(e)})},[o,p,H,C,N,a,r,l,c,O]),q=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),en(e);var t=l3(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&h&&h(e),!1},[h,C]),W=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),en(e);var t=$.current.filter(function(e){return j.current&&j.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),$.current=t,!(t.length>0)&&(P({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),l3(e)&&d&&d(e))},[j,d,C]),K=(0,s.useCallback)(function(e,t){var n=[],i=[];e.forEach(function(e){var t=cn(lZ(e,N),2),o=t[0],s=t[1],l=cn(l0(e,a,r),2),c=l[0],p=l[1],d=O?O(e):null;if(o&&c&&!d)n.push(e);else{var h=[s,p];d&&(h=h.concat(d)),i.push({file:e,errors:h.filter(function(e){return e})})}}),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach(function(e){i.push({file:e,errors:[lX]})}),n.splice(0)),P({acceptedFiles:n,fileRejections:i,isDragReject:i.length>0,type:"setFiles"}),u&&u(n,i,t),i.length>0&&m&&m(i,t),n.length>0&&f&&f(n,t)},[P,l,N,a,r,c,u,f,m,O]),U=(0,s.useCallback)(function(e){e.preventDefault(),e.persist(),en(e),$.current=[],l3(e)&&Promise.resolve(o(e)).then(function(t){(!l2(e)||C)&&K(t,e)}).catch(function(e){return H(e)}),P({type:"reset"})},[o,K,H,C]),J=(0,s.useCallback)(function(){if(B.current){P({type:"openDialog"}),E(),window.showOpenFilePicker({multiple:l,types:T}).then(function(e){return o(e)}).then(function(e){K(e,null),P({type:"closeDialog"})}).catch(function(e){e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)?(A(e),P({type:"closeDialog"})):e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)?(B.current=!1,D.current?(D.current.value=null,D.current.click()):H(Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):H(e)});return}D.current&&(P({type:"openDialog"}),E(),D.current.value=null,D.current.click())},[P,E,A,x,K,H,T,l]),G=(0,s.useCallback)(function(e){j.current&&j.current.isEqualNode(e.target)&&(" "===e.key||"Enter"===e.key||32===e.keyCode||13===e.keyCode)&&(e.preventDefault(),J())},[j,J]),Y=(0,s.useCallback)(function(){P({type:"focus"})},[]),Q=(0,s.useCallback)(function(){P({type:"blur"})},[]),X=(0,s.useCallback)(function(){w||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return -1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")||-1!==e.indexOf("Edge/")}()?setTimeout(J,0):J())},[w,J]),Z=function(e){return i?null:e},ee=function(e){return k?null:Z(e)},et=function(e){return S?null:Z(e)},en=function(e){C&&e.stopPropagation()},ei=(0,s.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=e.role,o=e.onKeyDown,r=e.onFocus,s=e.onBlur,a=e.onClick,l=e.onDragEnter,c=e.onDragOver,p=e.onDragLeave,d=e.onDrop,h=cl(e,ce);return cs(cs(ca({onKeyDown:ee(l5(o,G)),onFocus:ee(l5(r,Y)),onBlur:ee(l5(s,Q)),onClick:Z(l5(a,X)),onDragEnter:et(l5(l,_)),onDragOver:et(l5(c,q)),onDragLeave:et(l5(p,W)),onDrop:et(l5(d,U)),role:"string"==typeof n&&""!==n?n:"presentation"},void 0===t?"ref":t,j),i||k?{}:{tabIndex:0}),h)}},[j,G,Y,Q,X,_,q,W,U,k,S,i]),eo=(0,s.useCallback)(function(e){e.stopPropagation()},[]),er=(0,s.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=e.onChange,i=e.onClick,o=cl(e,ct);return cs(cs({},ca({accept:N,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Z(l5(n,U)),onClick:Z(l5(i,eo)),tabIndex:-1},void 0===t?"ref":t,D)),o)}},[D,n,l,U,i]);return cs(cs({},I),{},{isFocused:z&&!i,getRootProps:ei,getInputProps:er,rootRef:j,inputRef:D,open:Z(J)})}function cu(e,t){switch(t.type){case"focus":return cs(cs({},e),{},{isFocused:!0});case"blur":return cs(cs({},e),{},{isFocused:!1});case"openDialog":return cs(cs({},cd),{},{isFileDialogActive:!0});case"closeDialog":return cs(cs({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return cs(cs({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return cs(cs({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return cs({},cd);default:return e}}function cf(){}function cm({onUpload:e,currentImage:t,onImageChange:n,label:i="Cover Image"}){let{getRootProps:o,getInputProps:a,isDragActive:l}=ch({onDrop:(0,s.useCallback)(async t=>{let i=t[0];if(i)try{let t=URL.createObjectURL(i);n(t);let o=await e(i);n(o)}catch(e){console.error("Upload failed:",e),n(null),alert("Failed to upload image. Please try again.")}},[e,n]),accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},maxFiles:1,maxSize:5242880});return(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i}),(0,r.jsxs)("div",{...o(),className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${l?"border-desert-gold bg-desert-gold/5":"border-gray-300 hover:border-desert-gold"}`,children:[r.jsx("input",{...a()}),t?(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"relative h-40 w-full",children:r.jsx(lM.default,{src:t,alt:"Cover preview",fill:!0,className:"object-cover rounded-lg"})}),r.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),n(null)},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Click or drag to replace"})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"text-gray-400 mb-2",children:r.jsx("svg",{className:"w-10 h-10 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-gray-500",children:l?"Drop the image here...":"Drag & drop or click to upload"}),r.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"PNG, JPG up to 5MB"})]})]})]})}function cg({images:e,onRemove:t,onInsert:n}){return 0===e.length?null:(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Uploaded Images (",e.length,")"]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:e.map((e,i)=>(0,r.jsxs)("div",{className:"relative group w-20 h-20 rounded-lg overflow-hidden border-2 border-gray-200",children:[r.jsx(lM.default,{src:e,alt:`Uploaded ${i+1}`,fill:!0,className:"object-cover"}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-1",children:[r.jsx("button",{type:"button",onClick:()=>n(e),className:"p-1 bg-white rounded text-gray-700 hover:bg-gray-100",title:"Insert into blog",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})}),r.jsx("button",{type:"button",onClick:()=>t(i),className:"p-1 bg-red-500 rounded text-white hover:bg-red-600",title:"Remove",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]},i))})]})}var cv=n(5472);function cx({isOpen:e,onClose:t,onLoginSuccess:n}){let{t:i}=(0,a.Z)(),[o,l]=(0,s.useState)(!1),[c,p]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),[u,f]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),[v,x]=(0,s.useState)(null),[y,b]=(0,s.useState)(null),w=async e=>{e.preventDefault(),g(!0),x(null),b(null);try{o?await k():await S()}catch(e){x(e.message||i("Something went wrong","   ")),g(!1)}},k=async()=>{let{error:e}=await cv.O.auth.signUp({email:c,password:d,options:{data:{name:u}}});if(e)throw e;b(i("Account created! Please check your email to verify your account.","  !    ")),g(!1)},S=async()=>{let{data:e,error:o}=await cv.O.auth.signInWithPassword({email:c,password:d});if(o)throw o;let r=e.user;if(!r)return;let{data:s}=await cv.O.from("authors").select("id").eq("id",r.id).maybeSingle();if(!s){let{error:e}=await cv.O.from("authors").insert({id:r.id,name:r.user_metadata?.name||"",email:r.email});if(e)throw e}b(i("Login successful!"," !")),setTimeout(()=>{n(),t()},500)},C=async()=>{g(!0),x(null);let{error:e}=await cv.O.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/submit`}});e&&(x(e.message),g(!1))},M=async()=>{g(!0),x(null);let{error:e}=await cv.O.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}/submit`}});e&&(x(e.message),g(!1))};return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 relative",children:[r.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:""}),(0,r.jsxs)("div",{className:"text-center mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:o?i("Create Account"," "):i("Login","")}),r.jsx("p",{className:"text-gray-600 text-sm",children:i("Submit your travel stories","    ")})]}),v&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded",children:r.jsx("p",{className:"text-red-600 text-sm",children:v})}),y&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded",children:r.jsx("p",{className:"text-green-600 text-sm",children:y})}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[o&&r.jsx("input",{type:"text",placeholder:i("Your Name"," "),value:u,onChange:e=>f(e.target.value),required:!0,className:"w-full border p-3 rounded"}),r.jsx("input",{type:"email",placeholder:"email@example.com",value:c,onChange:e=>p(e.target.value),required:!0,className:"w-full border p-3 rounded"}),r.jsx("input",{type:"password",placeholder:i("Password",""),value:d,onChange:e=>h(e.target.value),required:!0,minLength:6,className:"w-full border p-3 rounded"}),r.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white p-3 rounded font-semibold",children:m?i("Please wait...","  ..."):o?i("Sign Up"," "):i("Login","")})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[r.jsx("button",{onClick:C,className:"w-full border p-3 rounded",children:i("Continue with Google","Google   ")}),r.jsx("button",{onClick:M,className:"w-full border p-3 rounded",children:i("Continue with Microsoft","Microsoft   ")})]}),r.jsx("div",{className:"mt-4 text-center text-sm",children:r.jsx("button",{onClick:()=>{l(!o),x(null),b(null)},className:"text-blue-600",children:o?i("Already have an account? Login","   ?  "):i("Don't have an account? Sign up","  ?   ")})})]})}):null}let cy="dqyu291ng",cb="TravelBlogs";async function cw(e,t){if(!cy||!cb)throw Error("Cloudinary is not configured. Please set NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME and NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET.");let n=`https://api.cloudinary.com/v1_1/${cy}/image/upload`,i=new FormData;i.append("file",e),i.append("upload_preset",cb),i.append("folder",t);let o=await fetch(n,{method:"POST",body:i});if(!o.ok){let e=await o.text();throw Error(`Cloudinary upload failed: ${e}`)}let r=await o.json(),s=r.public_id;return s?`https://res.cloudinary.com/${cy}/image/upload/f_auto,q_auto,w_1400/${s}`:r.secure_url}async function ck(e){return cw(e,"blog-images")}async function cS(e){return cw(e,"cover-images")}var cC=n(7453);let cM=[{value:"",label:"Select destination"},{value:"jaipur",label:"Jaipur"},{value:"udaipur",label:"Udaipur"},{value:"jaisalmer",label:"Jaisalmer"},{value:"jodhpur",label:"Jodhpur"},{value:"pushkar",label:"Pushkar"},{value:"mount-abu",label:"Mount Abu"},{value:"other",label:"Other"}],cO=[{value:"",label:"Select category"},{value:"City Guide",label:"City Guide"},{value:"Travel Story",label:"Travel Story"},{value:"Adventure",label:"Adventure"},{value:"Food & Culture",label:"Food & Culture"},{value:"Budget Travel",label:"Budget Travel"},{value:"Luxury",label:"Luxury"}];function cN(){let{t:e}=(0,a.Z)(),[t,n]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(null),[p,d]=(0,s.useState)(!0),[h,u]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!1),[g,v]=(0,s.useState)(""),[x,y]=(0,s.useState)(""),[b,w]=(0,s.useState)(""),[k,S]=(0,s.useState)(""),[C,M]=(0,s.useState)(""),[O,N]=(0,s.useState)(""),[T,E]=(0,s.useState)(""),[A,j]=(0,s.useState)(""),[D,R]=(0,s.useState)(""),[I,P]=(0,s.useState)(""),[z,L]=(0,s.useState)(null),[B,F]=(0,s.useState)([]),$=async e=>{try{let{data:t,error:n}=await cv.O.from("authors").select("id").eq("id",e.id).single();t||n?.code!=="PGRST116"&&n||await cv.O.from("authors").insert({id:e.id,name:e.user_metadata?.name||"",email:e.email})}catch(e){console.error("Error ensuring author exists:",e)}},V=async()=>{try{let{data:{user:e}}=await cv.O.auth.getUser();e&&(c(e),await $(e),e.user_metadata?.name&&v(e.user_metadata.name),e.email&&y(e.email))}catch(e){console.error("Error checking user:",e)}finally{d(!1)}},H=async()=>{await cv.O.auth.signOut(),c(null),v(""),y("")},_=(0,s.useMemo)(()=>{if(!D)return 0;let e=D.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim();return e?e.split(" ").length:0},[D]),q=(0,s.useMemo)(()=>_?Math.max(1,Math.round(_/200)):0,[_]),W=(0,s.useCallback)(async e=>{try{console.log("Starting upload for:",e.name);let t=await ck(e);return console.log("Got URL:",t),F(e=>[...e,t]),t}catch(t){console.error("Error uploading image:",t);let e="Failed to upload image.";throw t?.message?.includes("Cloudinary is not configured")?e="Image upload is not configured. Please set your Cloudinary env variables in .env.local.":t?.message?.includes("Cloudinary upload failed")&&(e="Image upload failed on Cloudinary. Check your upload preset and allowed formats."),alert(`${e}

Details: ${t?.message||"See browser console."}`),t}},[]),K=(0,s.useCallback)(async e=>{try{return await cS(e)}catch(t){console.error("Error uploading cover image:",t);let e="Failed to upload cover image.";throw t?.message?.includes("Cloudinary is not configured")?e="Cover image upload is not configured. Please set your Cloudinary env variables in .env.local.":t?.message?.includes("Cloudinary upload failed")&&(e="Cover image upload failed on Cloudinary. Check your upload preset and allowed formats."),alert(`${e}

Details: ${t?.message||"See browser console."}`),t}},[]),U=async t=>{if(t.preventDefault(),!l){m(!0),u(!0);return}o(!0);try{let{id:e,error:t}=await (0,cC.Vh)({author:{name:g,email:x},destination:b,category:k,title_en:C,title_hi:O||C,excerpt_en:T,excerpt_hi:A||T,content_en:D,content_hi:I||D,coverImage:z||"https://images.unsplash.com/photo-1477587458883-47145ed94245?w=800",images:B,status:"pending"});if(t||!e){if(t?.includes("logged in")||t?.includes("authenticated")){m(!0),u(!0);return}throw Error(t||"Unknown error")}n(!0)}catch(t){console.error("Submit error:",t),t?.message?.includes("logged in")||t?.message?.includes("authenticated")?(m(!0),u(!0)):alert(e("Failed to submit. Please try again.","       "))}finally{o(!1)}};return t?r.jsx("section",{className:"pt-32 pb-20 px-4",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-12 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-10 h-10 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),r.jsx("h2",{className:"text-2xl font-bold mb-4",children:e("Thank You!","!")}),r.jsx("p",{className:"text-gray-600 mb-6",children:e("Your blog has been submitted successfully and is under review. We'll notify you once it's published.","                ")}),r.jsx("a",{href:"/",className:"inline-block px-6 py-3 bg-royal-blue text-white font-semibold rounded-lg",children:e("Back to Home","   ")})]})})}):p?r.jsx("section",{className:"pt-32 pb-20 px-4",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-royal-blue mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:e("Loading...","   ...")})]})}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(cx,{isOpen:h,onClose:()=>{u(!1),m(!1)},onLoginSuccess:()=>{V(),u(!1),m(!1)}}),f&&!h&&r.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:e("Login Required"," ")}),r.jsx("p",{className:"text-gray-600 mb-6",children:e("Please login first to submit your blog. You need to be logged in to submit travel stories.","              ")}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{m(!1)},className:"flex-1 px-4 py-2 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-all",children:e("Cancel"," ")}),r.jsx("button",{onClick:()=>{u(!0),m(!1)},className:"flex-1 px-4 py-2 bg-gradient-to-r from-royal-blue to-deep-maroon text-white font-semibold rounded-lg hover:shadow-lg transition-all",children:e("Login","")})]})]})}),r.jsx("section",{className:"pt-32 pb-16 px-4 bg-gradient-to-br from-royal-blue to-deep-maroon text-white",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 mb-4",children:[r.jsx("div",{className:"flex-1"}),(0,r.jsxs)("div",{className:"text-center flex-1",children:[r.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e("Submit Your Travel Story","    ")}),r.jsx("p",{className:"text-lg opacity-90",children:e("Share your Rajasthan experience with our community","        ")})]}),l&&r.jsx("div",{className:"flex-1 flex justify-center md:justify-end",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center gap-3",children:[(0,r.jsxs)("div",{className:"text-center md:text-right",children:[r.jsx("p",{className:"text-sm opacity-90 font-medium",children:l.email}),l.user_metadata?.name&&r.jsx("p",{className:"text-xs opacity-75",children:l.user_metadata.name})]}),r.jsx("button",{onClick:H,className:"px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-sm font-semibold transition-all whitespace-nowrap",children:e("Logout","")})]})})]})})}),r.jsx("section",{className:"py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[!l&&r.jsx("div",{className:"mb-6 bg-gradient-to-r from-royal-blue to-deep-maroon rounded-2xl p-6 text-white shadow-lg",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-bold mb-2",children:e("\uD83D\uDD10 Login Required to Submit","\uD83D\uDD10      ")}),r.jsx("p",{className:"text-white/90",children:e("Please login or create an account to submit your travel story. It only takes a minute!","                  !")})]}),r.jsx("button",{type:"button",onClick:()=>u(!0),className:"px-8 py-3 bg-white text-royal-blue font-bold rounded-lg hover:bg-gray-100 transition-all shadow-lg hover:shadow-xl whitespace-nowrap",children:e("Login / Sign Up"," /  ")})]})}),r.jsx("form",{onSubmit:U,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-royal-blue",children:e("Author Information","  ")}),!l&&r.jsx("button",{type:"button",onClick:()=>u(!0),className:"text-sm text-royal-blue hover:underline font-semibold",children:e("Login to auto-fill","-    ")})]}),!l&&r.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-semibold text-yellow-900 mb-1",children:e(" Login Required","  ")}),r.jsx("p",{className:"text-sm text-yellow-800",children:e("You must be logged in to submit a blog. Please login first.","             ")})]}),r.jsx("button",{type:"button",onClick:()=>u(!0),className:"px-6 py-2 bg-gradient-to-r from-royal-blue to-deep-maroon text-white font-semibold rounded-lg hover:shadow-lg transition-all whitespace-nowrap",children:e("Login Now","  ")})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("Your Name"," ")}),r.jsx("input",{type:"text",value:g,onChange:e=>v(e.target.value),required:!0,disabled:!l,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Rahul Sharma"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("Your Email"," ")}),r.jsx("input",{type:"email",value:x,onChange:e=>y(e.target.value),required:!0,disabled:!l,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"rahul@example.com"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-xl font-bold mb-4 text-royal-blue",children:e("Blog Details"," ")}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("Destination","")}),r.jsx("select",{value:b,onChange:e=>w(e.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold",children:cM.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e("Category","")}),r.jsx("select",{value:k,onChange:e=>S(e.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold",children:cO.map(e=>r.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),r.jsx("div",{className:"mb-6",children:r.jsx(cm,{onUpload:K,currentImage:z,onImageChange:L,label:e("Cover Image"," ")})}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (English)"}),r.jsx("input",{type:"text",value:C,onChange:e=>M(e.target.value),required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold",placeholder:"My Amazing Trip to Jaipur"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Hindi - Optional)"}),r.jsx("input",{type:"text",value:O,onChange:e=>N(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold",placeholder:"    "})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Excerpt (English)"}),r.jsx("textarea",{value:T,onChange:e=>E(e.target.value),required:!0,rows:2,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold",placeholder:"A brief summary of your blog..."})]}),(0,r.jsxs)("div",{className:"mb-6 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-700",children:e("Your Story"," ")}),r.jsx("p",{className:"text-xs text-gray-500",children:e("Use headings, lists and images to make your story engaging.","        ,      ")})]}),(0,r.jsxs)("div",{className:"hidden md:flex flex-col items-end text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:[e("Words",""),": ",r.jsx("span",{className:"font-semibold",children:_})]}),(0,r.jsxs)("span",{children:[e("Reading time","  "),": ",r.jsx("span",{className:"font-semibold",children:q||1})," min"]})]})]}),r.jsx(lC,{content:D,onChange:R,placeholder:e("Start typing your travel story... You can add images, headings and more.","      ...  ,       "),onImageUpload:W}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between md:hidden text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:[e("Words",""),": ",r.jsx("span",{className:"font-semibold",children:_})]}),(0,r.jsxs)("span",{children:[e("Reading time","  "),": ",r.jsx("span",{className:"font-semibold",children:q||1})," min"]})]})]}),r.jsx(cg,{images:B,onRemove:e=>{F(t=>t.filter((t,n)=>n!==e))},onInsert:e=>{R(t=>t+`<img src="${e}" alt="Travel photo" />`)}})]}),r.jsx("button",{type:"submit",disabled:i||!l,className:"w-full py-4 bg-gradient-to-r from-desert-gold to-[#B8922F] text-white font-bold rounded-lg text-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:l?i?e("Submitting...","   ..."):e("Submit Blog for Review","     "):e("Please Login First","   ")}),r.jsx("p",{className:"text-center text-gray-500 text-sm",children:e("Your blog will be reviewed by our team before publishing","           ")})]}),r.jsx("div",{className:"lg:sticky lg:top-24 lg:self-start",children:r.jsx(lO,{title:C,coverImage:z,content:D,category:k,authorName:g})})]})})]})})]})}},7453:(e,t,n)=>{"use strict";n.d(t,{Vh:()=>o,f9:()=>r,ip:()=>s});var i=n(5472);async function o(e){try{let{data:{user:t},error:n}=await i.O.auth.getUser();if(n||!t)return console.error("[supabaseBlogs] User not authenticated:",n?.message),{id:null,error:"You must be logged in to submit a blog"};let o=e.status||"pending";console.log("[supabaseBlogs] Attempting to create blog with payload:",{title_en:e.title_en,destination:e.destination,category:e.category,status:o,author_id:t?.id,has_content:!!e.content_en,images_count:e.images?.length||0});let{data:r,error:s}=await i.O.from("blogs").insert({title_en:e.title_en,title_hi:e.title_hi??e.title_en,excerpt_en:e.excerpt_en,excerpt_hi:e.excerpt_hi??e.excerpt_en,content_en:e.content_en,content_hi:e.content_hi??e.content_en,destination:e.destination,category:e.category,cover_image:e.coverImage,author:e.author,images:e.images,author_id:t?.id,status:o,created_at:new Date().toISOString(),published_at:"published"===o?new Date().toISOString():null}).select("id").single();if(s)return console.error("[supabaseBlogs] createBlog error details:",{message:s.message,details:s.details,hint:s.hint,code:s.code}),{id:null,error:s.message||"Unknown error"};if(!r)return console.error("[supabaseBlogs] createBlog: No data returned from insert"),{id:null,error:"No data returned from database"};return console.log("[supabaseBlogs] Blog created successfully with ID:",r.id),{id:r.id,error:null}}catch(e){return console.error("[supabaseBlogs] createBlog unexpected error:",e),{id:null,error:e?.message||"Unexpected error occurred"}}}async function r(e){let{data:t,error:n}=await i.O.from("blogs").update({status:"published",published_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",e).select("id").single();return n||!t?(console.error("[supabaseBlogs] approveBlog error:",n?.message||n),{success:!1,error:n?.message||"Failed to approve blog"}):{success:!0,error:null}}async function s(e){let{data:t,error:n}=await i.O.from("blogs").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",e).select("id").single();return n||!t?(console.error("[supabaseBlogs] rejectBlog error:",n?.message||n),{success:!1,error:n?.message||"Failed to reject blog"}):{success:!0,error:null}}},5472:(e,t,n)=>{"use strict";n.d(t,{O:()=>i});let i=(0,n(8903).eI)("https://lvyabpenpuizwzwzswse.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imx2eWFicGVucHVpend6d3pzd3NlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1MDgxNTMsImV4cCI6MjA4NTA4NDE1M30.bq1O6ksPhxRFFEFmsNxbxH9boPlf2ebISO4jiHlHwj8")},4191:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var i=e.name||"",o=(e.type||"").toLowerCase(),r=o.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?r===t.replace(/\/.*$/,""):o===t})}return!0}},9899:(e,t,n)=>{"use strict";var i=n(6715);function o(){}function r(){}r.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,r,s){if(s!==i){var a=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:o};return n.PropTypes=n,n}},8439:(e,t,n)=>{e.exports=n(9899)()},6715:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5389:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});let i=(0,n(8570).createProxy)(String.raw`C:\Users\AbhishekKumar\Documents\Website\TravelWebsite\app\submit\page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),i=t.X(0,[20,903,634],()=>n(8303));module.exports=i})();