(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[606],{6776:function(e,t,s){Promise.resolve().then(s.bind(s,1321))},1321:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(7437),l=s(2265),a=s(6943),o=s(9608),n=s(2501),i=s(2510),c=s(5978),d=s(7293),g=s(4422);let u=["all","jaipur","udaipur","jaisalmer","jodhpur","pushkar"];function h(){return(0,r.jsxs)("div",{className:"bg-white rounded-2xl overflow-hidden animate-pulse",children:[(0,r.jsx)("div",{className:"h-56 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 bg-[length:200%_100%] animate-shimmer"}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex gap-4 mb-3",children:[(0,r.jsx)("div",{className:"h-4 w-20 bg-gray-200 rounded"}),(0,r.jsx)("div",{className:"h-4 w-16 bg-gray-200 rounded"})]}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-2 w-full"}),(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-3 w-3/4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-100 rounded mb-2 w-full"}),(0,r.jsx)("div",{className:"h-4 bg-gray-100 rounded w-2/3"}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pt-4 mt-4 border-t border-gray-100",children:[(0,r.jsx)("div",{className:"w-9 h-9 bg-gray-200 rounded-full"}),(0,r.jsx)("div",{className:"h-4 w-24 bg-gray-200 rounded"})]})]})]})}function m(){let{t:e,lang:t}=(0,a.Z)(),[s,m]=(0,l.useState)("all"),[x,p]=(0,l.useState)(""),[b,f]=(0,l.useState)([]),[v,j]=(0,l.useState)(!0),[y,w]=(0,l.useState)(null),[N,k]=(0,l.useState)(!1),[D,C]=(0,l.useState)(!0);(0,l.useEffect)(()=>{S()},[]);let S=async()=>{console.log("=== fetchBlogs called ==="),j(!0);try{try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("Query timeout")),5e3)}),t=(0,c.getDocs)((0,c.query)((0,c.collection)(d.db,"blogs"),(0,c.where)("status","==","approved"),(0,c.orderBy)("createdAt","desc"),(0,c.limit)(3))),s=await Promise.race([t,e]);console.log("Firestore query completed, docs:",s.docs.length);let r=s.docs[s.docs.length-1];w(r),C(3===s.docs.length);let l=s.docs.map(e=>{var t;return{id:e.id,...e.data(),publishedAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}});if(l.length>0){console.log("=== Replacing with real blogs ==="),console.log("Real blogs count:",l.length);let e=l.filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id));f(e),g.Et.set(g.l6.BLOGS,e,g.rO.MEDIUM),console.log("Real blogs set in state")}else console.log("=== No real blogs found, using demo blogs ==="),f(i.Zb)}catch(e){console.error("=== Error fetching blogs, using fallback ===",e),f(i.Zb),C(!1)}console.log("=== fetchBlogs complete ===")}catch(e){console.error("=== Critical error in fetchBlogs, using fallback ===",e),f(i.Zb),j(!1),C(!1)}j(!1)},E=async()=>{if(y){k(!0);try{let e=(0,c.query)((0,c.collection)(d.db,"blogs"),(0,c.where)("status","==","approved"),(0,c.orderBy)("createdAt","desc"),(0,c.startAfter)(y),(0,c.limit)(9)),t=await (0,c.getDocs)(e),s=t.docs[t.docs.length-1];w(s),C(9===t.docs.length);let r=t.docs.map(e=>{var t;return{id:e.id,...e.data(),publishedAt:(null===(t=e.data().createdAt)||void 0===t?void 0:t.toDate())||new Date}});f(e=>[...e,...r])}catch(e){console.error("Error loading more blogs:",e)}k(!1)}},L=(0,l.useMemo)(()=>{console.log("=== Filtering blogs ==="),console.log("Current blogs in state:",b.length),console.log("Current blog IDs:",b.map(e=>e.id)),console.log("Filter:",s,"Search:",x);let e=b.filter(e=>{let r="all"===s||e.destination===s,l="hi"===t?e.title_hi:e.title_en,a="hi"===t?e.excerpt_hi:e.excerpt_en,o=!x||l.toLowerCase().includes(x.toLowerCase())||a.toLowerCase().includes(x.toLowerCase());return r&&o});return console.log("Filtered blogs count:",e.length),console.log("Filtered blog IDs:",e.map(e=>e.id)),console.log("=== Filtering complete ==="),e},[b,s,x,t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("section",{className:"pt-32 pb-16 px-4 bg-gradient-to-br from-royal-blue to-deep-maroon text-white",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto text-center",children:[(0,r.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:e("Travel Blogs","यात्रा ब्लॉग")}),(0,r.jsx)("p",{className:"text-lg opacity-90 max-w-2xl mx-auto",children:e("Stories, guides, and tips from travelers exploring Rajasthan","राजस्थान की खोज करने वाले यात्रियों की कहानियां, गाइड और टिप्स")})]})}),(0,r.jsx)("section",{className:"py-8 px-4 bg-white border-b sticky top-16 z-40",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex flex-wrap gap-4 items-center justify-between",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-3",children:u.map(t=>(0,r.jsx)("button",{onClick:()=>m(t),className:"px-4 py-2 rounded-full text-sm font-medium transition-all ".concat(s===t?"bg-royal-blue text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"all"===t?e("All","सभी"):t.charAt(0).toUpperCase()+t.slice(1)},t))}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",value:x,onChange:e=>p(e.target.value),placeholder:e("Search blogs...","ब्लॉग खोजें..."),className:"px-4 py-2 pl-10 border border-gray-200 rounded-lg focus:outline-none focus:border-desert-gold w-64"}),(0,r.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})}),(0,r.jsx)("section",{className:"py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[v?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,r.jsx)(h,{},e))}):0===L.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCDD"}),(0,r.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:e("No blogs found","कोई ब्लॉग नहीं मिला")}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:e("Try adjusting your filters or search","अपने फ़िल्टर या खोज को समायोजित करने का प्रयास करें")})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>(0,r.jsx)(o.Z,{blog:e},e.id))}),!v&&D&&"all"===s&&!x&&(0,r.jsx)("div",{className:"mt-12 text-center",children:(0,r.jsx)("button",{onClick:E,disabled:N,className:"px-8 py-3 bg-white border border-gray-200 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 hover:border-gray-300 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 mx-auto",children:N?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-gray-600 border-t-transparent rounded-full animate-spin"}),e("Loading...","लोड हो रहा है...")]}):(0,r.jsxs)(r.Fragment,{children:[e("Load More","और लोड करें"),(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})})}),(0,r.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-200",children:(0,r.jsx)(n.Z,{destination:"all"!==s?s:void 0,limit:4})})]})})]})}},2501:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7437),l=s(2265),a=s(5978),o=s(7293),n=s(6943),i=s(4422);function c(e){let{destination:t,limit:s=4}=e,{t:c}=(0,n.Z)(),[d,g]=(0,l.useState)([]),[u,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{m()},[t]);let m=async()=>{let e=i.Et.get(i.l6.PRODUCTS),r=[];if(e)r=e;else try{let e=(0,a.query)((0,a.collection)(o.db,"affiliateProducts"),(0,a.where)("isActive","==",!0));r=(await (0,a.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()})),i.Et.set(i.l6.PRODUCTS,r,i.rO.MEDIUM)}catch(e){console.error("Error fetching products:",e),h(!1);return}let l=r;t&&(l=r.filter(e=>e.destinations.includes(t)||0===e.destinations.length)),g(l.slice(0,s)),h(!1)};return u?(0,r.jsx)("div",{className:"animate-pulse flex gap-4",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"w-48 h-64 bg-gray-200 rounded-xl"},e))}):0===d.length?null:(0,r.jsxs)("section",{className:"py-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:[c("Recommended Products","अनुशंसित उत्पाद")," ✨"]}),(0,r.jsx)("span",{className:"text-sm text-gray-500",children:c("Affiliate links","सहबद्ध लिंक")})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:d.map(e=>(0,r.jsxs)("a",{href:e.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"group bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-lg hover:border-desert-gold/30 transition-all duration-300",children:[(0,r.jsx)("div",{className:"aspect-square bg-gray-50 overflow-hidden",children:e.imageUrl?(0,r.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-amber-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})})}),(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-800 text-sm line-clamp-2 mb-1 group-hover:text-royal-blue transition-colors",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-desert-gold font-bold",children:e.price}),(0,r.jsxs)("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"Shop"]})]})]})]},e.id))})]})}},4422:function(e,t,s){"use strict";s.d(t,{Et:function(){return l},l6:function(){return a},rO:function(){return o}});class r{get(e){let t=this.cache.get(e);return t?Date.now()-t.timestamp>t.expiresIn?(this.cache.delete(e),null):t.data:null}set(e,t,s){this.cache.set(e,{data:t,timestamp:Date.now(),expiresIn:s||this.defaultExpiry})}has(e){return null!==this.get(e)}clear(e){this.cache.delete(e)}clearAll(){this.cache.clear()}async getOrFetch(e,t,s){let r=this.get(e);if(null!==r)return r;let l=await t();return this.set(e,l,s),l}constructor(){this.cache=new Map,this.defaultExpiry=3e5}}let l=new r,a={BLOGS:"blogs_approved",PRODUCTS:"affiliate_products",DESTINATIONS:"destinations"},o={SHORT:12e4,MEDIUM:6e5,LONG:18e5}},7293:function(e,t,s){"use strict";s.d(t,{db:function(){return n},t:function(){return i}});var r=s(738),l=s(5978),a=s(62);let o=0===(0,r.C6)().length?(0,r.ZF)({apiKey:"AIzaSyDzaCX0Cnto1f6crziqADEBMERgl67Zu0M",authDomain:"travel-50844.firebaseapp.com",projectId:"travel-50844",storageBucket:"travel-50844.firebasestorage.app",messagingSenderId:"216960635494",appId:"1:216960635494:web:fa98188c2231a49c8f53a7"}):(0,r.C6)()[0],n=(0,l.getFirestore)(o),i=(0,a.cF)(o);Promise.resolve().then(s.bind(s,5978)).then(e=>{let{enableIndexedDbPersistence:t}=e;t(n).catch(e=>{"failed-precondition"===e.code?console.log("Multiple tabs open, persistence can only be enabled in one tab at a time."):"unimplemented"===e.code&&console.log("The current browser does not support persistence.")})})}},function(e){e.O(0,[358,145,648,763,607,971,117,744],function(){return e(e.s=6776)}),_N_E=e.O()}]);